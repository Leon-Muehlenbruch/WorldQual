{"config":{"lang":["de"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"WorldQual - Globales Wasserqualit\u00e4ts-Modellierungssystem","text":"<p>Dokumentations-\u00dcbersicht: INDEX.md | Schnellreferenz | Detaillierte Anleitung | Projektstruktur</p>"},{"location":"#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>Was macht WorldQual?</li> <li>Schnellstart (Quick Start)</li> <li>Detaillierte Anleitung</li> <li>Module im Detail</li> <li>H\u00e4ufige Fragen (FAQ)</li> <li>Systemanforderungen</li> <li>Installation</li> <li>Weitere Hilfe</li> </ul>"},{"location":"#was-macht-worldqual","title":"Was macht WorldQual?","text":"<p>WorldQual ist ein Computerprogramm, das vorhersagt, wie sauber oder verschmutzt Wasser in Fl\u00fcssen weltweit ist. </p>"},{"location":"#einfach-erkl\u00e4rt","title":"Einfach erkl\u00e4rt:","text":"<p>Stellen Sie sich vor, Sie m\u00f6chten wissen: - Wie viel Schadstoffe sind in einem Fluss? - Woher kommen diese Schadstoffe? (z.B. aus Kl\u00e4ranlagen, Landwirtschaft, Industrie) - Wie ver\u00e4ndern sich die Werte, wenn sich die Bedingungen \u00e4ndern? (z.B. mehr Bev\u00f6lkerung, Klimawandel)</p> <p>WorldQual beantwortet diese Fragen durch mathematische Simulationen. Es berechnet: 1. Eintr\u00e4ge: Wie viele Schadstoffe gelangen in die Fl\u00fcsse (aus verschiedenen Quellen) 2. Transport: Wie werden die Schadstoffe im Fluss transportiert? 3. Abbau: Wie schnell werden Schadstoffe abgebaut oder verd\u00fcnnt? 4. Ergebnis: Welche Konzentration hat das Wasser am Ende?</p>"},{"location":"#was-kann-worldqual-berechnen","title":"Was kann WorldQual berechnen?","text":"<p>WorldQual kann verschiedene Wasserqualit\u00e4tsparameter simulieren:</p> Parameter Was bedeutet das? Warum wichtig? BOD (Biochemischer Sauerstoffbedarf) Wie viel Sauerstoff wird verbraucht, um organische Stoffe abzubauen Zeigt Verschmutzung durch Abwasser an Salz (TDS) Gesamter Salzgehalt im Wasser Wichtig f\u00fcr Trinkwasser und Bew\u00e4sserung F\u00e4kalcoliforme Bakterien (FC) Bakterien aus F\u00e4kalien Gesundheitsrisiko, zeigt Verunreinigung an Stickstoff (TN) Gesamtstickstoff Kann zu Algenbl\u00fcte f\u00fchren, aus D\u00fcnger Phosphor (TP) Gesamtphosphor Kann zu Algenbl\u00fcte f\u00fchren, aus D\u00fcnger"},{"location":"#typische-anwendungen","title":"Typische Anwendungen","text":"<ul> <li>Forschung: Wie ver\u00e4ndert sich die Wasserqualit\u00e4t durch Klimawandel?</li> <li>Planung: Was passiert, wenn sich Bev\u00f6lkerungsdichte oder Landnutzung \u00e4ndert?</li> <li>Validierung: Stimmen unsere Vorhersagen mit gemessenen Daten \u00fcberein?</li> <li>Szenarien: Vergleich verschiedener Zukunftsszenarien</li> </ul>"},{"location":"#voraussetzungen---schritt-f\u00fcr-schritt","title":"Voraussetzungen - Schritt f\u00fcr Schritt","text":"<p>Bevor Sie WorldQual nutzen k\u00f6nnen, m\u00fcssen Sie drei Dinge einrichten. Diese Anleitung erkl\u00e4rt jeden Schritt detailliert, als ob Sie niemanden h\u00e4tten, den Sie fragen k\u00f6nnen.</p>"},{"location":"#1-mysql-datenbank-einrichten","title":"1. MySQL-Datenbank einrichten","text":""},{"location":"#was-ist-mysql","title":"Was ist MySQL?","text":"<p>MySQL ist ein Datenbankserver, der die Daten f\u00fcr WorldQual speichert (Projekte, Szenarien, Simulationsergebnisse, etc.).</p>"},{"location":"#schritt-11-mysql-installieren","title":"Schritt 1.1: MySQL installieren","text":"<p>Linux (Ubuntu/Debian): <pre><code># MySQL Server installieren\nsudo apt-get update\nsudo apt-get install mysql-server\n\n# MySQL starten\nsudo systemctl start mysql\nsudo systemctl enable mysql  # Startet automatisch beim Booten\n</code></pre></p> <p>macOS: <pre><code># Mit Homebrew installieren\nbrew install mysql@8.0\nbrew services start mysql@8.0\n</code></pre></p> <p>Pr\u00fcfen ob MySQL l\u00e4uft: <pre><code>sudo systemctl status mysql  # Linux\n# oder\nbrew services list | grep mysql  # macOS\n</code></pre></p>"},{"location":"#schritt-12-mysql-konfigurieren","title":"Schritt 1.2: MySQL konfigurieren","text":"<p>Erste Einrichtung (nur beim ersten Start): <pre><code># Sicherheits-Skript ausf\u00fchren (Linux)\nsudo mysql_secure_installation\n\n# Oder direkt als root einloggen (macOS)\nmysql -u root\n</code></pre></p> <p>Benutzer f\u00fcr WorldQual erstellen: <pre><code>-- In MySQL einloggen\nmysql -u root -p\n\n-- Benutzer erstellen\nCREATE USER 'worldqual'@'localhost' IDENTIFIED BY 'ihr_passwort_hier';\n\n-- Berechtigungen geben\nGRANT ALL PRIVILEGES ON *.* TO 'worldqual'@'localhost';\nFLUSH PRIVILEGES;\n\n-- Testen\nmysql -u worldqual -p\n-- Passwort eingeben, dann sollte es funktionieren\n</code></pre></p> <p>Wichtig: Merken Sie sich: - Benutzername: <code>worldqual</code> (oder wie Sie es genannt haben) - Passwort: Das, was Sie oben eingegeben haben - Host: <code>localhost</code> (wenn lokal) oder die IP-Adresse des Servers</p>"},{"location":"#schritt-13-datenbankstruktur-einrichten","title":"Schritt 1.3: Datenbankstruktur einrichten","text":"<p>WorldQual ben\u00f6tigt spezielle Datenbanktabellen. Diese m\u00fcssen Sie entweder: - Von einem bestehenden Projekt kopieren, oder - Neu erstellen (ben\u00f6tigt Datenbank-Schema-Dateien)</p> <p>Falls Sie ein bestehendes Projekt haben: <pre><code># Datenbank exportieren\nmysqldump -u root -p wq_general &gt; wq_general_backup.sql\n\n# Auf neuem System importieren\nmysql -u root -p &lt; wq_general_backup.sql\n</code></pre></p> <p>Falls Sie neu starten: Sie ben\u00f6tigen die Datenbank-Schema-Dateien (normalerweise <code>.sql</code> Dateien). Diese sollten vom Projekt bereitgestellt werden.</p> <p>Pr\u00fcfen ob Datenbanken existieren: <pre><code>mysql -u worldqual -p\nSHOW DATABASES;\n-- Sollten Sie sehen: wq_general (und eventuell weitere)\n</code></pre></p>"},{"location":"#2-watergap-daten-beschaffen","title":"2. WaterGAP-Daten beschaffen","text":""},{"location":"#was-sind-watergap-daten","title":"Was sind WaterGAP-Daten?","text":"<p>WaterGAP (Water Global Assessment and Prognosis) ist ein hydrologisches Modell. WorldQual ben\u00f6tigt dessen Output-Daten: - Abfluss (Q_out) - wie viel Wasser flie\u00dft im Fluss? - Runoff - wie viel Wasser flie\u00dft ab? - Weitere hydrologische Daten</p>"},{"location":"#schritt-21-datenquelle-finden","title":"Schritt 2.1: Datenquelle finden","text":"<p>Option A: Sie haben bereits Zugriff - Fragen Sie Ihren Betreuer/Kollegen nach dem Pfad zu den Daten - Daten sind normalerweise in UNF-Dateien (bin\u00e4res Format)</p> <p>Option B: Daten m\u00fcssen beschafft werden - Kontaktieren Sie die WaterGAP-Projektgruppe - Oder nutzen Sie \u00f6ffentlich verf\u00fcgbare WaterGAP-Daten (falls verf\u00fcgbar)</p>"},{"location":"#schritt-22-datenformat-verstehen","title":"Schritt 2.2: Datenformat verstehen","text":"<p>WaterGAP-Daten kommen als UNF-Dateien (Unformatted): - Format: Bin\u00e4r (nicht lesbar als Text) - Struktur: Grid-Daten (0.5\u00b0 x 0.5\u00b0 Aufl\u00f6sung) - Zeitreihen: Monatlich (12 Werte pro Jahr) oder j\u00e4hrlich</p> <p>Typische Dateinamen: <pre><code>G_Q_out_m3_2010.12.UNF0    # Monatlicher Abfluss f\u00fcr 2010\nG_RUNOFF_TOTAL_mm_2010.12.UNF0  # Monatlicher Runoff f\u00fcr 2010\n</code></pre></p>"},{"location":"#schritt-23-daten-pr\u00fcfen","title":"Schritt 2.3: Daten pr\u00fcfen","text":"<p>Pr\u00fcfen ob Dateien existieren: <pre><code># In das Verzeichnis wechseln\ncd /pfad/zu/watergap/daten\n\n# Dateien anzeigen\nls -lh G_*.UNF0\n\n# Sollten Sie sehen:\n# - Dateien f\u00fcr verschiedene Jahre\n# - Verschiedene Parameter (Q_out, RUNOFF, etc.)\n</code></pre></p> <p>Wichtig:  - Notieren Sie den vollst\u00e4ndigen Pfad (z.B. <code>/home/user/watergap_data/africa</code>) - Dieser Pfad wird sp\u00e4ter in <code>OPTIONS.DAT</code> ben\u00f6tigt</p>"},{"location":"#3-module-kompilieren","title":"3. Module kompilieren","text":""},{"location":"#was-bedeutet-kompilieren","title":"Was bedeutet \"kompilieren\"?","text":"<p>Kompilieren bedeutet, den C++-Quellcode in ausf\u00fchrbare Programme umzuwandeln.</p>"},{"location":"#schritt-31-abh\u00e4ngigkeiten-installieren","title":"Schritt 3.1: Abh\u00e4ngigkeiten installieren","text":"<p>C++ Compiler: <pre><code># Linux\nsudo apt-get install build-essential g++\n\n# macOS (Xcode Command Line Tools)\nxcode-select --install\n</code></pre></p> <p>MySQL++ Bibliothek (C++ MySQL Connector): <pre><code># Linux (Ubuntu/Debian)\nsudo apt-get install libmysql++-dev libmysqlclient-dev\n\n# macOS\nbrew install mysql-connector-c++\n</code></pre></p> <p>Pr\u00fcfen ob installiert: <pre><code>g++ --version  # Sollte Version anzeigen\nmysql_config --version  # Sollte MySQL-Version anzeigen\n</code></pre></p>"},{"location":"#schritt-32-pfade-in-makefiles-anpassen","title":"Schritt 3.2: Pfade in Makefiles anpassen","text":"<p>Problem: Die Makefiles m\u00fcssen wissen, wo MySQL++ installiert ist. Dies kann je nach System unterschiedlich sein.</p> <p>Schritt 1: MySQL++ Pfade finden <pre><code># Header-Dateien finden\nfind /usr -name \"mysql++.h\" 2&gt;/dev/null\n# Oder\nfind /usr/local -name \"mysql++.h\" 2&gt;/dev/null\n\n# Bibliotheken finden\nfind /usr -name \"libmysqlpp.so\" 2&gt;/dev/null\n# Oder\nfind /usr/local -name \"libmysqlpp.so\" 2&gt;/dev/null\n</code></pre></p> <p>Schritt 2: Makefile anpassen</p> <p>\u00d6ffnen Sie ein Makefile (z.B. <code>water_temperature/makefile</code>):</p> <pre><code># Aktuelle Zeile (kann unterschiedlich sein):\nINCDIROPTS  = -L/usr/lib/libmysqlpp.so -I/usr/include/mysql  -I/usr/include/mysql++ ...\n\n# Anpassen falls n\u00f6tig:\nINCDIROPTS  = -L/usr/local/lib/libmysqlpp.so -I/usr/include/mysql  -I/usr/local/include/mysql++ ...\n</code></pre> <p>Typische Pfade: - Linux: <code>/usr/include/mysql++</code>, <code>/usr/lib/libmysqlpp.so</code> - macOS: <code>/usr/local/include/mysql++</code>, <code>/usr/local/lib/libmysqlpp.so</code></p>"},{"location":"#schritt-33-module-kompilieren","title":"Schritt 3.3: Module kompilieren","text":"<p>Reihenfolge ist wichtig! Zuerst gemeinsame Module:</p> <pre><code># 1. general_function (wird von allen anderen ben\u00f6tigt)\ncd general_function\nmake clean\nmake all\n# Sollte keine Fehler geben\n\n# 2. options (wird auch von allen ben\u00f6tigt)\ncd ../options\nmake clean\nmake all\n# Sollte keine Fehler geben\n</code></pre> <p>Dann spezifische Module:</p> <pre><code># 3. water_temperature\ncd ../water_temperature\nmake clean\nmake all\n# Pr\u00fcfen: ls -la water_temperature (sollte ausf\u00fchrbare Datei sein)\n\n# 4. fill_worldqual_load\ncd ../fill_worldqual_load\nmake clean\nmake all\n# Pr\u00fcfen: ls -la fill_worldqual_load\n\n# 5. worldqual (Hauptprogramm)\ncd ../worldqual\nmake clean\nmake all\n# Pr\u00fcfen: ls -la worldqual\n\n# 6. Weitere Module nach Bedarf...\n</code></pre>"},{"location":"#schritt-34-kompilierungsfehler-beheben","title":"Schritt 3.4: Kompilierungsfehler beheben","text":"<p>H\u00e4ufige Fehler:</p> <p>Fehler: \"mysql++.h: No such file or directory\" - L\u00f6sung: MySQL++ Header-Pfad in Makefile anpassen (siehe Schritt 3.2)</p> <p>Fehler: \"cannot find -lmysqlpp\" - L\u00f6sung: Bibliotheks-Pfad in Makefile anpassen</p> <p>Fehler: \"undefined reference to mysqlpp::...\" - L\u00f6sung: Bibliothek nicht gefunden, Pfade pr\u00fcfen</p> <p>Test ob Kompilierung erfolgreich: <pre><code># Pr\u00fcfen ob ausf\u00fchrbare Dateien existieren\nls -la worldqual fill_worldqual_load water_temperature\n\n# Sollten ausf\u00fchrbar sein (gr\u00fcn, x-Berechtigung)\n# Test-Ausf\u00fchrung (sollte Hilfe anzeigen oder Fehler wegen fehlender Parameter)\n./worldqual\n</code></pre></p>"},{"location":"#checkliste-alles-bereit","title":"Checkliste: Alles bereit?","text":"<p>Pr\u00fcfen Sie vor dem Start:</p> <ul> <li>[ ] MySQL l\u00e4uft: <code>systemctl status mysql</code> (Linux) oder <code>brew services list | grep mysql</code> (macOS)</li> <li>[ ] MySQL-Benutzer existiert: <code>mysql -u worldqual -p</code> funktioniert</li> <li>[ ] Datenbanken existieren: <code>SHOW DATABASES;</code> zeigt <code>wq_general</code></li> <li>[ ] WaterGAP-Daten vorhanden: <code>ls /pfad/zu/daten/*.UNF0</code> zeigt Dateien</li> <li>[ ] Module kompiliert: <code>ls -la worldqual fill_worldqual_load</code> zeigt ausf\u00fchrbare Dateien</li> <li>[ ] Pfade bekannt: Sie wissen wo MySQL++ installiert ist</li> </ul> <p>Wenn alles erledigt ist, k\u00f6nnen Sie mit dem Schnellstart beginnen!</p>"},{"location":"#schnellstart-quick-start","title":"Schnellstart (Quick Start)","text":""},{"location":"#f\u00fcr-neue-nutzer-erste-schritte","title":"F\u00fcr neue Nutzer: Erste Schritte","text":"<p>Voraussetzung: Sie haben die obigen Schritte abgeschlossen: - \u2705 MySQL-Datenbank eingerichtet und getestet - \u2705 WaterGAP-Daten verf\u00fcgbar und Pfad notiert - \u2705 Alle Module erfolgreich kompiliert</p>"},{"location":"#schritt-1-konfiguration-vorbereiten","title":"Schritt 1: Konfiguration vorbereiten","text":"<p>Jedes Modul braucht eine <code>OPTIONS.DAT</code> Datei. Kopieren Sie eine Beispiel-Datei:</p> <p>Tipp: Detaillierte Erkl\u00e4rung der Konfiguration finden Sie in DOCUMENTATION.md - Konfiguration verstehen</p> <pre><code>cd fill_worldqual_load\ncp OPTIONS.DAT OPTIONS.DAT.mein_projekt\n</code></pre> <p>Wie \u00f6ffnet man OPTIONS.DAT?</p> <pre><code># Mit nano (einfacher Editor)\nnano OPTIONS.DAT\n\n# Navigation in nano:\n# - Pfeiltasten: Bewegen\n# - Strg+O: Speichern (dann Enter dr\u00fccken)\n# - Strg+X: Beenden\n</code></pre> <p>Was genau \u00e4ndern?</p> <p>Die Datei enth\u00e4lt Zeilen wie: <pre><code>Value: 2\nValue: 91\nValue: localhost\nValue: worldqual\nValue: passwort\nValue: /pfad/zu/daten\n</code></pre></p> <p>\u00c4ndern Sie die Werte nach \"Value:\":</p> <ul> <li><code>Value: 2</code> \u2192 Ihre Projektnummer (z.B. 2 f\u00fcr WWQA)</li> <li><code>Value: 91</code> \u2192 Ihre Szenario-Nummer (z.B. 91)</li> <li><code>Value: 2</code> \u2192 Region (1=EU, 2=AF, 3=AS, 4=AU, 5=NA, 6=SA)</li> <li><code>Value: localhost</code> \u2192 MySQL-Server (localhost oder IP-Adresse)</li> <li><code>Value: worldqual</code> \u2192 MySQL-Benutzername</li> <li><code>Value: passwort</code> \u2192 MySQL-Passwort</li> <li><code>Value: /pfad/zu/daten</code> \u2192 Vollst\u00e4ndiger Pfad zu WaterGAP-Daten</li> </ul> <p>Wichtig:  - \u00c4ndern Sie NUR die Werte nach \"Value:\" - Lassen Sie den Rest der Datei unver\u00e4ndert - Speichern Sie die Datei (Strg+O, dann Enter)</p> <p>Detaillierte Erkl\u00e4rung: Siehe DOCUMENTATION.md - Konfiguration verstehen</p>"},{"location":"#schritt-2-eintr\u00e4ge-berechnen","title":"Schritt 2: Eintr\u00e4ge berechnen","text":"<p>Berechnen Sie, wie viele Schadstoffe in die Fl\u00fcsse gelangen:</p> <p>Mehr Details: Siehe DOCUMENTATION.md - fill_worldqual_load</p> <pre><code>cd fill_worldqual_load\n# OPTIONS.DAT anpassen!\n./fill_worldqual_load 2010 2010\n</code></pre> <p>Was passiert hier? - Das Programm liest Daten \u00fcber Bev\u00f6lkerungsdichte, Abwasserbehandlung, Landnutzung, etc. - Es berechnet f\u00fcr jede Grid-Zelle (ca. 0.5\u00b0 x 0.5\u00b0), wie viele Schadstoffe pro Monat eingetragen werden - Die Ergebnisse werden in der Datenbank gespeichert</p> <p>Dauer: Abh\u00e4ngig von Region und Zeitraum (kann Minuten bis Stunden dauern)</p>"},{"location":"#schritt-3-hauptsimulation-ausf\u00fchren","title":"Schritt 3: Hauptsimulation ausf\u00fchren","text":"<p>Simulieren Sie die Wasserqualit\u00e4t im Fluss:</p> <p>Mehr Details: Siehe DOCUMENTATION.md - worldqual</p> <pre><code>cd ../worldqual\n\n# 1. IDrun aus Datenbank holen (siehe unten)\n# 2. OPTIONS.DAT anpassen (wie Schritt 1)\n# 3. Simulation starten\n./worldqual 403100091 2010 2010\n</code></pre> <p>Wie finde ich die IDrun?</p> <pre><code># In MySQL einloggen\nmysql -u worldqual -p\n\n# Datenbank w\u00e4hlen\nUSE wq_general;\n\n# IDrun suchen\nSELECT IDrun, runName FROM _runlist \nWHERE parameter_id=2 AND IDScen=91;\n# Ergebnis z.B.: 403100091\n</code></pre> <p>Was wenn keine IDrun existiert? Sie m\u00fcssen eine IDrun in der Datenbank anlegen. Dies ist komplex - siehe DOCUMENTATION.md - IDrun finden f\u00fcr Details.</p> <p>Was passiert hier? - Das Programm liest die Eintr\u00e4ge aus Schritt 2 - Es simuliert, wie die Schadstoffe im Fluss transportiert werden - Es berechnet Abbauprozesse (z.B. Bakterien sterben ab, N\u00e4hrstoffe werden abgebaut) - Ergebnis: Konzentrationen f\u00fcr jede Grid-Zelle, jeden Monat</p> <p>Dauer: Kann Stunden bis Tage dauern (abh\u00e4ngig von Region und Zeitraum)</p>"},{"location":"#schritt-4-ergebnisse-analysieren","title":"Schritt 4: Ergebnisse analysieren","text":"<p>Vergleichen Sie Ihre Simulation mit gemessenen Daten:</p> <pre><code>cd ../wq_stat_stations\n./wq_stat_stations 403100091 2010 2010\n</code></pre> <p>Was passiert hier? - Das Programm findet Messstationen in der Datenbank - Es vergleicht Ihre simulierten Werte mit den gemessenen Werten - Es berechnet statistische Kennzahlen (z.B. R\u00b2, RMSE) - Ergebnis: Textdateien mit Vergleichsdaten</p>"},{"location":"#schritt-5-visualisierung-optional","title":"Schritt 5: Visualisierung (optional)","text":"<p>Erstellen Sie Diagramme mit R:</p> <p>Voraussetzung: R installieren</p> <pre><code># Linux\nsudo apt-get install r-base\n\n# macOS\nbrew install r\n</code></pre> <p>R-Pakete installieren: <pre><code># R \u00f6ffnen (im Terminal: R)\ninstall.packages(c(\"ggplot2\", \"gridExtra\"))\n</code></pre></p> <p>R-Skripte nutzen:</p> <pre><code># 1. R \u00f6ffnen\nR\n\n# 2. In Verzeichnis wechseln\nsetwd(\"R-scripte\")\n\n# 3. start.R anpassen (mit Texteditor oder file.edit(\"start.R\"))\n# Wichtige Variablen:\n# - input.path: Pfad zu Statistik-Dateien\n# - current_dir: Wo Grafiken gespeichert werden\n# - unit: Einheit (z.B. \"cfu/100ml\" f\u00fcr FC)\n# - log_scale: \"y\" f\u00fcr logarithmische y-Achse\n\n# 4. Skripte ausf\u00fchren\nsource(\"start.R\")\nsource(\"station.R\")  # Diagramme f\u00fcr einzelne Stationen\n</code></pre> <p>Detaillierte Anleitung: Siehe DOCUMENTATION.md - Visualisierung</p>"},{"location":"#detaillierte-anleitung","title":"Detaillierte Anleitung","text":""},{"location":"#voraussetzungen-pr\u00fcfen","title":"Voraussetzungen pr\u00fcfen","text":"<p>Bevor Sie starten, pr\u00fcfen Sie:</p> <ol> <li> <p>MySQL-Datenbank l\u00e4uft? <pre><code>systemctl status mysql\n# oder\nmysql -u username -p -e \"SHOW DATABASES;\"\n</code></pre></p> </li> <li> <p>Module kompiliert? <pre><code>cd general_function &amp;&amp; make all\ncd ../options &amp;&amp; make all\ncd ../water_temperature &amp;&amp; make all\n# etc.\n</code></pre></p> </li> <li> <p>Input-Daten vorhanden?</p> </li> <li>WaterGAP-Daten (Abfluss, Runoff, etc.)</li> <li>Bev\u00f6lkerungsdaten</li> <li>Landnutzungsdaten</li> <li>Weitere je nach Parameter</li> </ol>"},{"location":"#konfiguration-verstehen","title":"Konfiguration verstehen","text":"<p>Die <code>OPTIONS.DAT</code> Datei ist das Herzst\u00fcck der Konfiguration. Hier die wichtigsten Einstellungen:</p>"},{"location":"#projekt-und-szenario","title":"Projekt und Szenario","text":"<pre><code>1. project_id\n   Welches Projekt verwenden Sie?\n   1: CESR\n   2: WWQA\n   3: CESR Sensitivity Analysis\n   4: test\nValue: 2\n\n2. IDScen\n   Welches Szenario simulieren Sie?\n   (Nummer aus Datenbanktabelle wq_general._szenario)\nValue: 91\n</code></pre> <p>Wo finde ich die richtigen Nummern? - In der MySQL-Datenbank: <code>SELECT * FROM wq_general._project;</code> - In der MySQL-Datenbank: <code>SELECT * FROM wq_general._szenario;</code></p>"},{"location":"#region-und-version","title":"Region und Version","text":"<pre><code>3. IDVersion\n   Welche WaterGAP-Version?\n   2: WaterGAP2\n   3: WaterGAP3\nValue: 3\n\n4. IDReg\n   Welche Region?\n   1: Europa (eu)\n   2: Afrika (af)\n   3: Asien (as)\n   4: Australien (au)\n   5: Nordamerika (na)\n   6: S\u00fcdamerika (sa)\nValue: 2\n</code></pre>"},{"location":"#datenbankverbindung","title":"Datenbankverbindung","text":"<pre><code>5. MyHost\n   MySQL-Server-Adresse\nValue: localhost\n   # oder IP-Adresse, z.B. REMOVED_HOST\n\n6. MyUser\n   MySQL-Benutzername\nValue: worldqual\n\n7. MyPassword\n   MySQL-Passwort\nValue: mein_passwort\n</code></pre>"},{"location":"#input-daten","title":"Input-Daten","text":"<pre><code>8. InputType\n   Woher kommen die Daten?\n   0: Aus der Datenbank lesen\n   1: Aus UNF-Dateien lesen\nValue: 1\n\n9. input_dir\n   Pfad zu den UNF-Dateien (nur bei InputType=1)\nValue: /pfad/zu/meinen/daten\n</code></pre>"},{"location":"#kompletter-workflow-beispiel","title":"Kompletter Workflow: Beispiel","text":"<p>Hier ein vollst\u00e4ndiges Beispiel f\u00fcr eine Simulation:</p>"},{"location":"#beispiel-simulation-f\u00fcr-afrika-jahr-2010-parameter-fc-f\u00e4kalcoliforme","title":"Beispiel: Simulation f\u00fcr Afrika, Jahr 2010, Parameter FC (F\u00e4kalcoliforme)","text":"<p>Vorbereitung: 1. Datenbank pr\u00fcfen: Projekt 2 (WWQA), Szenario 91 existiert 2. Input-Daten vorhanden: WaterGAP3-Daten f\u00fcr Afrika 3. Module kompiliert</p> <p>Schritt 1: Eintr\u00e4ge berechnen</p> <pre><code>cd fill_worldqual_load\n\n# OPTIONS.DAT anpassen:\n# project_id = 2\n# IDScen = 91\n# IDReg = 2 (Afrika)\n# Parameter-ID f\u00fcr FC ist 2 (wird in Datenbank gespeichert)\n\n./fill_worldqual_load 2010 2010\n</code></pre> <p>Ausgabe: <pre><code>Program fill_worldqual_load started at: 2026-02-02 10:00:00\nproject_id = 2 (WWQA)\nDatabase: wwqa_wq_load_af connection ok...\nBerechne Eintr\u00e4ge f\u00fcr Parameter 2 (FC)...\nJahr 2010...\nFertig!\n</code></pre></p> <p>Schritt 2: Wassertemperatur (optional, aber empfohlen)</p> <pre><code>cd ../water_temperature\n\n# OPTIONS.DAT anpassen:\n# IDTemp = 100 (aus Datenbank)\n\n./water_temperature 2010 2010\n</code></pre> <p>Schritt 3: Hauptsimulation</p> <pre><code>cd ../worldqual\n\n# OPTIONS.DAT anpassen:\n# IDrun muss aus Datenbank geholt werden:\n# mysql&gt; SELECT IDrun FROM wq_general._runlist WHERE parameter_id=2 AND IDScen=91;\n# Ergebnis z.B.: 403100091\n\n./worldqual 403100091 2010 2010\n</code></pre> <p>Ausgabe: <pre><code>Program worldqual started at: 2026-02-02 10:30:00\nproject_id = 2 (WWQA)\nIDrun = 403100091\nParameter: FC (F\u00e4kalcoliforme)\nRegion: Afrika\nDatabase: wwqa_worldqual_af connection ok...\nLese Eintr\u00e4ge...\nLese hydrologische Daten...\nSimuliere Jahr 2010...\n  Monat 1... 2... 3... ... 12\nFertig!\nProgram worldqual ended at: 2026-02-02 14:30:00\n</code></pre></p> <p>Schritt 4: Statistik</p> <pre><code>cd ../wq_stat_stations\n\n# STAT.DAT anpassen falls n\u00f6tig\n\n./wq_stat_stations 403100091 2010 2010\n</code></pre> <p>Ergebnis: Textdateien mit statistischen Vergleichen</p> <p>Schritt 5: Visualisierung</p> <pre><code># In R\nsetwd(\"R-scripte\")\n\n# start.R \u00f6ffnen und anpassen:\ninput.path &lt;- \"/pfad/zu/statistik/dateien\"\ninput.filename &lt;- \"\"  # leer = alle Dateien\nunit &lt;- \"cfu/100ml\"  # Einheit f\u00fcr FC\nlog_scale &lt;- \"y\"     # logarithmische y-Achse\n\nsource(\"start.R\")\nsource(\"station.R\")  # Erstellt Diagramme\n</code></pre>"},{"location":"#module-im-detail","title":"Module im Detail","text":""},{"location":"#kern-module-m\u00fcssen-sie-verstehen","title":"Kern-Module (m\u00fcssen Sie verstehen)","text":""},{"location":"#1-fill_worldqual_load","title":"1. fill_worldqual_load","text":"<p>Was macht es? Berechnet, wie viele Schadstoffe in die Fl\u00fcsse gelangen.</p> <p>Wann brauche ich es? IMMER vor der Hauptsimulation!</p> <p>Wie funktioniert es? - Liest Daten \u00fcber:   - Bev\u00f6lkerungsdichte \u2192 Abwassermengen   - Abwasserbehandlung \u2192 Wie viel wird gereinigt?   - Landnutzung \u2192 D\u00fcnger, Erosion   - Geologie \u2192 Nat\u00fcrliche Quellen - Berechnet f\u00fcr jede Grid-Zelle und jeden Monat die Eintr\u00e4ge - Speichert in Datenbank: <code>wwqa_wq_load_[region].calc_cell_month_load_*</code></p> <p>Beispiel: <pre><code>./fill_worldqual_load 1990 2010\n# Berechnet Eintr\u00e4ge f\u00fcr Jahre 1990-2010\n</code></pre></p>"},{"location":"#2-worldqual-hauptsimulation","title":"2. worldqual (Hauptsimulation)","text":"<p>Was macht es? Simuliert die Wasserqualit\u00e4t im Fluss.</p> <p>Wann brauche ich es? Nach <code>fill_worldqual_load</code>.</p> <p>Wie funktioniert es? - Liest Eintr\u00e4ge aus Schritt 1 - Liest hydrologische Daten (Abfluss, Runoff) - Simuliert:   1. Transport: Schadstoffe werden flussabw\u00e4rts transportiert   2. Verd\u00fcnnung: Durch Zufl\u00fcsse wird Wasser verd\u00fcnnt   3. Abbau: Bakterien sterben ab, N\u00e4hrstoffe werden abgebaut   4. Temperatur: Beeinflusst Abbauprozesse - Ergebnis: Konzentrationen f\u00fcr jede Zelle, jeden Monat</p> <p>Beispiel: <pre><code>./worldqual 403100091 1990 2010\n# Simuliert Jahre 1990-2010 f\u00fcr Run 403100091\n</code></pre></p>"},{"location":"#3-wq_stat_stations","title":"3. wq_stat_stations","text":"<p>Was macht es? Vergleicht Simulation mit Messungen.</p> <p>Wann brauche ich es? Nach der Simulation, zur Validierung.</p> <p>Wie funktioniert es? - Findet Messstationen in der Datenbank - Liest gemessene Werte - Liest simulierte Werte - Berechnet: R\u00b2, RMSE, Bias, etc. - Erstellt Vergleichsdateien f\u00fcr Visualisierung</p> <p>Beispiel: <pre><code>./wq_stat_stations 403100091 1990 2010\n# Vergleicht f\u00fcr Jahre 1990-2010\n</code></pre></p>"},{"location":"#unterst\u00fctzungs-module","title":"Unterst\u00fctzungs-Module","text":""},{"location":"#water_temperature","title":"water_temperature","text":"<p>Was macht es? Berechnet Wassertemperatur aus Lufttemperatur.</p> <p>Wann brauche ich es? Wenn Temperatur f\u00fcr Abbauprozesse wichtig ist (z.B. bei Bakterien).</p>"},{"location":"#create_scenarios","title":"create_scenarios","text":"<p>Was macht es? Erstellt neue Szenarien basierend auf bestehenden.</p> <p>Wann brauche ich es? Wenn Sie viele \u00e4hnliche Szenarien erstellen wollen.</p>"},{"location":"#mapriverquality","title":"MapRiverQuality","text":"<p>Was macht es? Erstellt Karten mit Wasserqualit\u00e4tsklassen.</p> <p>Wann brauche ich es? F\u00fcr Visualisierung und Pr\u00e4sentationen.</p>"},{"location":"#r-skripte","title":"R-Skripte","text":"<p>Die R-Skripte erstellen Diagramme und Grafiken aus den Ergebnissen.</p> <p>Wichtigste Skripte: - <code>start.R</code>: Konfiguration (MUSS angepasst werden!) - <code>station.R</code>: Diagramme f\u00fcr einzelne Stationen - <code>stations_scatterplot.R</code>: Streudiagramme (Simulation vs. Messung) - <code>RiverSection.R</code>: Diagramme f\u00fcr Flussabschnitte</p> <p>Wie nutze ich sie? 1. <code>start.R</code> \u00f6ffnen 2. Variablen anpassen (siehe Kommentare) 3. Skript ausf\u00fchren: <code>source(\"start.R\")</code> 4. Dann andere Skripte ausf\u00fchren</p>"},{"location":"#h\u00e4ufige-fragen-faq","title":"H\u00e4ufige Fragen (FAQ)","text":""},{"location":"#wie-finde-ich-die-richtige-idrun","title":"Wie finde ich die richtige IDrun?","text":"<p>Die IDrun ist eine eindeutige Nummer f\u00fcr eine Simulation. Sie finden sie in der Datenbank:</p> <p>Schnellreferenz: Siehe QUICK_REFERENCE.md - IDrun finden</p> <pre><code>SELECT IDrun, runName, parameter_id, IDScen \nFROM wq_general._runlist \nWHERE parameter_id=2 AND IDScen=91;\n</code></pre> <p>Die IDrun setzt sich zusammen aus: <code>parameter_id</code> + <code>IDScen</code> + weitere Nummern.</p>"},{"location":"#wie-lange-dauert-eine-simulation","title":"Wie lange dauert eine Simulation?","text":"<ul> <li>Eintr\u00e4ge berechnen: Minuten bis Stunden (abh\u00e4ngig von Region)</li> <li>Hauptsimulation: Stunden bis Tage (abh\u00e4ngig von Region und Zeitraum)</li> <li>Statistik: Minuten bis Stunden</li> </ul> <p>Tipp: Testen Sie immer zuerst mit einem Jahr und kleiner Region!</p>"},{"location":"#was-mache-ich-bei-fehlern","title":"Was mache ich bei Fehlern?","text":"<p>Detaillierte Fehlerbehebung: Siehe DOCUMENTATION.md - Fehlerbehebung</p> <ol> <li>Datenbankverbindung schl\u00e4gt fehl</li> <li>MySQL l\u00e4uft? <code>systemctl status mysql</code></li> <li>Passwort richtig? In OPTIONS.DAT pr\u00fcfen</li> <li> <p>Berechtigungen? MySQL-User hat Zugriff?</p> </li> <li> <p>Datei nicht gefunden</p> </li> <li>Pfad richtig? <code>input_dir</code> in OPTIONS.DAT pr\u00fcfen</li> <li>Dateien existieren? <code>ls /pfad/zu/dateien</code></li> <li> <p>Rechte? <code>chmod</code> pr\u00fcfen</p> </li> <li> <p>Falsche Parameter-ID</p> </li> <li>Parameter existiert? <code>SELECT * FROM wq_general._parameter;</code></li> <li> <p>Parameter f\u00fcr Projekt konfiguriert?</p> </li> <li> <p>Speicherprobleme</p> </li> <li>Zu gro\u00dfe Region? Kleinere Region testen</li> <li>Zu langer Zeitraum? Ein Jahr testen</li> <li>RAM pr\u00fcfen: <code>free -h</code></li> </ol>"},{"location":"#kann-ich-mehrere-simulationen-parallel-laufen-lassen","title":"Kann ich mehrere Simulationen parallel laufen lassen?","text":"<p>Nein! Die Programme schreiben in die gleiche Datenbank. Parallele Ausf\u00fchrung kann zu Konflikten f\u00fchren.</p>"},{"location":"#wie-exportiere-ich-ergebnisse","title":"Wie exportiere ich Ergebnisse?","text":"<p>Ergebnisse sind in der Datenbank. Sie k\u00f6nnen sie exportieren:</p> <pre><code>SELECT * FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010;\n</code></pre> <p>Oder als CSV: <pre><code>SELECT * FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010\nINTO OUTFILE '/tmp/ergebnisse.csv';\n</code></pre></p>"},{"location":"#systemanforderungen","title":"Systemanforderungen","text":""},{"location":"#software","title":"Software","text":"<ul> <li>C++ Compiler (g++ mit C++11)</li> <li>MySQL Datenbankserver (5.5+)</li> <li>MySQL++ Bibliothek</li> <li>R (3.0+) mit ggplot2, gridExtra</li> <li>Make</li> </ul>"},{"location":"#hardware","title":"Hardware","text":"<ul> <li>RAM: Mindestens 8 GB (16+ GB empfohlen f\u00fcr gro\u00dfe Regionen)</li> <li>Festplatte: Abh\u00e4ngig von Datenmenge (mehrere GB)</li> <li>CPU: Multi-Core empfohlen (Programm nutzt aber nur einen Kern)</li> </ul>"},{"location":"#daten","title":"Daten","text":"<ul> <li>WaterGAP2/3 hydrologische Daten</li> <li>Bev\u00f6lkerungsdaten</li> <li>Landnutzungsdaten</li> <li>Weitere je nach Parameter</li> </ul>"},{"location":"#installation","title":"Installation","text":"<p>Wichtig: Die detaillierte Schritt-f\u00fcr-Schritt Installation finden Sie oben im Abschnitt Voraussetzungen - Schritt f\u00fcr Schritt.</p>"},{"location":"#kurz\u00fcbersicht","title":"Kurz\u00fcbersicht","text":"<ol> <li>MySQL installieren und konfigurieren (siehe oben, Abschnitt 1)</li> <li>WaterGAP-Daten beschaffen (siehe oben, Abschnitt 2)</li> <li>Module kompilieren (siehe oben, Abschnitt 3)</li> </ol>"},{"location":"#schnellreferenz-f\u00fcr-erfahrene","title":"Schnellreferenz f\u00fcr Erfahrene","text":"<p>Abh\u00e4ngigkeiten installieren: <pre><code># Ubuntu/Debian\nsudo apt-get update\nsudo apt-get install build-essential g++ mysql-server libmysql++-dev libmysqlclient-dev r-base\n\n# R-Pakete\nR -e \"install.packages(c('ggplot2', 'gridExtra'))\"\n</code></pre></p> <p>Module kompilieren: <pre><code>cd general_function &amp;&amp; make clean &amp;&amp; make all\ncd ../options &amp;&amp; make clean &amp;&amp; make all\ncd ../water_temperature &amp;&amp; make clean &amp;&amp; make all\ncd ../fill_worldqual_load &amp;&amp; make clean &amp;&amp; make all\ncd ../worldqual &amp;&amp; make clean &amp;&amp; make all\n</code></pre></p> <p>Wichtig: Pfade in Makefiles anpassen, falls MySQL++ nicht im Standardpfad ist! Siehe Voraussetzungen - Schritt f\u00fcr Schritt f\u00fcr Details.</p>"},{"location":"#weitere-hilfe","title":"Weitere Hilfe","text":"<p>F\u00fcr Nutzer: - Detaillierte Dokumentation - Schritt-f\u00fcr-Schritt Anleitungen - Schnellreferenz - Wichtige Befehle und Nummern - Projektstruktur - Verzeichnisse und Dateien - Dokumentations-Index - \u00dcbersicht aller Dokumentationen - Fehlerbehebung - Probleme l\u00f6sen</p> <p>F\u00fcr Entwickler: - Technische Dokumentation - Entwickler-Dokumentation - Architektur - Code-Struktur und Design - Entwicklungsumgebung - Build-System und Entwicklung - Code-Standards - Coding-Konventionen - Contributing - Wie man beitr\u00e4gt</p> <p>Version: 1.0 Letzte Aktualisierung: Februar 2026</p>"},{"location":"technical/API/","title":"WorldQual - API-Referenz","text":"<p>Referenz der wichtigsten Funktionen und Klassen f\u00fcr Entwickler.</p>"},{"location":"technical/API/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>general_functions API</li> <li>options API</li> <li>ClassWQ_load API</li> <li>Datenstrukturen</li> </ul>"},{"location":"technical/API/#general_functions-api","title":"general_functions API","text":""},{"location":"technical/API/#datenbankzugriff","title":"Datenbankzugriff","text":""},{"location":"technical/API/#getproject","title":"getProject()","text":"<pre><code>bool getProject(int project_id, const optionsClass* options_ptr, \n                mysqlpp::Connection con, const char* application);\n</code></pre> <p>Zweck: L\u00e4dt Projekt-Informationen und verbindet mit regionsspezifischer Datenbank.</p> <p>Parameter: - <code>project_id</code>: Projekt-ID aus <code>_project</code> Tabelle - <code>options_ptr</code>: Zeiger auf Options-Objekt - <code>con</code>: MySQL-Verbindung - <code>application</code>: \"worldqual\" oder \"wq_load\"</p> <p>R\u00fcckgabe: - <code>false</code> (0): Erfolg - <code>true</code> (1): Fehler</p> <p>Beispiel: <pre><code>mysqlpp::Connection con(use_exceptions);\nif (!con.connect(\"wq_general\", \"localhost\", \"user\", \"pass\", 3306)) {\n    return 1;\n}\n\nif (getProject(2, &amp;options, con, \"worldqual\")) {\n    cerr &lt;&lt; \"ERROR: Project not found\" &lt;&lt; endl;\n    return 1;\n}\n// Jetzt verbunden mit wwqa_worldqual_[region]\n</code></pre></p>"},{"location":"technical/API/#checkparameter","title":"checkParameter()","text":"<pre><code>bool checkParameter(int parameter_id, int&amp; toCalc, \n                    mysqlpp::String&amp; ParameterName, bool ReadToCalc=true);\n</code></pre> <p>Zweck: Pr\u00fcft ob Parameter existiert und gibt Informationen zur\u00fcck.</p> <p>Parameter: - <code>parameter_id</code>: Parameter-ID (0-4) - <code>toCalc</code>: Referenz f\u00fcr Berechnungstyp (Output) - <code>ParameterName</code>: Referenz f\u00fcr Parametername (Output) - <code>ReadToCalc</code>: Ob toCalc gelesen werden soll</p> <p>R\u00fcckgabe: - <code>false</code> (0): Erfolg - <code>true</code> (1): Fehler</p> <p>toCalc Werte: - 0 = BOD - 1 = Salz - 2 = FC - 3 = TN - 4 = TP</p>"},{"location":"technical/API/#checkidrun","title":"checkIDRun()","text":"<pre><code>short checkIDRun(int IDrun, mysqlpp::String&amp; runName, \n                  int&amp; parameter_id_input, int&amp; parameter_id, \n                  int&amp; parameter_id_load, int&amp; project_id, \n                  int&amp; IDScen, int&amp; IDScen_wq_load, \n                  int&amp; IDTemp, double&amp; Q_low_limit, \n                  short&amp; Q_low_limit_type, short&amp; FlgCons, \n                  short&amp; FlgLake, short&amp; UseWaterTemp);\n</code></pre> <p>Zweck: Pr\u00fcft Run-Konfiguration und gibt alle wichtigen Parameter zur\u00fcck.</p> <p>Parameter: Alle Output-Parameter (Referenzen)</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p>"},{"location":"technical/API/#hydrologische-funktionen","title":"Hydrologische Funktionen","text":""},{"location":"technical/API/#get_outflc","title":"get_outflc()","text":"<pre><code>int get_outflc(int *g_outflc, const optionsClass* options_ptr, \n               const continentStruct* continent_ptr);\n</code></pre> <p>Zweck: Liest Abflusszellen (outflow cells) aus der Datenbank.</p> <p>Parameter: - <code>g_outflc</code>: Array f\u00fcr Abflusszellen-IDs (Output) [ng] - <code>options_ptr</code>: Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p> <p>Verwendung: <pre><code>int *g_outflc = new int[continent.ng];\nif (get_outflc(g_outflc, &amp;options, &amp;continent)) {\n    cerr &lt;&lt; \"ERROR: Could not read outflow cells\" &lt;&lt; endl;\n    return 1;\n}\n// g_outflc[cell] enth\u00e4lt jetzt die Abflusszelle f\u00fcr jede Zelle\n</code></pre></p>"},{"location":"technical/API/#get_inflow","title":"get_inflow()","text":"<pre><code>int get_inflow(int (*inflow)[8], const optionsClass* options_ptr, \n               const continentStruct* continent_ptr);\n</code></pre> <p>Zweck: Liest Zufluss-Informationen (bis zu 8 Zufl\u00fcsse pro Zelle).</p> <p>Parameter: - <code>inflow</code>: 2D-Array f\u00fcr Zufl\u00fcsse [ng][8] (Output) - <code>options_ptr</code>: Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p> <p>Verwendung: <pre><code>int (*inflow)[8] = new int[continent.ng][8];\nif (get_inflow(inflow, &amp;options, &amp;continent)) {\n    return 1;\n}\n// inflow[cell][0..7] enth\u00e4lt Zufluss-Zellen\n</code></pre></p>"},{"location":"technical/API/#get_q","title":"get_Q()","text":"<pre><code>int get_Q(int actual_year, double (*Q_out)[12], int *gcrc, \n          const options_wqClass* options_ptr, \n          const continentStruct* continent_ptr);\n</code></pre> <p>Zweck: Liest monatlichen Abfluss f\u00fcr ein Jahr.</p> <p>Parameter: - <code>actual_year</code>: Jahr - <code>Q_out</code>: 2D-Array f\u00fcr Abfluss [ng][12] (Output) [km\u00b3/month] - <code>gcrc</code>: Array mit Zellen-IDs - <code>options_ptr</code>: WQ-Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p> <p>Verwendung: <pre><code>double (*Q_out)[12] = new double[continent.ng][12];\nif (get_Q(2010, Q_out, gcrc, &amp;options, &amp;continent)) {\n    return 1;\n}\n// Q_out[cell][month-1] enth\u00e4lt Abfluss f\u00fcr jede Zelle, jeden Monat\n</code></pre></p>"},{"location":"technical/API/#get_cell_runoff","title":"get_cell_runoff()","text":"<pre><code>int get_cell_runoff(int actual_year, double (*cell_runoff)[12], \n                    int *gcrc, const options_wqClass* options_ptr, \n                    const continentStruct* continent_ptr);\n</code></pre> <p>Zweck: Liest zellspezifischen Oberfl\u00e4chenabfluss.</p> <p>Parameter: - <code>actual_year</code>: Jahr - <code>cell_runoff</code>: 2D-Array f\u00fcr Abfluss [ng][12] (Output) [mm/month] - <code>gcrc</code>: Array mit Zellen-IDs - <code>options_ptr</code>: WQ-Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p>"},{"location":"technical/API/#wasserqualit\u00e4ts-funktionen","title":"Wasserqualit\u00e4ts-Funktionen","text":""},{"location":"technical/API/#get_factor","title":"get_factor()","text":"<pre><code>int get_factor(int IDrun, double *factor, double *c_geogen, \n               double *factor_lake, int toCalc, \n               const optionsClass* options_ptr, \n               const continentStruct* continent_ptr);\n</code></pre> <p>Zweck: Liest Faktoren f\u00fcr Wasserqualit\u00e4tsberechnungen.</p> <p>Parameter: - <code>IDrun</code>: Run-ID - <code>factor</code>: Array f\u00fcr Faktoren (Output) [ng] - <code>c_geogen</code>: Array f\u00fcr geogene Konzentrationen (Output) [ng] - <code>factor_lake</code>: Array f\u00fcr See-Faktoren (Output) [ng] - <code>toCalc</code>: Berechnungstyp (0-4) - <code>options_ptr</code>: Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p>"},{"location":"technical/API/#get_s_cell","title":"get_s_cell()","text":"<pre><code>int get_s_cell(int IDScen, int parameter_id, int actual_year, \n               double (*s_cell)[12], const optionsClass* options_ptr, \n               const continentStruct* continent_ptr, \n               short loadingType, int toCalc);\n</code></pre> <p>Zweck: Liest Schadstoff-Eintr\u00e4ge pro Zelle f\u00fcr ein Jahr.</p> <p>Parameter: - <code>IDScen</code>: Szenario-ID - <code>parameter_id</code>: Parameter-ID - <code>actual_year</code>: Jahr - <code>s_cell</code>: 2D-Array f\u00fcr Eintr\u00e4ge [ng][12] (Output) [t/month] - <code>options_ptr</code>: Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur - <code>loadingType</code>: Load-Typ - <code>toCalc</code>: Berechnungstyp</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p>"},{"location":"technical/API/#calculateattenuation","title":"calculateAttenuation()","text":"<pre><code>int calculateAttenuation(double *ke, double *tss_cell, \n                          int IDScen, int parameter_id, int year,\n                          double (*Q_out)[12], int *gcrc, int *grow, \n                          const optionsClass* options_ptr, \n                          const continentStruct* continent_ptr);\n</code></pre> <p>Zweck: Berechnet Abschw\u00e4chungskoeffizienten.</p> <p>Parameter: - <code>ke</code>: Array f\u00fcr Abschw\u00e4chungskoeffizienten (Output) [ng] - <code>tss_cell</code>: Array f\u00fcr TSS-Werte (Output) [ng] - <code>IDScen</code>: Szenario-ID - <code>parameter_id</code>: Parameter-ID - <code>year</code>: Jahr - <code>Q_out</code>: Abfluss-Array - <code>gcrc</code>, <code>grow</code>: Grid-Arrays - <code>options_ptr</code>: Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p>"},{"location":"technical/API/#datei-io-funktionen","title":"Datei-I/O Funktionen","text":""},{"location":"technical/API/#readinputfile","title":"readInputFile()","text":"<pre><code>template &lt;class T&gt;\nint readInputFile(char *input_file, int type_size, \n                  int valuesPerCell, long number_of_cells,\n                  T *G_array, int *gcrc, \n                  const optionsClass* options_ptr, \n                  const continentStruct* continent_ptr, \n                  float nodata=(T)NODATA);\n</code></pre> <p>Zweck: Liest UNF-Dateien (Template-Funktion).</p> <p>Parameter: - <code>input_file</code>: Pfad zur UNF-Datei - <code>type_size</code>: Gr\u00f6\u00dfe des Datentyps (sizeof(T)) - <code>valuesPerCell</code>: Werte pro Zelle (z.B. 12 f\u00fcr monatlich) - <code>number_of_cells</code>: Anzahl Zellen - <code>G_array</code>: Array f\u00fcr Daten (Output) - <code>gcrc</code>: Array mit Zellen-IDs - <code>options_ptr</code>: Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur - <code>nodata</code>: NoData-Wert</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p> <p>Verwendung: <pre><code>double (*Q_out)[12] = new double[continent.ng][12];\nchar filename[] = \"/path/to/G_Q_out_m3_2010.12.UNF0\";\nif (readInputFile(filename, sizeof(double), 12, continent.ng, \n                  Q_out, gcrc, &amp;options, &amp;continent)) {\n    return 1;\n}\n</code></pre></p>"},{"location":"technical/API/#grid-management","title":"Grid-Management","text":""},{"location":"technical/API/#getcells","title":"getCELLS()","text":"<pre><code>int getCELLS(const optionsClass* options_ptr, continentStruct* continent);\n</code></pre> <p>Zweck: L\u00e4dt Grid-Informationen (Anzahl Zellen, Zeilen, Spalten).</p> <p>Parameter: - <code>options_ptr</code>: Options-Objekt - <code>continent</code>: Kontinent-Struktur (Output)</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p> <p>Verwendung: <pre><code>continentStruct continent;\nif (getCELLS(&amp;options, &amp;continent)) {\n    return 1;\n}\n// continent.ng, continent.ng_land, continent.nrows, etc. sind jetzt gef\u00fcllt\n</code></pre></p>"},{"location":"technical/API/#getgcrc","title":"getGCRC()","text":"<pre><code>int getGCRC(int *gcrc, int *grow, const optionsClass* options_ptr, \n            const continentStruct* continent_ptr);\n</code></pre> <p>Zweck: L\u00e4dt Grid-Zell-IDs (gcrc) und Zeilen-Indizes (grow).</p> <p>Parameter: - <code>gcrc</code>: Array f\u00fcr Zellen-IDs (Output) [ng] - <code>grow</code>: Array f\u00fcr Zeilen-Indizes (Output) [ng] - <code>options_ptr</code>: Options-Objekt - <code>continent_ptr</code>: Kontinent-Struktur</p> <p>R\u00fcckgabe: - <code>0</code>: Erfolg - <code>1</code>: Fehler</p>"},{"location":"technical/API/#options-api","title":"options API","text":""},{"location":"technical/API/#optionsclass---basisklasse","title":"optionsClass - Basisklasse","text":"<pre><code>class optionsClass {\npublic:\n    optionsClass(int optionc, char* optionv[], const char* CL);\n    virtual ~optionsClass();\n\n    int IDVersion;\n    int IDReg;\n    char continent_abb[10];\n    char* MyHost;\n    char* MyUser;\n    char* MyPassword;\n    short InputType;\n    char* input_dir;\n\nprotected:\n    virtual void Help(int num = 1) = 0;\n    short init(int optionc, char* optionv[]);\n    void read_parentOptions(int num, FILE *file_ptr);\n};\n</code></pre> <p>Verwendung: <pre><code>optionsClass* options = new options_wqClass(argc, argv, \"IDrun startYear endYear\");\nif (options-&gt;init(argc-1, &amp;argv[1])) {\n    return 1;\n}\n</code></pre></p>"},{"location":"technical/API/#classwq_load-api","title":"ClassWQ_load API","text":""},{"location":"technical/API/#konstruktor","title":"Konstruktor","text":"<pre><code>ClassWQ_load(options_wq_loadClass* options_ptr, int year);\n</code></pre> <p>Zweck: Berechnet Eintr\u00e4ge f\u00fcr ein Jahr beim Erstellen.</p> <p>Parameter: - <code>options_ptr</code>: WQ-Load Options-Objekt - <code>year</code>: Berechnungsjahr</p> <p>Verwendung: <pre><code>options_wq_loadClass options(...);\nClassWQ_load wq_load(&amp;options, 2010);\n// Eintr\u00e4ge werden automatisch berechnet\n</code></pre></p>"},{"location":"technical/API/#wichtige-member-variablen","title":"Wichtige Member-Variablen","text":"<pre><code>class ClassWQ_load {\n    int toCalc;              // Berechnungstyp (0-4)\n    int year;                // Jahr\n    continentStruct continent; // Grid-Informationen\n    COUNTRY_CLASS* countries; // L\u00e4nderinformationen\n    CROP_CLASS* crops;       // Kulturpflanzen\n    LS_CLASS* LS;            // Landnutzung\n    GB_CLASS* GB;            // Viehhaltung\n    // ... viele weitere Member\n};\n</code></pre>"},{"location":"technical/API/#datenstrukturen","title":"Datenstrukturen","text":""},{"location":"technical/API/#continentstruct","title":"continentStruct","text":"<pre><code>struct continentStruct {\n    int ng;              // Anzahl aller Zellen\n    int ng_land;         // Anzahl Landzellen\n    int nrows;           // Anzahl Zeilen\n    int ncols;           // Anzahl Spalten\n    int cellFraction;    // Zellfraktion\n    char hydro_input[maxcharlength]; // Pfad zu WaterGAP-Daten\n};\n</code></pre>"},{"location":"technical/API/#loadstruct","title":"loadStruct","text":"<pre><code>struct loadStruct {\n    bool loadType[loadTypes];  // Welche Load-Typen werden ben\u00f6tigt?\n    char loadTab[loadTypes][maxcharlength]; // Tabellennamen\n    char loadTabAlias[loadTypes][loadTypes]; // SQL-Aliase\n    char loadTabLongName[loadTypes][maxcharlength]; // Beschreibungen\n};\n\nvoid fillLoadStruct(loadStruct *loadStruct_ptr, int toCalc);\n</code></pre> <p>Verwendung: <pre><code>loadStruct load;\nfillLoadStruct(&amp;load, 2);  // F\u00fcr FC (toCalc=2)\n// load.loadType[] zeigt welche Tabellen ben\u00f6tigt werden\n</code></pre></p> <p>Weitere Informationen: - Architektur - Wie alles zusammenpasst - Entwicklungsumgebung - Wie entwickelt man?</p>"},{"location":"technical/ARCHITECTURE/","title":"WorldQual - Architektur und Code-Struktur","text":"<p>Diese Dokumentation erkl\u00e4rt die technische Architektur von WorldQual f\u00fcr Entwickler.</p>"},{"location":"technical/ARCHITECTURE/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>\u00dcbersicht</li> <li>Modulare Architektur</li> <li>Kern-Komponenten</li> <li>Datenfluss</li> <li>Klassen-Hierarchie</li> <li>Datenstrukturen</li> <li>Abh\u00e4ngigkeiten</li> </ul>"},{"location":"technical/ARCHITECTURE/#\u00fcbersicht","title":"\u00dcbersicht","text":"<p>WorldQual ist ein modulares C++-System zur Simulation der Wasserqualit\u00e4t in Fl\u00fcssen. Die Architektur folgt dem Prinzip:</p> <ul> <li>Modulare Programme: Jedes Modul ist ein eigenst\u00e4ndiges ausf\u00fchrbares Programm</li> <li>Gemeinsame Bibliotheken: <code>general_function</code> und <code>options</code> werden von allen Modulen genutzt</li> <li>Datenbank-zentriert: MySQL als zentrale Datenspeicherung</li> <li>Grid-basiert: Berechnungen auf 0.5\u00b0 x 0.5\u00b0 Grid-Zellen</li> </ul>"},{"location":"technical/ARCHITECTURE/#modulare-architektur","title":"Modulare Architektur","text":""},{"location":"technical/ARCHITECTURE/#architektur-prinzipien","title":"Architektur-Prinzipien","text":"<ol> <li>Separation of Concerns: Jedes Modul hat eine spezifische Aufgabe</li> <li>Shared Libraries: Gemeinsame Funktionalit\u00e4t in <code>general_function</code> und <code>options</code></li> <li>Datenbank als Interface: Module kommunizieren \u00fcber die Datenbank</li> <li>Konfiguration \u00fcber Dateien: Jedes Modul hat eine <code>OPTIONS.DAT</code></li> </ol>"},{"location":"technical/ARCHITECTURE/#modul-typen","title":"Modul-Typen","text":""},{"location":"technical/ARCHITECTURE/#1-core-module-kern-funktionalit\u00e4t","title":"1. Core-Module (Kern-Funktionalit\u00e4t)","text":"<p>worldqual (<code>src/worldqual/</code>) - Zweck: Hauptsimulation der Wasserqualit\u00e4t - Input: Eintr\u00e4ge (aus wq_load), hydrologische Daten - Output: Konzentrationen in Datenbank - Hauptdateien: <code>WorldQual.cpp</code>, <code>options_wq.h/cpp</code></p> <p>wq_load (<code>src/wq_load/</code>) - Zweck: Berechnung von Schadstoffeintr\u00e4gen - Input: Bev\u00f6lkerungsdaten, Landnutzung, etc. - Output: Eintragsdaten in Datenbank - Hauptdateien: <code>wq_load.cpp</code>, <code>ClassWQload.h/cpp</code></p>"},{"location":"technical/ARCHITECTURE/#2-input-module-datenvorbereitung","title":"2. Input-Module (Datenvorbereitung)","text":"<p>fill_worldqual_load (<code>src/fill_worldqual_load/</code>) - Bef\u00fcllt Datenbanktabellen mit Eintragsdaten - Nutzt <code>ClassWQ_load</code> aus <code>wq_load</code></p> <p>water_temperature (<code>src/water_temperature/</code>) - Berechnet Wassertemperatur aus Lufttemperatur - Nutzt Newton-Verfahren f\u00fcr Kurvenanpassung</p> <p>rtf_input, rtf_input_corr_factor (<code>src/rtf_input*/</code>) - Verarbeitet Return-to-Flow Daten f\u00fcr Bew\u00e4sserung</p>"},{"location":"technical/ARCHITECTURE/#3-analyse-module-auswertung","title":"3. Analyse-Module (Auswertung)","text":"<p>wq_stat, wq_stat_stations, wq_stat_scen (<code>src/wq_stat*/</code>) - Statistische Analysen und Validierung - Vergleich mit Messungen</p> <p>MapRiverQuality (<code>src/MapRiverQuality/</code>) - Kartierung und Klassifizierung der Ergebnisse</p>"},{"location":"technical/ARCHITECTURE/#4-utility-module-hilfsprogramme","title":"4. Utility-Module (Hilfsprogramme)","text":"<p>create_scenarios (<code>src/create_scenarios/</code>) - Erstellt neue Szenarien basierend auf Referenzszenarien</p> <p>find_river_cells (<code>src/find_river_cells/</code>) - Identifiziert Flusszellen</p> <p>copy_run, copy_scen (<code>src/copy_*/</code>) - Verwaltung von Runs und Szenarien</p>"},{"location":"technical/ARCHITECTURE/#5-shared-libraries-gemeinsame-funktionen","title":"5. Shared Libraries (Gemeinsame Funktionen)","text":"<p>general_function (<code>src/general_function/</code>) - Zweck: Zentrale Funktionen f\u00fcr alle Module - Inhalt:   - Datenbankzugriff   - Datei-I/O (UNF-Format)   - Hydrologische Berechnungen   - Grid-Management - Hauptdateien: <code>general_functions.h/cpp</code>, <code>country.h/cpp</code>, <code>timestring.h/cpp</code></p> <p>options (<code>src/options/</code>) - Zweck: Konfigurationsverwaltung - Inhalt:   - Parsing von <code>OPTIONS.DAT</code>   - Command-Line-Optionen   - Basis-Klasse <code>optionsClass</code> - Hauptdateien: <code>options.h/cpp</code>, <code>options_scen.h/cpp</code></p> <p>newton (<code>src/newton/</code>) - Zweck: Numerische Kurvenanpassung - Verwendung: Von <code>water_temperature</code> genutzt - Hauptdateien: <code>Newton.h/cpp</code></p>"},{"location":"technical/ARCHITECTURE/#kern-komponenten","title":"Kern-Komponenten","text":""},{"location":"technical/ARCHITECTURE/#1-optionsclass---konfigurations-basisklasse","title":"1. optionsClass - Konfigurations-Basisklasse","text":"<p>Lage: <code>src/options/options.h</code></p> <p>Zweck: Basisklasse f\u00fcr alle Options-Klassen</p> <p>Wichtige Member: <pre><code>class optionsClass {\n    int IDVersion;          // WaterGAP Version (2 oder 3)\n    int IDReg;              // Region (1-6)\n    char continent_abb[10]; // Kontinent-Abk\u00fcrzung\n    char* MyHost;           // MySQL Host\n    char* MyUser;           // MySQL User\n    char* MyPassword;       // MySQL Passwort\n    short InputType;        // 0=Datenbank, 1=UNF-Dateien\n    char* input_dir;        // Pfad zu Input-Dateien\n};\n</code></pre></p> <p>Verwendung: Alle Module haben eine spezialisierte Options-Klasse: - <code>options_wqClass</code> (worldqual) - <code>options_wq_loadClass</code> (wq_load) - <code>options_waterTempClass</code> (water_temperature) - etc.</p>"},{"location":"technical/ARCHITECTURE/#2-general_functions---zentrale-funktionen","title":"2. general_functions - Zentrale Funktionen","text":"<p>Lage: <code>src/general_function/general_functions.h</code></p> <p>Kategorien von Funktionen:</p>"},{"location":"technical/ARCHITECTURE/#datenbankzugriff","title":"Datenbankzugriff","text":"<ul> <li><code>getProject()</code> - Projekt-Informationen laden</li> <li><code>checkParameter()</code> - Parameter pr\u00fcfen</li> <li><code>checkIDRun()</code> - Run-Konfiguration pr\u00fcfen</li> </ul>"},{"location":"technical/ARCHITECTURE/#hydrologische-funktionen","title":"Hydrologische Funktionen","text":"<ul> <li><code>get_outflc()</code> - Abflusszellen lesen</li> <li><code>get_inflow()</code> - Zufl\u00fcsse lesen</li> <li><code>get_Q()</code> - Abfluss lesen</li> <li><code>get_cell_runoff()</code> - Oberfl\u00e4chenabfluss lesen</li> <li><code>get_flowVelocity()</code> - Flie\u00dfgeschwindigkeit berechnen</li> </ul>"},{"location":"technical/ARCHITECTURE/#wasserqualit\u00e4ts-funktionen","title":"Wasserqualit\u00e4ts-Funktionen","text":"<ul> <li><code>get_factor()</code> - Faktoren f\u00fcr Berechnungen</li> <li><code>get_s_cell()</code> - Schadstoff-Eintr\u00e4ge pro Zelle</li> <li><code>calculateAttenuation()</code> - Abschw\u00e4chung berechnen</li> <li><code>getDecayRates()</code> - Abbau-Raten</li> </ul>"},{"location":"technical/ARCHITECTURE/#datei-io","title":"Datei-I/O","text":"<ul> <li><code>readInputFile()</code> - UNF-Dateien lesen</li> <li><code>readUnf()</code> - Template-Funktion f\u00fcr UNF-Format</li> <li><code>readArea()</code> - Fl\u00e4chen-Daten lesen</li> </ul>"},{"location":"technical/ARCHITECTURE/#grid-management","title":"Grid-Management","text":"<ul> <li><code>getCELLS()</code> - Grid-Informationen laden</li> <li><code>getGCRC()</code> - Grid-Zell-IDs laden</li> <li><code>getArcID()</code> - Arc-ID Konvertierung</li> </ul>"},{"location":"technical/ARCHITECTURE/#3-classwq_load---belastungsberechnung","title":"3. ClassWQ_load - Belastungsberechnung","text":"<p>Lage: <code>src/wq_load/ClassWQload.h</code></p> <p>Zweck: Berechnet Schadstoffeintr\u00e4ge aus verschiedenen Quellen</p> <p>Wichtige Methoden: <pre><code>class ClassWQ_load {\n    // Konstruktor berechnet Eintr\u00e4ge f\u00fcr ein Jahr\n    ClassWQ_load(options_wq_loadClass* options_ptr, int year);\n\n    // Berechnet verschiedene Eintragstypen\n    void calculatePointSources();      // Punktuelle Quellen\n    void calculateDiffuseSources();   // Diffuse Quellen\n    void calculateGeogenic();         // Geogene Quellen\n    void calculateAtmospheric();      // Atmosph\u00e4rische Deposition\n};\n</code></pre></p> <p>Hilfsklassen: - <code>COUNTRY_CLASS</code> - L\u00e4nderinformationen - <code>CROP_CLASS</code> - Kulturpflanzen-Daten - <code>LS_CLASS</code> - Landnutzung - <code>GB_CLASS</code> - Viehhaltung</p>"},{"location":"technical/ARCHITECTURE/#4-continentstruct---grid-informationen","title":"4. continentStruct - Grid-Informationen","text":"<p>Lage: <code>src/general_function/general_functions.h</code></p> <p>Zweck: Speichert Grid-Dimensionen und -Informationen</p> <pre><code>struct continentStruct {\n    int ng;              // Anzahl aller Zellen\n    int ng_land;         // Anzahl Landzellen\n    int nrows;           // Anzahl Zeilen\n    int ncols;           // Anzahl Spalten\n    int cellFraction;    // Zellfraktion\n    char hydro_input[maxcharlength]; // Pfad zu WaterGAP-Daten\n};\n</code></pre> <p>Verwendung: Wird an fast alle Funktionen \u00fcbergeben, um Grid-Dimensionen zu kennen.</p>"},{"location":"technical/ARCHITECTURE/#datenfluss","title":"Datenfluss","text":""},{"location":"technical/ARCHITECTURE/#typischer-workflow","title":"Typischer Workflow","text":"<pre><code>1. Input-Daten (WaterGAP, Bev\u00f6lkerungsdaten, etc.)\n   \u2193\n2. fill_worldqual_load\n   \u2192 Berechnet Eintr\u00e4ge\n   \u2192 Speichert in Datenbank: wwqa_wq_load_[region].calc_cell_month_load_*\n   \u2193\n3. water_temperature (optional)\n   \u2192 Berechnet Wassertemperatur\n   \u2192 Speichert in Datenbank\n   \u2193\n4. worldqual\n   \u2192 Liest Eintr\u00e4ge aus Datenbank\n   \u2192 Liest hydrologische Daten (Q_out, Runoff)\n   \u2192 Simuliert Transport und Abbau\n   \u2192 Speichert Konzentrationen: wwqa_worldqual_[region].concentration\n   \u2193\n5. wq_stat_stations\n   \u2192 Liest Konzentrationen\n   \u2192 Vergleicht mit Messungen\n   \u2192 Erstellt Statistik-Dateien\n   \u2193\n6. R-Skripte\n   \u2192 Lesen Statistik-Dateien\n   \u2192 Erstellen Diagramme\n</code></pre>"},{"location":"technical/ARCHITECTURE/#datenbank-als-kommunikationsschnittstelle","title":"Datenbank als Kommunikationsschnittstelle","text":"<p>Module kommunizieren nicht direkt, sondern \u00fcber die Datenbank:</p> <ul> <li>wq_load schreibt \u2192 worldqual liest</li> <li>worldqual schreibt \u2192 wq_stat liest</li> <li>wq_stat schreibt \u2192 R-Skripte lesen</li> </ul> <p>Vorteile: - Lose Kopplung zwischen Modulen - Module k\u00f6nnen unabh\u00e4ngig entwickelt werden - Ergebnisse bleiben persistent</p> <p>Nachteile: - Datenbank muss immer verf\u00fcgbar sein - Potenzielle Performance-Probleme bei gro\u00dfen Datenmengen</p>"},{"location":"technical/ARCHITECTURE/#klassen-hierarchie","title":"Klassen-Hierarchie","text":""},{"location":"technical/ARCHITECTURE/#options-klassen","title":"Options-Klassen","text":"<pre><code>optionsClass (Basisklasse)\n\u251c\u2500\u2500 options_wqClass (worldqual)\n\u251c\u2500\u2500 options_wq_loadClass (wq_load)\n\u251c\u2500\u2500 options_waterTempClass (water_temperature)\n\u251c\u2500\u2500 options_wqstatClass (wq_stat)\n\u251c\u2500\u2500 options_mapRiverQualityClass (MapRiverQuality)\n\u2514\u2500\u2500 ... (weitere spezialisierte Klassen)\n</code></pre>"},{"location":"technical/ARCHITECTURE/#load-klassen","title":"Load-Klassen","text":"<pre><code>ClassWQ_load (Hauptklasse)\n\u251c\u2500\u2500 COUNTRY_CLASS (L\u00e4nderinformationen)\n\u251c\u2500\u2500 CROP_CLASS (Kulturpflanzen)\n\u251c\u2500\u2500 LS_CLASS (Landnutzung)\n\u2514\u2500\u2500 GB_CLASS (Viehhaltung)\n</code></pre>"},{"location":"technical/ARCHITECTURE/#datenstrukturen","title":"Datenstrukturen","text":""},{"location":"technical/ARCHITECTURE/#wichtige-strukturen","title":"Wichtige Strukturen","text":""},{"location":"technical/ARCHITECTURE/#continentstruct","title":"continentStruct","text":"<p>Siehe oben - Grid-Informationen</p>"},{"location":"technical/ARCHITECTURE/#loadstruct","title":"loadStruct","text":"<pre><code>struct loadStruct {\n    bool loadType[loadTypes];           // Welche Load-Typen werden ben\u00f6tigt?\n    char loadTab[loadTypes][maxcharlength]; // Tabellennamen\n    char loadTabAlias[loadTypes][loadTypes]; // SQL-Aliase\n    char loadTabLongName[loadTypes][maxcharlength]; // Beschreibungen\n};\n</code></pre> <p>Zweck: Verwaltet welche Eintragstabellen f\u00fcr einen Parameter ben\u00f6tigt werden.</p>"},{"location":"technical/ARCHITECTURE/#substance","title":"Substance","text":"<pre><code>struct Substance {\n    int IDrun;\n    int date;\n    int cell;\n    double Value;\n};\n</code></pre> <p>Zweck: Speichert eine einzelne Konzentration (f\u00fcr Routing-Berechnungen).</p>"},{"location":"technical/ARCHITECTURE/#abh\u00e4ngigkeiten","title":"Abh\u00e4ngigkeiten","text":""},{"location":"technical/ARCHITECTURE/#kompilierungs-abh\u00e4ngigkeiten","title":"Kompilierungs-Abh\u00e4ngigkeiten","text":"<pre><code>general_function (muss zuerst kompiliert werden)\n  \u2193\noptions (muss zuerst kompiliert werden)\n  \u2193\nnewton (wird von water_temperature ben\u00f6tigt)\n  \u2193\nAlle anderen Module (k\u00f6nnen parallel kompiliert werden)\n</code></pre>"},{"location":"technical/ARCHITECTURE/#laufzeit-abh\u00e4ngigkeiten","title":"Laufzeit-Abh\u00e4ngigkeiten","text":"<pre><code>fill_worldqual_load \u2192 worldqual\n  (muss vorher ausgef\u00fchrt werden)\n\nwater_temperature \u2192 worldqual\n  (optional, aber empfohlen)\n\nworldqual \u2192 wq_stat_*\n  (muss vorher ausgef\u00fchrt werden)\n\nwq_stat_* \u2192 R-Skripte\n  (muss vorher ausgef\u00fchrt werden)\n</code></pre>"},{"location":"technical/ARCHITECTURE/#bibliotheks-abh\u00e4ngigkeiten","title":"Bibliotheks-Abh\u00e4ngigkeiten","text":"<p>MySQL++ (<code>libmysqlpp</code>) - F\u00fcr alle Module - Datenbankzugriff</p> <p>MySQL Client (<code>libmysqlclient</code>) - F\u00fcr alle Module - Low-level MySQL-Zugriff</p> <p>Standard C++ Library - <code>&lt;vector&gt;</code>, <code>&lt;string&gt;</code>, <code>&lt;iostream&gt;</code>, etc.</p> <p>Math Library (<code>libm</code>) - Mathematische Funktionen</p>"},{"location":"technical/ARCHITECTURE/#design-entscheidungen","title":"Design-Entscheidungen","text":""},{"location":"technical/ARCHITECTURE/#warum-modulare-programme-statt-einer-gro\u00dfen-anwendung","title":"Warum modulare Programme statt einer gro\u00dfen Anwendung?","text":"<ol> <li>Flexibilit\u00e4t: Module k\u00f6nnen unabh\u00e4ngig aktualisiert werden</li> <li>Wartbarkeit: Klare Trennung der Verantwortlichkeiten</li> <li>Testbarkeit: Module k\u00f6nnen einzeln getestet werden</li> <li>Parallele Entwicklung: Verschiedene Entwickler k\u00f6nnen an verschiedenen Modulen arbeiten</li> </ol>"},{"location":"technical/ARCHITECTURE/#warum-datenbank-statt-direkter-kommunikation","title":"Warum Datenbank statt direkter Kommunikation?","text":"<ol> <li>Persistenz: Ergebnisse bleiben erhalten</li> <li>Flexibilit\u00e4t: Module k\u00f6nnen in beliebiger Reihenfolge ausgef\u00fchrt werden</li> <li>Debugging: Daten k\u00f6nnen direkt in der Datenbank gepr\u00fcft werden</li> <li>Skalierbarkeit: Module k\u00f6nnen auf verschiedenen Rechnern laufen</li> </ol>"},{"location":"technical/ARCHITECTURE/#warum-makefiles-statt-cmakeautotools","title":"Warum Makefiles statt CMake/autotools?","text":"<ol> <li>Einfachheit: Jedes Modul hat sein eigenes Makefile</li> <li>Kontrolle: Entwickler haben volle Kontrolle \u00fcber Kompilierung</li> <li>Tradition: Projekt ist alt, Makefiles waren Standard</li> </ol> <p>Nachteil: Pfade m\u00fcssen manuell angepasst werden.</p>"},{"location":"technical/ARCHITECTURE/#erweiterungspunkte","title":"Erweiterungspunkte","text":""},{"location":"technical/ARCHITECTURE/#wo-kann-man-neue-funktionalit\u00e4t-hinzuf\u00fcgen","title":"Wo kann man neue Funktionalit\u00e4t hinzuf\u00fcgen?","text":"<ol> <li>Neue Module: Erstellen Sie ein neues Verzeichnis mit eigenem Makefile</li> <li>Neue Funktionen in general_function: F\u00fcgen Sie Funktionen zu <code>general_functions.h/cpp</code> hinzu</li> <li>Neue Options-Klassen: Erben Sie von <code>optionsClass</code></li> <li>Neue Load-Typen: Erweitern Sie <code>loadStruct</code> und <code>fillLoadStruct()</code></li> </ol>"},{"location":"technical/ARCHITECTURE/#wichtige-dateien-f\u00fcr-erweiterungen","title":"Wichtige Dateien f\u00fcr Erweiterungen","text":"<ul> <li><code>src/general_function/general_functions.h</code> - Neue gemeinsame Funktionen</li> <li><code>src/options/options.h</code> - Basis-Options-Klasse</li> <li><code>src/wq_load/ClassWQload.h</code> - Belastungsberechnung erweitern</li> </ul> <p>Weitere Informationen: - Entwicklungsumgebung - Wie entwickelt man? - Code-Standards - Wie codet man? - API-Referenz - Wichtige Funktionen</p>"},{"location":"technical/BUILD_SYSTEM/","title":"WorldQual - Build-System","text":"<p>Detaillierte Dokumentation des Build-Systems und der Makefiles.</p>"},{"location":"technical/BUILD_SYSTEM/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>Makefile-Struktur</li> <li>Kompilierungsprozess</li> <li>Abh\u00e4ngigkeiten</li> <li>Pfad-Konfiguration</li> <li>Troubleshooting</li> </ul>"},{"location":"technical/BUILD_SYSTEM/#makefile-struktur","title":"Makefile-Struktur","text":""},{"location":"technical/BUILD_SYSTEM/#standard-makefile-template","title":"Standard-Makefile-Template","text":"<p>Jedes Modul folgt diesem Muster:</p> <pre><code># ============================================================================\n# Compiler und Flags\n# ============================================================================\nCC         = g++ -Wall -Wno-unused-but-set-variable\nMAKE       = make -f makefile\nAPPNAME    = modulname\nOBJECTS    = modulname.o \\\n             ../general_function/timestring.o \\\n             ../general_function/general_functions.o \\\n             ../options/options.o\nCCOPTS     = -c\nOPTIMIZE   = -O3\n#DEBUG      = -g  # F\u00fcr Debugging aktivieren\n\n# ============================================================================\n# Include- und Library-Pfade\n# ============================================================================\nINCDIROPTS = -L/usr/local/lib/libmysqlpp.so \\\n             -L/usr/lib64/mysql \\\n             -I/usr/include/mysql \\\n             -I/usr/local/include/mysql++ \\\n             -I../general_function \\\n             -I../options\n\nLNKLIB     = -lmysqlpp -lmysqlclient\n\n# ============================================================================\n# Build-Regeln\n# ============================================================================\n$(APPNAME): $(OBJECTS)\n    $(CC) $(INCDIROPTS) $(LNKOPTS) -o $(APPNAME) $(OBJECTS) $(LNKLIB)\n\n.cpp.o:\n    $(CC) -c $(INCDIROPTS) $(DEBUG) -o $*.o $*.cpp\n\nall: clean\n    @$(MAKE) $(APPNAME)\n    echo all: make complete\n\nclean:\n    rm -f $(OBJECTS) $(APPNAME) *~ *% core a.out\n</code></pre>"},{"location":"technical/BUILD_SYSTEM/#variablen-erkl\u00e4rt","title":"Variablen erkl\u00e4rt","text":"<p>CC: Compiler und Flags - <code>g++</code>: GNU C++ Compiler - <code>-Wall</code>: Alle Warnungen aktivieren - <code>-Wno-unused-but-set-variable</code>: Spezifische Warnung deaktivieren</p> <p>OPTIMIZE: Optimierungs-Level - <code>-O3</code>: Maximale Optimierung (f\u00fcr Produktion) - <code>-O0</code>: Keine Optimierung (f\u00fcr Debugging) - <code>-O2</code>: Standard-Optimierung</p> <p>DEBUG: Debug-Flags - <code>-g</code>: Debug-Informationen generieren - Aktivieren f\u00fcr Debugging mit gdb</p> <p>INCDIROPTS: Include- und Library-Pfade - <code>-L</code>: Library-Pfade (wo <code>.so</code> Dateien sind) - <code>-I</code>: Include-Pfade (wo <code>.h</code> Dateien sind)</p> <p>LNKLIB: Zu linkende Bibliotheken - <code>-lmysqlpp</code>: MySQL++ Bibliothek - <code>-lmysqlclient</code>: MySQL Client Bibliothek</p>"},{"location":"technical/BUILD_SYSTEM/#kompilierungsprozess","title":"Kompilierungsprozess","text":""},{"location":"technical/BUILD_SYSTEM/#schritt-f\u00fcr-schritt","title":"Schritt-f\u00fcr-Schritt","text":"<p>1. Preprocessing <pre><code># C++ Preprocessor verarbeitet #include, #define, etc.\ncpp source.cpp -o source.i\n</code></pre></p> <p>2. Compilation <pre><code># Compiler erstellt Objektdateien (.o)\ng++ -c source.cpp -o source.o\n</code></pre></p> <p>3. Linking <pre><code># Linker verbindet Objektdateien und Bibliotheken\ng++ source.o -o executable -lmysqlpp -lmysqlclient\n</code></pre></p>"},{"location":"technical/BUILD_SYSTEM/#make-targets","title":"Make-Targets","text":"<p>all: <pre><code>make all\n# F\u00fchrt clean aus, dann kompiliert\n</code></pre></p> <p>clean: <pre><code>make clean\n# L\u00f6scht Objektdateien und ausf\u00fchrbare Dateien\n</code></pre></p> <p>Spezifisches Target: <pre><code>make worldqual\n# Kompiliert nur worldqual (ohne clean)\n</code></pre></p>"},{"location":"technical/BUILD_SYSTEM/#abh\u00e4ngigkeiten","title":"Abh\u00e4ngigkeiten","text":""},{"location":"technical/BUILD_SYSTEM/#kompilierungs-abh\u00e4ngigkeiten","title":"Kompilierungs-Abh\u00e4ngigkeiten","text":"<p>Reihenfolge ist wichtig:</p> <pre><code>1. general_function\n   \u2193 (wird ben\u00f6tigt von)\n2. options\n   \u2193 (beide werden ben\u00f6tigt von)\n3. newton (optional, f\u00fcr water_temperature)\n   \u2193\n4. Alle anderen Module\n</code></pre> <p>Warum diese Reihenfolge?</p> <ul> <li><code>general_function</code> hat keine Abh\u00e4ngigkeiten zu anderen Modulen</li> <li><code>options</code> nutzt <code>general_function</code></li> <li>Alle anderen Module nutzen beide</li> </ul>"},{"location":"technical/BUILD_SYSTEM/#laufzeit-abh\u00e4ngigkeiten","title":"Laufzeit-Abh\u00e4ngigkeiten","text":"<p>Datenbank-Abh\u00e4ngigkeiten:</p> <pre><code>fill_worldqual_load \u2192 worldqual\n  (muss Daten in Datenbank schreiben, bevor worldqual sie liest)\n\nwater_temperature \u2192 worldqual\n  (optional, aber empfohlen)\n\nworldqual \u2192 wq_stat_*\n  (muss Ergebnisse in Datenbank schreiben)\n</code></pre>"},{"location":"technical/BUILD_SYSTEM/#pfad-konfiguration","title":"Pfad-Konfiguration","text":""},{"location":"technical/BUILD_SYSTEM/#problem-unterschiedliche-systeme","title":"Problem: Unterschiedliche Systeme","text":"<p>MySQL++ kann auf verschiedenen Systemen unterschiedlich installiert sein:</p> <p>Linux (Standard): - Headers: <code>/usr/include/mysql++</code> - Libraries: <code>/usr/lib/libmysqlpp.so</code></p> <p>Linux (Custom): - Headers: <code>/usr/local/include/mysql++</code> - Libraries: <code>/usr/local/lib/libmysqlpp.so</code></p> <p>macOS (Homebrew): - Headers: <code>/usr/local/include/mysql++</code> - Libraries: <code>/usr/local/lib/libmysqlpp.so</code></p> <p>macOS (MacPorts): - Headers: <code>/opt/local/include/mysql++</code> - Libraries: <code>/opt/local/lib/libmysqlpp.so</code></p>"},{"location":"technical/BUILD_SYSTEM/#l\u00f6sung-pfade-finden","title":"L\u00f6sung: Pfade finden","text":"<p>Automatisch finden: <pre><code># Header-Dateien\nfind /usr /usr/local /opt -name \"mysql++.h\" 2&gt;/dev/null\n\n# Bibliotheken\nfind /usr /usr/local /opt -name \"libmysqlpp.so\" 2&gt;/dev/null\nfind /usr /usr/local /opt -name \"libmysqlpp.dylib\" 2&gt;/dev/null  # macOS\n</code></pre></p> <p>Manuell in Makefile anpassen:</p> <pre><code># F\u00fcr Linux Standard\nINCDIROPTS = -L/usr/lib -I/usr/include/mysql -I/usr/include/mysql++ ...\n\n# F\u00fcr macOS Homebrew\nINCDIROPTS = -L/usr/local/lib -I/usr/include/mysql -I/usr/local/include/mysql++ ...\n</code></pre>"},{"location":"technical/BUILD_SYSTEM/#zentrale-konfiguration-empfohlen","title":"Zentrale Konfiguration (empfohlen)","text":"<p>Erstellen Sie <code>config.mk</code> im Root:</p> <pre><code># config.mk - Zentrale Build-Konfiguration\n\n# MySQL++ Pfade (anpassen je nach System)\nMYSQLPP_INCLUDE = /usr/local/include/mysql++\nMYSQLPP_LIB = /usr/local/lib\nMYSQL_INCLUDE = /usr/include/mysql\nMYSQL_LIB = /usr/lib64/mysql\n\n# Compiler-Flags\nCXX = g++\nCXXFLAGS = -Wall -Wno-unused-but-set-variable -O3\nDEBUG_FLAGS = -g\n\n# Standard-Includes\nSTD_INCLUDES = -I../general_function -I../options\n\n# Standard-Libraries\nSTD_LIBS = -lmysqlpp -lmysqlclient\n</code></pre> <p>In Makefiles einbinden:</p> <pre><code>include ../../config.mk\n\nINCDIROPTS = -L$(MYSQLPP_LIB) -L$(MYSQL_LIB) \\\n             -I$(MYSQL_INCLUDE) -I$(MYSQLPP_INCLUDE) \\\n             $(STD_INCLUDES)\n\nLNKLIB = $(STD_LIBS)\n\nCC = $(CXX) $(CXXFLAGS)\n</code></pre>"},{"location":"technical/BUILD_SYSTEM/#troubleshooting","title":"Troubleshooting","text":""},{"location":"technical/BUILD_SYSTEM/#fehler-mysqlh-no-such-file-or-directory","title":"Fehler: \"mysql++.h: No such file or directory\"","text":"<p>Problem: Header-Datei nicht gefunden.</p> <p>L\u00f6sung: 1. MySQL++ installiert?    <pre><code># Linux\ndpkg -l | grep mysql++\n# oder\nrpm -qa | grep mysql++\n\n# macOS\nbrew list | grep mysql++\n</code></pre></p> <ol> <li>Pfad in Makefile anpassen:    <pre><code># Aktuell (falsch):\n-I/usr/include/mysql++\n\n# Anpassen zu (richtig):\n-I/usr/local/include/mysql++\n</code></pre></li> </ol>"},{"location":"technical/BUILD_SYSTEM/#fehler-cannot-find--lmysqlpp","title":"Fehler: \"cannot find -lmysqlpp\"","text":"<p>Problem: Bibliothek nicht gefunden.</p> <p>L\u00f6sung: 1. Bibliothek existiert?    <pre><code>find /usr /usr/local -name \"libmysqlpp.so*\"\n</code></pre></p> <ol> <li> <p>Pfad in Makefile anpassen:    <pre><code># Aktuell (falsch):\n-L/usr/lib\n\n# Anpassen zu (richtig):\n-L/usr/local/lib\n</code></pre></p> </li> <li> <p>Bibliothek richtig verlinkt?    <pre><code>LNKLIB = -lmysqlpp -lmysqlclient\n# Reihenfolge kann wichtig sein!\n</code></pre></p> </li> </ol>"},{"location":"technical/BUILD_SYSTEM/#fehler-undefined-reference-to-mysqlpp","title":"Fehler: \"undefined reference to mysqlpp::...\"","text":"<p>Problem: Bibliothek wird nicht gelinkt.</p> <p>L\u00f6sung: 1. Bibliothek in LNKLIB?    <pre><code>LNKLIB = -lmysqlpp -lmysqlclient\n</code></pre></p> <ol> <li>Reihenfolge pr\u00fcfen:    <pre><code># Bibliotheken NACH Objektdateien\n$(CC) $(OBJECTS) $(LNKLIB) -o $(APPNAME)\n</code></pre></li> </ol>"},{"location":"technical/BUILD_SYSTEM/#fehler-multiple-definition-of","title":"Fehler: \"multiple definition of...\"","text":"<p>Problem: Funktionen mehrfach definiert.</p> <p>L\u00f6sung: - Funktionen in <code>.cpp</code> Dateien definieren - Nur Deklarationen in <code>.h</code> Dateien - <code>inline</code> f\u00fcr Template-Funktionen</p>"},{"location":"technical/BUILD_SYSTEM/#performance-optimierung","title":"Performance-Optimierung","text":"<p>Optimierungs-Level:</p> <pre><code># F\u00fcr Produktion\nOPTIMIZE = -O3\n\n# F\u00fcr Debugging\nOPTIMIZE = -O0\nDEBUG = -g\n</code></pre> <p>Weitere Flags: <pre><code># Spezifische CPU-Optimierung\nOPTIMIZE = -O3 -march=native\n\n# Link-Time Optimization\nOPTIMIZE = -O3 -flto\n</code></pre></p> <p>Weitere Informationen: - Entwicklungsumgebung - Entwicklungsworkflow - Architektur - Code-Struktur</p>"},{"location":"technical/CODING_STANDARDS/","title":"WorldQual - Code-Standards","text":"<p>Diese Dokumentation definiert die Coding-Standards f\u00fcr WorldQual. Bitte halten Sie sich an diese Standards, wenn Sie Code beitragen.</p>"},{"location":"technical/CODING_STANDARDS/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>Allgemeine Prinzipien</li> <li>Namenskonventionen</li> <li>Code-Formatierung</li> <li>Kommentare und Dokumentation</li> <li>Fehlerbehandlung</li> <li>Memory-Management</li> <li>Datenbankzugriff</li> </ul>"},{"location":"technical/CODING_STANDARDS/#allgemeine-prinzipien","title":"Allgemeine Prinzipien","text":""},{"location":"technical/CODING_STANDARDS/#c-standard","title":"C++ Standard","text":"<ul> <li>C++11 oder h\u00f6her</li> <li>Keine C++14/17 Features ohne Absprache (f\u00fcr Kompatibilit\u00e4t)</li> </ul>"},{"location":"technical/CODING_STANDARDS/#code-qualit\u00e4t","title":"Code-Qualit\u00e4t","text":"<ul> <li>Lesbarkeit vor Optimierung</li> <li>Konsistenz mit bestehendem Code</li> <li>Einfachheit - einfache L\u00f6sungen bevorzugen</li> <li>Dokumentation - Code sollte selbsterkl\u00e4rend sein</li> </ul>"},{"location":"technical/CODING_STANDARDS/#namenskonventionen","title":"Namenskonventionen","text":""},{"location":"technical/CODING_STANDARDS/#klassen","title":"Klassen","text":"<p>Format: <code>PascalCase</code> mit beschreibendem Suffix</p> <p>Beispiele: <pre><code>class optionsClass { ... }\nclass options_wqClass { ... }\nclass ClassWQ_load { ... }\nclass COUNTRY_CLASS { ... }\n</code></pre></p> <p>Konvention: Options-Klassen enden mit <code>Class</code>, Load-Klassen mit <code>_CLASS</code>.</p>"},{"location":"technical/CODING_STANDARDS/#funktionen","title":"Funktionen","text":"<p>Format: <code>snake_case</code> mit Pr\u00e4fix f\u00fcr Kategorien</p> <p>Beispiele: <pre><code>get_outflc()        // get_* f\u00fcr Datenbankzugriff\nget_inflow()        // get_* f\u00fcr Daten lesen\ncalculate_riverLength()  // calculate_* f\u00fcr Berechnungen\ncheckIDRun()        // check* f\u00fcr Validierung\n</code></pre></p> <p>Kategorien: - <code>get_*</code> - Daten lesen (Datenbank, Dateien) - <code>calculate_*</code> - Berechnungen durchf\u00fchren - <code>check*</code> - Validierung/Pr\u00fcfung - <code>fill*</code> - Strukturen bef\u00fcllen - <code>read*</code> - Dateien lesen</p>"},{"location":"technical/CODING_STANDARDS/#variablen","title":"Variablen","text":"<p>Format: <code>snake_case</code> oder <code>camelCase</code> (je nach Kontext)</p> <p>Beispiele: <pre><code>int IDrun;              // IDs: camelCase\nint cell;               // Einfache Variablen: snake_case\ndouble (*Q_out)[12];    // Arrays: snake_case\nchar MyDatabase[255];   // Globale: PascalCase\n</code></pre></p> <p>Konventionen: - IDs: <code>camelCase</code> (IDrun, IDScen, IDTemp) - Lokale Variablen: <code>snake_case</code> - Globale Variablen: <code>PascalCase</code> (MyDatabase, MyHost) - Pointer: <code>*ptr</code> oder <code>ptr_ptr</code> f\u00fcr Zeiger auf Zeiger</p>"},{"location":"technical/CODING_STANDARDS/#konstanten","title":"Konstanten","text":"<p>Format: <code>UPPER_SNAKE_CASE</code></p> <p>Beispiele: <pre><code>const int NODATA = -9999;\nconst int loadTypes = 11;\nconst short maxcharlength = 25500;\n#define BYTESWAP_NECESSARY\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#strukturen","title":"Strukturen","text":"<p>Format: <code>camelCase</code> mit <code>Struct</code> Suffix</p> <p>Beispiele: <pre><code>struct continentStruct { ... }\nstruct loadStruct { ... }\nstruct Substance { ... }  // Ausnahme: kein Suffix\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#code-formatierung","title":"Code-Formatierung","text":""},{"location":"technical/CODING_STANDARDS/#einr\u00fcckung","title":"Einr\u00fcckung","text":"<ul> <li>4 Leerzeichen (keine Tabs)</li> <li>Konsistent mit bestehendem Code</li> </ul>"},{"location":"technical/CODING_STANDARDS/#zeilenl\u00e4nge","title":"Zeilenl\u00e4nge","text":"<ul> <li>Maximal 120 Zeichen (wenn m\u00f6glich)</li> <li>Lange Zeilen umbrechen mit Einr\u00fcckung</li> </ul>"},{"location":"technical/CODING_STANDARDS/#klammern","title":"Klammern","text":"<p>Stil: \u00d6ffnende Klammer auf gleicher Zeile</p> <pre><code>if (condition) {\n    // Code\n}\n\nfor (int i = 0; i &lt; n; i++) {\n    // Code\n}\n\nclass MyClass {\npublic:\n    // Code\n};\n</code></pre>"},{"location":"technical/CODING_STANDARDS/#leerzeilen","title":"Leerzeilen","text":"<ul> <li>Eine Leerzeile zwischen Funktionen</li> <li>Zwei Leerzeilen zwischen Sektionen</li> <li>Keine Leerzeilen innerhalb von Funktionen (au\u00dfer f\u00fcr Lesbarkeit)</li> </ul>"},{"location":"technical/CODING_STANDARDS/#includes","title":"Includes","text":"<p>Reihenfolge: 1. System-Header (<code>&lt;stdio.h&gt;</code>, <code>&lt;vector&gt;</code>, etc.) 2. MySQL++ Header (<code>&lt;mysql++.h&gt;</code>, <code>&lt;ssqls.h&gt;</code>) 3. Lokale Header (<code>\"general_functions.h\"</code>, etc.)</p> <p>Beispiel: <pre><code>#include &lt;stdio.h&gt;\n#include &lt;mysql++.h&gt;\n#include &lt;ssqls.h&gt;\n#include &lt;vector&gt;\n#include \"../general_function/general_functions.h\"\n#include \"options_wq.h\"\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#kommentare-und-dokumentation","title":"Kommentare und Dokumentation","text":""},{"location":"technical/CODING_STANDARDS/#doxygen-kommentare","title":"Doxygen-Kommentare","text":"<p>F\u00fcr Funktionen:</p> <pre><code>/**\n * @brief Kurze Beschreibung\n * @param param1 Beschreibung Parameter 1\n * @param param2 Beschreibung Parameter 2\n * @return R\u00fcckgabewert-Beschreibung (0 bei Erfolg, sonst Fehlercode)\n */\nint get_factor(int IDrun, double *factor, double *c_geogen, ...);\n</code></pre> <p>F\u00fcr Klassen:</p> <pre><code>/**\n * @class ClassWQ_load\n * @brief Hauptklasse zur Berechnung von Wasserqualit\u00e4ts-Belastungen\n * \n * Detaillierte Beschreibung der Klasse...\n */\nclass ClassWQ_load {\n    // ...\n};\n</code></pre> <p>F\u00fcr Strukturen:</p> <pre><code>/**\n * @struct continentStruct\n * @brief Speichert Kontinentdaten und Grid-Informationen\n */\nstruct continentStruct {\n    int ng;              ///&lt; Anzahl der Zellen\n    int ng_land;         ///&lt; Anzahl der Landzellen\n    // ...\n};\n</code></pre>"},{"location":"technical/CODING_STANDARDS/#inline-kommentare","title":"Inline-Kommentare","text":"<p>Wann kommentieren: - Komplexe Algorithmen - Nicht-offensichtliche Logik - Workarounds oder Hacks - Warum etwas gemacht wird (nicht was)</p> <p>Beispiele:</p> <pre><code>// Gute Kommentare:\n// Byte-Order muss ge\u00e4ndert werden f\u00fcr Big-Endian Systeme\nSimMemorySwap((char*)array, ...);\n\n// Routing-Informationen werden aus WaterGAP \u00fcbernommen\nint outflow = get_outflowCell(cell, &amp;options);\n\n// Schlechte Kommentare:\nint i = 0;  // Setze i auf 0 (offensichtlich!)\n</code></pre>"},{"location":"technical/CODING_STANDARDS/#fehlerbehandlung","title":"Fehlerbehandlung","text":""},{"location":"technical/CODING_STANDARDS/#r\u00fcckgabewerte","title":"R\u00fcckgabewerte","text":"<p>Konvention: - <code>0</code> = Erfolg - <code>1</code> oder <code>&gt;0</code> = Fehler - <code>-1</code> oder <code>NODATA</code> = Fehlender Wert</p> <p>Beispiel: <pre><code>int get_factor(int IDrun, double *factor, ...) {\n    // Pr\u00fcfung\n    if (IDrun &lt; 0) {\n        cerr &lt;&lt; \"ERROR: Invalid IDrun\" &lt;&lt; endl;\n        return 1;  // Fehler\n    }\n\n    // Erfolgreich\n    return 0;\n}\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#fehlerausgaben","title":"Fehlerausgaben","text":"<p>Konvention: - <code>cout</code> f\u00fcr normale Status-Ausgaben - <code>cerr</code> f\u00fcr Fehler und Warnungen</p> <p>Beispiel: <pre><code>cout &lt;&lt; \"Program started...\" &lt;&lt; endl;\ncout &lt;&lt; \"Processing year \" &lt;&lt; year &lt;&lt; endl;\n\nif (error) {\n    cerr &lt;&lt; \"ERROR: Something went wrong\" &lt;&lt; endl;\n    return 1;\n}\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#exception-handling","title":"Exception-Handling","text":"<p>Aktuell: Keine Exceptions verwendet (C-Stil)</p> <p>F\u00fcr neue Code: K\u00f6nnen Exceptions verwendet werden, aber konsistent bleiben.</p>"},{"location":"technical/CODING_STANDARDS/#memory-management","title":"Memory-Management","text":""},{"location":"technical/CODING_STANDARDS/#dynamische-speicherallokation","title":"Dynamische Speicherallokation","text":"<p>Konvention: <code>new</code>/<code>delete</code> (kein <code>malloc</code>/<code>free</code>)</p> <p>Beispiel: <pre><code>// Allokation\ndouble *array = new double[size];\nif (!array) {\n    cerr &lt;&lt; \"ERROR: Memory allocation failed\" &lt;&lt; endl;\n    return 1;\n}\n\n// Verwendung\n// ...\n\n// Freigabe\ndelete[] array;\narray = NULL;  // Gute Praxis\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#2d-arrays","title":"2D-Arrays","text":"<p>Konvention: Array von Arrays</p> <pre><code>// Allokation\ndouble (*Q_out)[12] = new double[continent.ng][12];\nif (!Q_out) {\n    cerr &lt;&lt; \"ERROR: Memory allocation failed\" &lt;&lt; endl;\n    exit(1);\n}\n\n// Verwendung\nQ_out[cell][month] = value;\n\n// Freigabe\ndelete[] Q_out;\nQ_out = NULL;\n</code></pre>"},{"location":"technical/CODING_STANDARDS/#memory-leaks-vermeiden","title":"Memory-Leaks vermeiden","text":"<p>Regeln: - Jedes <code>new</code> braucht ein <code>delete</code> - Bei Fehler-Return: Speicher freigeben - Pointer auf <code>NULL</code> setzen nach <code>delete</code></p> <p>Beispiel: <pre><code>double *data = new double[size];\nif (function_fails()) {\n    delete[] data;  // Wichtig!\n    data = NULL;\n    return 1;\n}\n// ... verwenden ...\ndelete[] data;\ndata = NULL;\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#datenbankzugriff","title":"Datenbankzugriff","text":""},{"location":"technical/CODING_STANDARDS/#mysql-verwendung","title":"MySQL++ Verwendung","text":"<p>Konvention: MySQL++ Library verwenden</p> <p>Beispiel: <pre><code>mysqlpp::Connection con(use_exceptions);\nmysqlpp::Query query = con.query();\n\n// Query zusammenbauen\nchar sql[2000];\nint j = sprintf(sql, \"SELECT * FROM table WHERE id=%d\", id);\nquery &lt;&lt; sql;\n\n// Ausf\u00fchren\nmysqlpp::StoreQueryResult res = query.store();\n\n// Ergebnisse verarbeiten\nif (res.empty()) {\n    cerr &lt;&lt; \"ERROR: No results\" &lt;&lt; endl;\n    return 1;\n}\n\nmysqlpp::String value = res.at(0)[\"column\"];\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#sql-injection-vermeiden","title":"SQL-Injection vermeiden","text":"<p>Sicher: <pre><code>// Parameterisiert (MySQL++ macht das automatisch)\nquery &lt;&lt; \"SELECT * FROM table WHERE id=\" &lt;&lt; id;\n</code></pre></p> <p>Unsicher (vermeiden): <pre><code>// NIEMALS so:\nsprintf(sql, \"SELECT * FROM table WHERE name='%s'\", user_input);\n// Kann SQL-Injection erm\u00f6glichen!\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#query-debugging","title":"Query-Debugging","text":"<p>Aktivieren: <pre><code>#define DEBUG_queries\n</code></pre></p> <p>Ausgabe: <pre><code>#ifdef DEBUG_queries\n    cout &lt;&lt; \"SQL: \" &lt;&lt; sql &lt;&lt; endl;\n#endif\n</code></pre></p>"},{"location":"technical/CODING_STANDARDS/#code-beispiele","title":"Code-Beispiele","text":""},{"location":"technical/CODING_STANDARDS/#gute-praxis","title":"Gute Praxis","text":"<pre><code>/**\n * @brief Berechnet Abfluss f\u00fcr eine Zelle\n * @param cell Zellen-ID\n * @param year Jahr\n * @param Q_out Zeiger auf Abfluss-Array (Output)\n * @param options_ptr Zeiger auf Options-Objekt\n * @return 0 bei Erfolg, 1 bei Fehler\n */\nint get_Q_for_cell(int cell, int year, double *Q_out, \n                    const optionsClass* options_ptr) {\n    // Validierung\n    if (cell &lt; 0 || year &lt; 1900) {\n        cerr &lt;&lt; \"ERROR: Invalid parameters\" &lt;&lt; endl;\n        return 1;\n    }\n\n    // Berechnung\n    *Q_out = calculate_flow(cell, year);\n\n    // Pr\u00fcfung\n    if (*Q_out &lt; 0) {\n        cerr &lt;&lt; \"ERROR: Negative flow calculated\" &lt;&lt; endl;\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"technical/CODING_STANDARDS/#schlechte-praxis-vermeiden","title":"Schlechte Praxis (vermeiden)","text":"<pre><code>// Keine Kommentare\n// Keine Validierung\n// Keine Fehlerbehandlung\nint f(int c, int y, double *q) {\n    *q = c * y;  // Was macht das?\n    return 0;    // Immer Erfolg?\n}\n</code></pre>"},{"location":"technical/CODING_STANDARDS/#code-review-checkliste","title":"Code-Review Checkliste","text":"<p>Vor dem Commit pr\u00fcfen:</p> <ul> <li>[ ] Code kompiliert ohne Warnungen</li> <li>[ ] Namenskonventionen eingehalten</li> <li>[ ] Kommentare vorhanden (Doxygen)</li> <li>[ ] Fehlerbehandlung implementiert</li> <li>[ ] Memory-Leaks vermieden</li> <li>[ ] Konsistent mit bestehendem Code</li> <li>[ ] Keine Magic Numbers (Konstanten verwenden)</li> <li>[ ] Keine Debug-Code-Reste (<code>cout &lt;&lt; \"test\"</code>)</li> </ul> <p>Weitere Informationen: - Entwicklungsumgebung - Wie entwickelt man? - Architektur - Code-Struktur verstehen</p>"},{"location":"technical/CONTRIBUTING/","title":"Contributing zu WorldQual","text":"<p>Vielen Dank f\u00fcr Ihr Interesse, zu WorldQual beizutragen! Diese Anleitung erkl\u00e4rt, wie Sie Beitr\u00e4ge leisten k\u00f6nnen.</p>"},{"location":"technical/CONTRIBUTING/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>Wie kann ich beitragen?</li> <li>Entwicklungsworkflow</li> <li>Pull Request Prozess</li> <li>Code-Standards</li> <li>Dokumentation</li> </ul>"},{"location":"technical/CONTRIBUTING/#wie-kann-ich-beitragen","title":"Wie kann ich beitragen?","text":""},{"location":"technical/CONTRIBUTING/#arten-von-beitr\u00e4gen","title":"Arten von Beitr\u00e4gen","text":"<ol> <li>Bugfixes - Fehler beheben</li> <li>Features - Neue Funktionalit\u00e4t hinzuf\u00fcgen</li> <li>Dokumentation - Dokumentation verbessern</li> <li>Code-Refactoring - Code verbessern</li> <li>Tests - Tests hinzuf\u00fcgen</li> <li>Performance - Performance optimieren</li> </ol>"},{"location":"technical/CONTRIBUTING/#erste-schritte","title":"Erste Schritte","text":"<ol> <li>Repository forken (falls Sie kein Collaborator sind)</li> <li> <p>Repository klonen <pre><code>git clone https://github.com/Leon-Muehlenbruch/WorldQual.git\ncd WorldQual\n</code></pre></p> </li> <li> <p>Entwicklungsumgebung einrichten</p> </li> <li> <p>Siehe DEVELOPMENT.md</p> </li> <li> <p>Bestehenden Code verstehen</p> </li> <li>Siehe ARCHITECTURE.md</li> </ol>"},{"location":"technical/CONTRIBUTING/#entwicklungsworkflow","title":"Entwicklungsworkflow","text":""},{"location":"technical/CONTRIBUTING/#1-issue-erstellen-empfohlen","title":"1. Issue erstellen (empfohlen)","text":"<p>Bevor Sie Code schreiben: 1. Pr\u00fcfen Sie, ob bereits ein Issue existiert 2. Falls nicht, erstellen Sie ein Issue mit:    - Beschreibung des Problems/Features    - Erwartetes Verhalten    - Vorschlag zur L\u00f6sung (optional)</p>"},{"location":"technical/CONTRIBUTING/#2-branch-erstellen","title":"2. Branch erstellen","text":"<pre><code># Von main aus\ngit checkout main\ngit pull origin main\n\n# Neuen Branch erstellen\ngit checkout -b feature/meine-funktion\n# oder\ngit checkout -b bugfix/bug-beschreibung\n# oder\ngit checkout -b docs/verbesserung\n</code></pre> <p>Branch-Namen: - <code>feature/*</code> - Neue Features - <code>bugfix/*</code> - Bugfixes - <code>docs/*</code> - Dokumentation - <code>refactor/*</code> - Refactoring - <code>test/*</code> - Tests</p>"},{"location":"technical/CONTRIBUTING/#3-code-entwickeln","title":"3. Code entwickeln","text":"<ul> <li>Code-Standards beachten (siehe CODING_STANDARDS.md)</li> <li>Kommentare hinzuf\u00fcgen</li> <li>Testen Sie Ihren Code</li> </ul>"},{"location":"technical/CONTRIBUTING/#4-commits-erstellen","title":"4. Commits erstellen","text":"<p>Commit-Messages:</p> <p>Verwenden Sie konventionelle Commits: <pre><code>feat: Neue Funktion f\u00fcr X hinzugef\u00fcgt\nfix: Bug in get_factor behoben\ndocs: README aktualisiert\nrefactor: Code in get_Q umstrukturiert\ntest: Tests f\u00fcr general_functions hinzugef\u00fcgt\nperf: Performance von calculate_riverLength verbessert\n</code></pre></p> <p>Beispiele: <pre><code>git add src/general_function/general_functions.cpp\ngit commit -m \"feat: Neue Funktion get_new_function hinzugef\u00fcgt\"\n\ngit add README.md\ngit commit -m \"docs: Installation-Anleitung erweitert\"\n</code></pre></p>"},{"location":"technical/CONTRIBUTING/#5-push-und-pull-request","title":"5. Push und Pull Request","text":"<pre><code>git push origin feature/meine-funktion\n</code></pre> <p>Dann auf GitHub Pull Request erstellen.</p>"},{"location":"technical/CONTRIBUTING/#pull-request-prozess","title":"Pull Request Prozess","text":""},{"location":"technical/CONTRIBUTING/#pull-request-erstellen","title":"Pull Request erstellen","text":"<ol> <li>Auf GitHub gehen</li> <li>Repository \u00f6ffnen</li> <li>\"Pull Request\" klicken</li> <li> <p>Branch ausw\u00e4hlen</p> </li> <li> <p>Beschreibung ausf\u00fcllen</p> </li> </ol> <p>Template: <pre><code>## Beschreibung\nKurze Beschreibung der \u00c4nderungen\n\n## Art der \u00c4nderung\n- [ ] Bugfix\n- [ ] Neues Feature\n- [ ] Dokumentation\n- [ ] Refactoring\n\n## \u00c4nderungen\n- Was wurde ge\u00e4ndert?\n- Warum wurde es ge\u00e4ndert?\n\n## Testing\n- Wie wurde getestet?\n- Welche Tests wurden durchgef\u00fchrt?\n\n## Checkliste\n- [ ] Code kompiliert ohne Warnungen\n- [ ] Code-Standards eingehalten\n- [ ] Kommentare hinzugef\u00fcgt\n- [ ] Dokumentation aktualisiert\n- [ ] Tests bestehen (falls vorhanden)\n</code></pre></p>"},{"location":"technical/CONTRIBUTING/#code-review","title":"Code-Review","text":"<p>Was wird gepr\u00fcft: - Code-Qualit\u00e4t - Einhaltung der Standards - Funktionalit\u00e4t - Dokumentation - Tests</p> <p>Nach Review: - \u00c4nderungen anfordern (falls n\u00f6tig) - Approve - Merge</p>"},{"location":"technical/CONTRIBUTING/#nach-dem-merge","title":"Nach dem Merge","text":"<ul> <li>Branch kann gel\u00f6scht werden</li> <li>\u00c4nderungen sind in <code>main</code></li> </ul>"},{"location":"technical/CONTRIBUTING/#code-standards","title":"Code-Standards","text":"<p>Siehe CODING_STANDARDS.md f\u00fcr Details.</p> <p>Kurzfassung: - C++11 Standard - Konsistente Namenskonventionen - Doxygen-Kommentare - Fehlerbehandlung - Memory-Management korrekt</p>"},{"location":"technical/CONTRIBUTING/#dokumentation","title":"Dokumentation","text":""},{"location":"technical/CONTRIBUTING/#code-dokumentieren","title":"Code dokumentieren","text":"<p>Doxygen-Kommentare: <pre><code>/**\n * @brief Kurze Beschreibung\n * @param param Beschreibung\n * @return R\u00fcckgabewert\n */\nint function(int param);\n</code></pre></p>"},{"location":"technical/CONTRIBUTING/#benutzer-dokumentation-aktualisieren","title":"Benutzer-Dokumentation aktualisieren","text":"<p>Wenn Sie Funktionalit\u00e4t \u00e4ndern/hinzuf\u00fcgen:</p> <ol> <li>README.md aktualisieren (falls relevant)</li> <li>DOCUMENTATION.md aktualisieren (falls relevant)</li> <li>QUICK_REFERENCE.md aktualisieren (falls relevant)</li> </ol>"},{"location":"technical/CONTRIBUTING/#technische-dokumentation-aktualisieren","title":"Technische Dokumentation aktualisieren","text":"<p>Wenn Sie Architektur \u00e4ndern:</p> <ol> <li>docs/technical/ARCHITECTURE.md aktualisieren</li> <li>docs/technical/API.md aktualisieren (falls API ge\u00e4ndert)</li> </ol>"},{"location":"technical/CONTRIBUTING/#h\u00e4ufige-szenarien","title":"H\u00e4ufige Szenarien","text":""},{"location":"technical/CONTRIBUTING/#bugfix","title":"Bugfix","text":"<pre><code># 1. Issue erstellen (falls nicht vorhanden)\n# 2. Branch erstellen\ngit checkout -b bugfix/segfault-in-get-factor\n\n# 3. Bug fixen\n# Code \u00e4ndern...\n\n# 4. Testen\nmake clean &amp;&amp; make all\n./worldqual test_parameter\n\n# 5. Commit\ngit add .\ngit commit -m \"fix: Segmentation fault in get_factor behoben\"\n\n# 6. Push und PR\ngit push origin bugfix/segfault-in-get-factor\n</code></pre>"},{"location":"technical/CONTRIBUTING/#neues-feature","title":"Neues Feature","text":"<pre><code># 1. Issue erstellen\n# 2. Branch erstellen\ngit checkout -b feature/neue-berechnung\n\n# 3. Code entwickeln\n# Neue Funktionen hinzuf\u00fcgen...\n\n# 4. Dokumentation aktualisieren\n# README.md, DOCUMENTATION.md aktualisieren\n\n# 5. Testen\nmake clean &amp;&amp; make all\n./programm test\n\n# 6. Commits\ngit add src/\ngit commit -m \"feat: Neue Berechnungsfunktion hinzugef\u00fcgt\"\ngit add README.md DOCUMENTATION.md\ngit commit -m \"docs: Dokumentation f\u00fcr neue Funktion aktualisiert\"\n\n# 7. Push und PR\ngit push origin feature/neue-berechnung\n</code></pre>"},{"location":"technical/CONTRIBUTING/#dokumentation-verbessern","title":"Dokumentation verbessern","text":"<pre><code># 1. Branch erstellen\ngit checkout -b docs/verbesserung\n\n# 2. Dokumentation \u00e4ndern\n# README.md, DOCUMENTATION.md, etc. bearbeiten\n\n# 3. Commit\ngit add .\ngit commit -m \"docs: Installation-Anleitung verbessert\"\n\n# 4. Push und PR\ngit push origin docs/verbesserung\n</code></pre>"},{"location":"technical/CONTRIBUTING/#fragen","title":"Fragen?","text":"<p>Bei Fragen: - Issue erstellen mit Label \"question\" - Code-Kommentare im Pull Request - Diskussion im Pull Request</p> <p>Vielen Dank f\u00fcr Ihre Beitr\u00e4ge!</p>"},{"location":"technical/DATABASE_SCHEMA/","title":"WorldQual - Datenbank-Schema","text":"<p>Detaillierte Dokumentation der Datenbankstruktur f\u00fcr Entwickler.</p>"},{"location":"technical/DATABASE_SCHEMA/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>\u00dcbersicht</li> <li>Hauptdatenbanken</li> <li>Hauptdatenbanken</li> <li>Beziehungen</li> <li>Indizes</li> <li>Wichtige Queries</li> </ul>"},{"location":"technical/DATABASE_SCHEMA/#\u00fcbersicht","title":"\u00dcbersicht","text":"<p>WorldQual verwendet mehrere MySQL-Datenbanken:</p> <ol> <li>wq_general - Zentrale Konfiguration (Projekte, Szenarien, Runs)</li> <li>wwqa_worldqual_[region] - Simulationsergebnisse pro Region</li> <li>wwqa_wq_load_[region] - Eintragsdaten pro Region</li> </ol> <p>Region-Abk\u00fcrzungen: - <code>eu</code> - Europa - <code>af</code> - Afrika - <code>as</code> - Asien - <code>au</code> - Australien - <code>na</code> - Nordamerika - <code>sa</code> - S\u00fcdamerika</p>"},{"location":"technical/DATABASE_SCHEMA/#hauptdatenbanken","title":"Hauptdatenbanken","text":""},{"location":"technical/DATABASE_SCHEMA/#wq_general---konfigurationsdatenbank","title":"wq_general - Konfigurationsdatenbank","text":"<p>Zweck: Zentrale Verwaltung von Projekten, Szenarien, Runs und Parametern.</p> <p>Wichtige Tabellen:</p>"},{"location":"technical/DATABASE_SCHEMA/#_project","title":"_project","text":"<p>Zweck: Verwaltet Projekte (CESR, WWQA, etc.)</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE _project (\n    project_id INT PRIMARY KEY,\n    Project_Name VARCHAR(255),\n    database_name VARCHAR(255),  -- Optional: Projekt-spezifische DB\n    description TEXT\n);\n</code></pre></p> <p>Typische Daten: <pre><code>INSERT INTO _project VALUES \n(1, 'CESR', '', 'Climate and Environment System Research'),\n(2, 'WWQA', '', 'World Water Quality Assessment'),\n(3, 'CESR Sensitivity Analysis', '', 'Sensitivity Analysis'),\n(4, 'test', '', 'Test-Projekt');\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#_szenario","title":"_szenario","text":"<p>Zweck: Verwaltet Szenarien (Baseline, verschiedene Zukunftsszenarien)</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE _szenario (\n    IDScen INT PRIMARY KEY,\n    ScenName VARCHAR(255),\n    description TEXT,\n    project_id INT,\n    FOREIGN KEY (project_id) REFERENCES _project(project_id)\n);\n</code></pre></p> <p>Typische Daten: <pre><code>INSERT INTO _szenario VALUES \n(91, 'Baseline 2010', 'Baseline-Szenario f\u00fcr 2010', 2),\n(92, 'Szenario A', 'Beschreibung...', 2);\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#_parameter","title":"_parameter","text":"<p>Zweck: Verwaltet Wasserqualit\u00e4tsparameter</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE _parameter (\n    parameter_id INT PRIMARY KEY,\n    ParameterName VARCHAR(255),\n    description TEXT,\n    unit VARCHAR(50)\n);\n</code></pre></p> <p>Typische Daten: <pre><code>INSERT INTO _parameter VALUES \n(0, 'BOD', 'Biochemischer Sauerstoffbedarf', 'mg/l'),\n(1, 'TDS', 'Total Dissolved Solids (Salz)', 'mg/l'),\n(2, 'FC', 'F\u00e4kalcoliforme Bakterien', 'cfu/100ml'),\n(3, 'TN', 'Gesamtstickstoff', 'mg/l'),\n(4, 'TP', 'Gesamtphosphor', 'mg/l');\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#_runlist","title":"_runlist","text":"<p>Zweck: Verwaltet Run-Konfigurationen (Verbindet Parameter, Szenario, etc.)</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE _runlist (\n    IDrun INT PRIMARY KEY,\n    runName VARCHAR(255),\n    parameter_id INT,\n    IDScen INT,\n    IDScen_wq_load INT,  -- Szenario f\u00fcr Eintr\u00e4ge\n    IDTemp INT,           -- Wassertemperatur-Konfiguration\n    project_id INT,\n    Q_low_limit DOUBLE,  -- Untere Abfluss-Grenze\n    Q_low_limit_type INT, -- Typ der Grenze\n    conservative INT,     -- 1=konservativer Stoff, 0=nicht-konservativ\n    lake INT,            -- 1=mit See-Abbau, 0=ohne\n    UseWaterTemp INT,    -- 1=Wassertemperatur verwenden\n    FOREIGN KEY (parameter_id) REFERENCES _parameter(parameter_id),\n    FOREIGN KEY (IDScen) REFERENCES _szenario(IDScen),\n    FOREIGN KEY (project_id) REFERENCES _project(project_id)\n);\n</code></pre></p> <p>IDrun-Struktur: Die IDrun setzt sich zusammen aus: - Parameter-ID (1-2 Stellen) - Szenario-ID (2-3 Stellen) - Weitere Konfigurationen</p> <p>Beispiel: <code>403100091</code> - <code>4</code> = Parameter (kann variieren) - <code>03</code> = WaterGAP Version 3 - <code>100</code> = Weitere Konfiguration - <code>091</code> = Szenario 91</p>"},{"location":"technical/DATABASE_SCHEMA/#_water_temperature_list","title":"_water_temperature_list","text":"<p>Zweck: Verwaltet Wassertemperatur-Konfigurationen</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE _water_temperature_list (\n    IDTemp INT PRIMARY KEY,\n    Name VARCHAR(255),\n    climate VARCHAR(255),  -- Klima-Datenquelle\n    comment TEXT,\n    C0 DOUBLE,  -- Konstante f\u00fcr Kurve\n    C1 DOUBLE,\n    C2 DOUBLE\n);\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#watergap_region","title":"watergap_region","text":"<p>Zweck: Verwaltet Region-Konfigurationen</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE watergap_region (\n    IDVersion INT,\n    IDRegion INT,\n    hydro_input VARCHAR(255),  -- Pfad zu WaterGAP-Daten\n    PRIMARY KEY (IDVersion, IDRegion)\n);\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#wwqa_worldqual_region---ergebnisse","title":"wwqa_worldqual_[region] - Ergebnisse","text":"<p>Zweck: Speichert Simulationsergebnisse (Konzentrationen)</p> <p>Wichtige Tabellen:</p>"},{"location":"technical/DATABASE_SCHEMA/#concentration","title":"concentration","text":"<p>Zweck: Speichert monatliche Konzentrationen pro Grid-Zelle</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE concentration (\n    IDrun INT,\n    cell INT,\n    year INT,\n    month INT,  -- 1-12\n    concentration DOUBLE,\n    PRIMARY KEY (IDrun, cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year),\n    INDEX idx_idrun (IDrun)\n);\n</code></pre></p> <p>Datenformat: - <code>IDrun</code>: Run-ID - <code>cell</code>: Grid-Zellen-ID (ArcID) - <code>year</code>: Jahr - <code>month</code>: Monat (1=Januar, ..., 12=Dezember) - <code>concentration</code>: Konzentration [Einheit je nach Parameter]</p>"},{"location":"technical/DATABASE_SCHEMA/#wwqa_wq_load_region---eintragsdaten","title":"wwqa_wq_load_[region] - Eintragsdaten","text":"<p>Zweck: Speichert berechnete Eintragsdaten</p> <p>Wichtige Tabellen:</p>"},{"location":"technical/DATABASE_SCHEMA/#calc_cell_month_load_","title":"calc_cell_month_load_*","text":"<p>Zweck: Berechnete monatliche Eintr\u00e4ge nach Quelle</p> <p>Tabellen-Namen: - <code>calc_cell_month_load_man_ww</code> - Industrieabwasser - <code>calc_cell_month_load_dom_ww</code> - Haushaltsabwasser - <code>calc_cell_month_load_rtf_irr</code> - Bew\u00e4sserungs-R\u00fcckfluss - <code>calc_cell_month_load_ls</code> - Viehhaltung - <code>calc_cell_month_load_crop</code> - Landwirtschaft - etc.</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE calc_cell_month_load_man_ww (\n    cell INT,\n    year INT,\n    month INT,  -- 1-12\n    load DOUBLE,  -- Eintrag [t/month] oder [cfu/month]\n    PRIMARY KEY (cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year)\n);\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#cell_input","title":"cell_input","text":"<p>Zweck: Zell-spezifische Input-Daten</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE cell_input (\n    cell INT,\n    IDScen INT,\n    year INT,\n    -- Weitere Spalten je nach Parameter\n    PRIMARY KEY (cell, IDScen, year)\n);\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#country_parameter_input","title":"country_parameter_input","text":"<p>Zweck: L\u00e4nder-spezifische Parameter</p> <p>Struktur (Beispiel): <pre><code>CREATE TABLE country_parameter_input (\n    country_id INT,\n    IDScen INT,\n    year INT,\n    parameter_id INT,\n    -- Weitere Spalten je nach Parameter\n    PRIMARY KEY (country_id, IDScen, year, parameter_id)\n);\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#beziehungen","title":"Beziehungen","text":""},{"location":"technical/DATABASE_SCHEMA/#entity-relationship-vereinfacht","title":"Entity-Relationship (vereinfacht)","text":"<pre><code>_project (1) \u2500\u2500&lt; (N) _szenario\n_szenario (1) \u2500\u2500&lt; (N) _runlist\n_parameter (1) \u2500\u2500&lt; (N) _runlist\n_runlist (1) \u2500\u2500&lt; (N) concentration\n_runlist (1) \u2500\u2500&lt; (N) calc_cell_month_load_*\n</code></pre>"},{"location":"technical/DATABASE_SCHEMA/#wichtige-foreign-keys","title":"Wichtige Foreign Keys","text":"<ul> <li><code>_szenario.project_id</code> \u2192 <code>_project.project_id</code></li> <li><code>_runlist.parameter_id</code> \u2192 <code>_parameter.parameter_id</code></li> <li><code>_runlist.IDScen</code> \u2192 <code>_szenario.IDScen</code></li> <li><code>concentration.IDrun</code> \u2192 <code>_runlist.IDrun</code></li> </ul>"},{"location":"technical/DATABASE_SCHEMA/#indizes","title":"Indizes","text":""},{"location":"technical/DATABASE_SCHEMA/#performance-kritische-indizes","title":"Performance-kritische Indizes","text":"<p>concentration Tabelle: <pre><code>CREATE INDEX idx_idrun ON concentration(IDrun);\nCREATE INDEX idx_cell ON concentration(cell);\nCREATE INDEX idx_year ON concentration(year);\nCREATE INDEX idx_idrun_year ON concentration(IDrun, year);\n</code></pre></p> <p>calc_cell_month_load_* Tabellen: <pre><code>CREATE INDEX idx_cell ON calc_cell_month_load_man_ww(cell);\nCREATE INDEX idx_year ON calc_cell_month_load_man_ww(year);\nCREATE INDEX idx_cell_year ON calc_cell_month_load_man_ww(cell, year);\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#wichtige-queries","title":"Wichtige Queries","text":""},{"location":"technical/DATABASE_SCHEMA/#run-informationen-holen","title":"Run-Informationen holen","text":"<pre><code>SELECT \n    r.IDrun,\n    r.runName,\n    p.ParameterName,\n    s.ScenName,\n    r.IDTemp,\n    r.conservative,\n    r.lake\nFROM wq_general._runlist r\nJOIN wq_general._parameter p ON r.parameter_id = p.parameter_id\nJOIN wq_general._szenario s ON r.IDScen = s.IDScen\nWHERE r.IDrun = 403100091;\n</code></pre>"},{"location":"technical/DATABASE_SCHEMA/#konzentrationen-abfragen","title":"Konzentrationen abfragen","text":"<pre><code>-- Alle Konzentrationen f\u00fcr einen Run\nSELECT cell, year, month, concentration\nFROM wwqa_worldqual_af.concentration\nWHERE IDrun = 403100091\nORDER BY cell, year, month;\n\n-- Durchschnittliche Konzentration pro Monat\nSELECT month, AVG(concentration) as avg_conc\nFROM wwqa_worldqual_af.concentration\nWHERE IDrun = 403100091 AND year = 2010\nGROUP BY month;\n\n-- Konzentrationen f\u00fcr bestimmte Zellen\nSELECT cell, year, month, concentration\nFROM wwqa_worldqual_af.concentration\nWHERE IDrun = 403100091 \n  AND cell IN (12345, 12346, 12347)\nORDER BY year, month;\n</code></pre>"},{"location":"technical/DATABASE_SCHEMA/#eintr\u00e4ge-abfragen","title":"Eintr\u00e4ge abfragen","text":"<pre><code>-- Eintr\u00e4ge f\u00fcr eine Zelle\nSELECT year, month, load\nFROM wwqa_wq_load_af.calc_cell_month_load_man_ww\nWHERE cell = 12345\nORDER BY year, month;\n\n-- Summe aller Eintr\u00e4ge pro Jahr\nSELECT year, SUM(load) as total_load\nFROM wwqa_wq_load_af.calc_cell_month_load_man_ww\nWHERE year = 2010\nGROUP BY year;\n</code></pre>"},{"location":"technical/DATABASE_SCHEMA/#datenbank-statistiken","title":"Datenbank-Statistiken","text":"<pre><code>-- Anzahl Zellen mit Daten\nSELECT COUNT(DISTINCT cell) as num_cells\nFROM wwqa_worldqual_af.concentration\nWHERE IDrun = 403100091;\n\n-- Jahre mit Daten\nSELECT DISTINCT year\nFROM wwqa_worldqual_af.concentration\nWHERE IDrun = 403100091\nORDER BY year;\n\n-- Gr\u00f6\u00dfe der Tabellen\nSELECT \n    table_name,\n    ROUND(((data_length + index_length) / 1024 / 1024), 2) AS size_mb\nFROM information_schema.TABLES\nWHERE table_schema = 'wwqa_worldqual_af'\nORDER BY size_mb DESC;\n</code></pre>"},{"location":"technical/DATABASE_SCHEMA/#schema-erstellung","title":"Schema-Erstellung","text":""},{"location":"technical/DATABASE_SCHEMA/#vollst\u00e4ndiges-schema-erstellen","title":"Vollst\u00e4ndiges Schema erstellen","text":"<p>Wichtig: Das vollst\u00e4ndige Schema ist komplex und sollte von einem bestehenden System exportiert werden.</p> <p>Export: <pre><code>mysqldump -u username -p --no-data wq_general &gt; schema_wq_general.sql\nmysqldump -u username -p --no-data wwqa_worldqual_af &gt; schema_worldqual_af.sql\nmysqldump -u username -p --no-data wwqa_wq_load_af &gt; schema_wq_load_af.sql\n</code></pre></p> <p>Import: <pre><code>mysql -u username -p &lt; schema_wq_general.sql\nmysql -u username -p &lt; schema_worldqual_af.sql\nmysql -u username -p &lt; schema_wq_load_af.sql\n</code></pre></p>"},{"location":"technical/DATABASE_SCHEMA/#tabellenstruktur-pr\u00fcfen","title":"Tabellenstruktur pr\u00fcfen","text":"<pre><code>-- Alle Tabellen anzeigen\nSHOW TABLES;\n\n-- Struktur einer Tabelle\nDESCRIBE concentration;\n-- oder\nSHOW CREATE TABLE concentration;\n\n-- Alle Spalten einer Tabelle\nSELECT COLUMN_NAME, DATA_TYPE, IS_NULLABLE\nFROM INFORMATION_SCHEMA.COLUMNS\nWHERE TABLE_SCHEMA = 'wwqa_worldqual_af' \n  AND TABLE_NAME = 'concentration';\n</code></pre>"},{"location":"technical/DATABASE_SCHEMA/#migrationen","title":"Migrationen","text":""},{"location":"technical/DATABASE_SCHEMA/#schema-\u00e4nderungen","title":"Schema-\u00c4nderungen","text":"<p>Vorgehen: 1. Backup erstellen 2. Migration-Skript erstellen 3. Testen auf Test-Datenbank 4. Auf Produktion anwenden</p> <p>Beispiel-Migration: <pre><code>-- Neue Spalte hinzuf\u00fcgen\nALTER TABLE concentration \nADD COLUMN quality_class INT AFTER concentration;\n\n-- Index hinzuf\u00fcgen\nCREATE INDEX idx_quality ON concentration(quality_class);\n</code></pre></p> <p>Weitere Informationen: - API-Referenz - Funktionen die Datenbank nutzen - Architektur - Wie Datenbank genutzt wird</p>"},{"location":"technical/DEVELOPMENT/","title":"WorldQual - Entwicklungsumgebung","text":"<p>Diese Dokumentation erkl\u00e4rt, wie Sie eine Entwicklungsumgebung f\u00fcr WorldQual einrichten und wie Sie Code entwickeln, testen und debuggen.</p>"},{"location":"technical/DEVELOPMENT/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>Entwicklungsumgebung einrichten</li> <li>Build-System verstehen</li> <li>Code entwickeln</li> <li>Debugging</li> <li>Testing</li> <li>Versionierung</li> </ul>"},{"location":"technical/DEVELOPMENT/#entwicklungsumgebung-einrichten","title":"Entwicklungsumgebung einrichten","text":""},{"location":"technical/DEVELOPMENT/#voraussetzungen","title":"Voraussetzungen","text":"<p>Erforderliche Software: - C++ Compiler (g++ oder clang++) mit C++11 Support - MySQL Server (f\u00fcr Entwicklungstests) - MySQL++ Bibliothek - Make - Git (f\u00fcr Versionskontrolle) - Texteditor oder IDE (Vim, Emacs, VS Code, CLion, etc.)</p> <p>Optional aber empfohlen: - Debugger (gdb) - Valgrind (f\u00fcr Memory-Checks) - cppcheck (f\u00fcr statische Code-Analyse)</p>"},{"location":"technical/DEVELOPMENT/#schritt-1-repository-klonen","title":"Schritt 1: Repository klonen","text":"<pre><code>git clone https://github.com/Leon-Muehlenbruch/WorldQual.git\ncd WorldQual\n</code></pre>"},{"location":"technical/DEVELOPMENT/#schritt-2-entwicklungsumgebung-konfigurieren","title":"Schritt 2: Entwicklungsumgebung konfigurieren","text":"<p>IDE einrichten:</p> <p>VS Code: <pre><code># C++ Extension installieren\n# MySQL Extension installieren (optional)\n# Makefile Extension installieren (optional)\n</code></pre></p> <p>CLion: - \u00d6ffnen Sie das Projekt-Verzeichnis - CLion erkennt Makefiles automatisch - CMakeLists.txt erstellen (optional, f\u00fcr bessere IDE-Unterst\u00fctzung)</p> <p>Vim/Emacs: - C++ Syntax-Highlighting ist standardm\u00e4\u00dfig aktiviert - Plugins f\u00fcr Autocomplete (optional)</p>"},{"location":"technical/DEVELOPMENT/#schritt-3-mysql-pfade-konfigurieren","title":"Schritt 3: MySQL++ Pfade konfigurieren","text":"<p>Problem: Makefiles m\u00fcssen wissen, wo MySQL++ installiert ist.</p> <p>L\u00f6sung: Erstellen Sie eine Konfigurationsdatei oder passen Sie Makefiles an.</p> <p>Option A: Makefiles anpassen (aktueller Ansatz)</p> <p>Jedes Makefile hat Zeilen wie: <pre><code>INCDIROPTS = -L/usr/lib/libmysqlpp.so -I/usr/include/mysql -I/usr/include/mysql++\n</code></pre></p> <p>Pfade finden: <pre><code># Header-Dateien\nfind /usr -name \"mysql++.h\" 2&gt;/dev/null\nfind /usr/local -name \"mysql++.h\" 2&gt;/dev/null\n\n# Bibliotheken\nfind /usr -name \"libmysqlpp.so\" 2&gt;/dev/null\nfind /usr/local -name \"libmysqlpp.so\" 2&gt;/dev/null\n</code></pre></p> <p>Option B: Umgebungsvariablen (empfohlen f\u00fcr Entwicklung)</p> <p>Erstellen Sie <code>config.mk</code> im Root: <pre><code># config.mk - Zentrale Konfiguration\nMYSQLPP_INCLUDE = /usr/local/include/mysql++\nMYSQLPP_LIB = /usr/local/lib\nMYSQL_INCLUDE = /usr/include/mysql\nMYSQL_LIB = /usr/lib64/mysql\n</code></pre></p> <p>Dann in Makefiles einbinden: <pre><code>include ../../config.mk\nINCDIROPTS = -L$(MYSQLPP_LIB) -I$(MYSQL_INCLUDE) -I$(MYSQLPP_INCLUDE) ...\n</code></pre></p>"},{"location":"technical/DEVELOPMENT/#schritt-4-test-datenbank-einrichten","title":"Schritt 4: Test-Datenbank einrichten","text":"<p>F\u00fcr Entwicklungstests:</p> <pre><code>-- Test-Datenbank erstellen\nCREATE DATABASE worldqual_dev;\nCREATE USER 'worldqual_dev'@'localhost' IDENTIFIED BY 'dev_password';\nGRANT ALL PRIVILEGES ON worldqual_dev.* TO 'worldqual_dev'@'localhost';\nFLUSH PRIVILEGES;\n\n-- Schema importieren (falls vorhanden)\nmysql -u worldqual_dev -p worldqual_dev &lt; schema.sql\n</code></pre>"},{"location":"technical/DEVELOPMENT/#build-system-verstehen","title":"Build-System verstehen","text":""},{"location":"technical/DEVELOPMENT/#makefile-struktur","title":"Makefile-Struktur","text":"<p>Jedes Modul hat ein eigenes Makefile mit folgender Struktur:</p> <pre><code># Compiler und Flags\nCC = g++ -Wall -Wno-unused-but-set-variable\nOPTIMIZE = -O3\n#DEBUG = -g  # F\u00fcr Debugging aktivieren\n\n# Programmname\nAPPNAME = modulname\n\n# Objektdateien (abh\u00e4ngig von anderen Modulen)\nOBJECTS = modulname.o \\\n          ../general_function/timestring.o \\\n          ../general_function/general_functions.o \\\n          ../options/options.o\n\n# Include- und Library-Pfade\nINCDIROPTS = -L/pfad/lib -I/pfad/include ...\nLNKLIB = -lmysqlpp -lmysqlclient\n\n# Build-Regeln\n$(APPNAME): $(OBJECTS)\n    $(CC) $(INCDIROPTS) -o $(APPNAME) $(OBJECTS) $(LNKLIB)\n\n.cpp.o:\n    $(CC) -c $(INCDIROPTS) $(DEBUG) -o $*.o $*.cpp\n\nall: clean\n    @$(MAKE) $(APPNAME)\n    echo all: make complete\n\nclean:\n    rm -f $(OBJECTS) $(APPNAME)\n</code></pre>"},{"location":"technical/DEVELOPMENT/#kompilierungsreihenfolge","title":"Kompilierungsreihenfolge","text":"<p>Wichtig: Abh\u00e4ngigkeiten beachten!</p> <pre><code># 1. Zuerst gemeinsame Bibliotheken\ncd src/general_function &amp;&amp; make all\ncd ../options &amp;&amp; make all\n\n# 2. Dann Utility-Module\ncd ../newton &amp;&amp; make all\n\n# 3. Dann alle anderen Module (k\u00f6nnen parallel sein)\ncd ../water_temperature &amp;&amp; make all\ncd ../fill_worldqual_load &amp;&amp; make all\ncd ../worldqual &amp;&amp; make all\n# etc.\n</code></pre> <p>Automatisiertes Build-Skript:</p> <p>Erstellen Sie <code>build_all.sh</code>: <pre><code>#!/bin/bash\n# Build-Skript f\u00fcr alle Module\n\nset -e  # Bei Fehler abbrechen\n\nMODULES=(\n    \"general_function\"\n    \"options\"\n    \"newton\"\n    \"water_temperature\"\n    \"fill_worldqual_load\"\n    \"worldqual\"\n    \"wq_stat_stations\"\n    # ... weitere Module\n)\n\nfor module in \"${MODULES[@]}\"; do\n    echo \"Building $module...\"\n    cd \"src/$module\"\n    make clean\n    make all\n    cd ../..\ndone\n\necho \"All modules built successfully!\"\n</code></pre></p>"},{"location":"technical/DEVELOPMENT/#debug-builds","title":"Debug-Builds","text":"<p>Debug-Modus aktivieren:</p> <ol> <li> <p>In Makefile <code>DEBUG</code> aktivieren: <pre><code>DEBUG = -g  # Kommentar entfernen\n</code></pre></p> </li> <li> <p>Kompilieren: <pre><code>make clean\nmake all\n</code></pre></p> </li> <li> <p>Mit Debugger starten: <pre><code>gdb ./worldqual\n(gdb) run 403100091 2010 2010\n(gdb) break main\n(gdb) continue\n</code></pre></p> </li> </ol>"},{"location":"technical/DEVELOPMENT/#code-entwickeln","title":"Code entwickeln","text":""},{"location":"technical/DEVELOPMENT/#workflow-f\u00fcr-neue-features","title":"Workflow f\u00fcr neue Features","text":"<ol> <li> <p>Branch erstellen <pre><code>git checkout -b feature/neue-funktion\n</code></pre></p> </li> <li> <p>Code entwickeln</p> </li> <li>Neue Funktionen in entsprechende Dateien</li> <li>Header-Dateien aktualisieren</li> <li> <p>Kommentare hinzuf\u00fcgen</p> </li> <li> <p>Kompilieren und testen <pre><code>make clean &amp;&amp; make all\n./programm test_parameter\n</code></pre></p> </li> <li> <p>Commit und Push <pre><code>git add .\ngit commit -m \"feat: Neue Funktion hinzugef\u00fcgt\"\ngit push origin feature/neue-funktion\n</code></pre></p> </li> <li> <p>Pull Request erstellen</p> </li> </ol>"},{"location":"technical/DEVELOPMENT/#neue-module-hinzuf\u00fcgen","title":"Neue Module hinzuf\u00fcgen","text":"<p>Schritt 1: Verzeichnis erstellen <pre><code>mkdir src/neues_modul\ncd src/neues_modul\n</code></pre></p> <p>Schritt 2: Makefile erstellen</p> <p>Kopieren Sie ein bestehendes Makefile und passen Sie an: <pre><code>CC = g++ -Wall -Wno-unused-but-set-variable\nMAKE = make -f makefile\nAPPNAME = neues_modul\nOBJECTS = neues_modul.o \\\n          ../general_function/timestring.o \\\n          ../general_function/general_functions.o \\\n          ../options/options.o\n\nINCDIROPTS = -L/usr/local/lib/libmysqlpp.so -I/usr/include/mysql -I/usr/local/include/mysql++ -I../general_function -I../options\nLNKLIB = -lmysqlpp -lmysqlclient\n\n$(APPNAME): $(OBJECTS)\n    $(CC) $(INCDIROPTS) -o $(APPNAME) $(OBJECTS) $(LNKLIB)\n\n.cpp.o:\n    $(CC) -c $(INCDIROPTS) -o $*.o $*.cpp\n\nall: clean\n    @$(MAKE) $(APPNAME)\n    echo all: make complete\n\nclean:\n    rm -f $(OBJECTS) $(APPNAME) *~ *% core a.out\n</code></pre></p> <p>Schritt 3: Options-Klasse erstellen</p> <p>Erstellen Sie <code>options_neues_modul.h</code> und <code>options_neues_modul.cpp</code>:</p> <pre><code>// options_neues_modul.h\n#ifndef OPTIONS_NEUES_MODUL_H_\n#define OPTIONS_NEUES_MODUL_H_\n\n#include \"../options/options.h\"\n\nclass options_neues_modulClass : public optionsClass {\npublic:\n    options_neues_modulClass(int optionc, char* optionv[], const char* CL);\n    virtual ~options_neues_modulClass();\n\n    // Spezifische Optionen f\u00fcr dieses Modul\n    int spezifische_option;\n\nprotected:\n    virtual void Help(int num = 1);\n};\n\n#endif\n</code></pre> <p>Schritt 4: Hauptprogramm erstellen</p> <pre><code>// neues_modul.cpp\n#include \"options_neues_modul.h\"\n#include \"../general_function/general_functions.h\"\n\nint main(int argc, char *argv[]) {\n    options_neues_modulClass options(argc, &amp;argv[0], \"parameter\");\n\n    if (options.init(argc-1, &amp;argv[1])) {\n        return 1;\n    }\n\n    // Ihre Logik hier\n\n    return 0;\n}\n</code></pre> <p>Schritt 5: OPTIONS.DAT erstellen</p> <p>Kopieren Sie eine bestehende OPTIONS.DAT und passen Sie an.</p> <p>Schritt 6: Dokumentation aktualisieren</p> <ul> <li>F\u00fcgen Sie das Modul zu STRUCTURE.md hinzu</li> <li>Dokumentieren Sie die Funktionalit\u00e4t</li> </ul>"},{"location":"technical/DEVELOPMENT/#code-standards","title":"Code-Standards","text":"<p>Siehe CODING_STANDARDS.md f\u00fcr Details.</p> <p>Kurzfassung: - C++11 Standard - Konsistente Namenskonventionen - Doxygen-Kommentare f\u00fcr Funktionen - Fehlerbehandlung mit R\u00fcckgabewerten - Status-Ausgaben auf <code>stdout</code>, Fehler auf <code>stderr</code></p>"},{"location":"technical/DEVELOPMENT/#debugging","title":"Debugging","text":""},{"location":"technical/DEVELOPMENT/#debugger-verwenden","title":"Debugger verwenden","text":"<p>gdb (GNU Debugger):</p> <pre><code># Programm mit Debugger starten\ngdb ./worldqual\n\n# Breakpoints setzen\n(gdb) break main\n(gdb) break WorldQual.cpp:100\n(gdb) break get_factor\n\n# Programm starten\n(gdb) run 403100091 2010 2010\n\n# Schrittweise ausf\u00fchren\n(gdb) step      # Ein Schritt\n(gdb) next      # N\u00e4chste Zeile\n(gdb) continue  # Weiter bis n\u00e4chster Breakpoint\n\n# Variablen anzeigen\n(gdb) print variable_name\n(gdb) print *pointer\n(gdb) print array[0]@10  # Array anzeigen\n\n# Stack-Trace\n(gdb) backtrace\n(gdb) frame 1  # Zu Frame 1 wechseln\n\n# Beenden\n(gdb) quit\n</code></pre> <p>Valgrind (Memory-Checker):</p> <pre><code># Memory-Leaks pr\u00fcfen\nvalgrind --leak-check=full ./worldqual 403100091 2010 2010\n\n# Speicherfehler finden\nvalgrind --tool=memcheck ./worldqual 403100091 2010 2010\n</code></pre>"},{"location":"technical/DEVELOPMENT/#debug-ausgaben-aktivieren","title":"Debug-Ausgaben aktivieren","text":"<p>In Code:</p> <pre><code>#define DEBUG\n// oder\n#define DEBUG_queries\n\n#ifdef DEBUG\n    cout &lt;&lt; \"Debug: Variable = \" &lt;&lt; variable &lt;&lt; endl;\n#endif\n</code></pre> <p>Logging umleiten:</p> <pre><code># Alle Ausgaben in Datei\n./worldqual 403100091 2010 2010 &gt; log.txt 2&gt;&amp;1\n\n# Nur Fehler in Datei\n./worldqual 403100091 2010 2010 2&gt; errors.txt\n\n# Beides trennen\n./worldqual 403100091 2010 2010 &gt; output.txt 2&gt; errors.txt\n</code></pre>"},{"location":"technical/DEVELOPMENT/#h\u00e4ufige-debugging-szenarien","title":"H\u00e4ufige Debugging-Szenarien","text":"<p>Problem: Segmentation Fault</p> <pre><code># Mit gdb\ngdb ./worldqual\n(gdb) run 403100091 2010 2010\n# Programm crasht\n(gdb) backtrace\n# Zeigt wo der Fehler auftrat\n</code></pre> <p>Problem: Unerwartete Werte</p> <pre><code>// In Code einf\u00fcgen\n#ifdef DEBUG\n    cout &lt;&lt; \"DEBUG: cell=\" &lt;&lt; cell &lt;&lt; \" value=\" &lt;&lt; value &lt;&lt; endl;\n#endif\n</code></pre> <p>Problem: Datenbank-Query-Fehler</p> <pre><code>#define DEBUG_queries\n// Zeigt alle SQL-Queries\n</code></pre>"},{"location":"technical/DEVELOPMENT/#testing","title":"Testing","text":""},{"location":"technical/DEVELOPMENT/#unit-tests-aktuell-nicht-vorhanden-aber-empfohlen","title":"Unit-Tests (aktuell nicht vorhanden, aber empfohlen)","text":"<p>Framework: Google Test oder Catch2</p> <p>Beispiel-Struktur:</p> <pre><code>// test_general_functions.cpp\n#include &lt;gtest/gtest.h&gt;\n#include \"general_functions.h\"\n\nTEST(GeneralFunctions, get_outflowCell) {\n    // Test-Logik\n    int result = get_outflowCell(12345, &amp;options);\n    EXPECT_EQ(result, 12346);\n}\n</code></pre> <p>Ausf\u00fchren: <pre><code>make test\n./test_general_functions\n</code></pre></p>"},{"location":"technical/DEVELOPMENT/#integrationstests","title":"Integrationstests","text":"<p>Manuelle Tests:</p> <ol> <li> <p>Kleine Test-Simulation <pre><code># Mit einem Jahr, kleiner Region\n./fill_worldqual_load 2010 2010\n./worldqual 403100091 2010 2010\n</code></pre></p> </li> <li> <p>Ergebnisse pr\u00fcfen <pre><code>SELECT COUNT(*) FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010;\n-- Sollte &gt; 0 sein\n</code></pre></p> </li> <li> <p>Vergleich mit bekannten Werten</p> </li> <li>Bekannte Test-Daten verwenden</li> <li>Ergebnisse mit erwarteten Werten vergleichen</li> </ol>"},{"location":"technical/DEVELOPMENT/#performance-tests","title":"Performance-Tests","text":"<pre><code># Zeit messen\ntime ./worldqual 403100091 2010 2010\n\n# Detailliertes Profiling\ngprof ./worldqual gmon.out &gt; profile.txt\n</code></pre>"},{"location":"technical/DEVELOPMENT/#versionierung","title":"Versionierung","text":""},{"location":"technical/DEVELOPMENT/#git-workflow","title":"Git-Workflow","text":"<p>Branch-Strategie:</p> <ul> <li><code>main</code> - Stabile Version</li> <li><code>develop</code> - Entwicklung (optional)</li> <li><code>feature/*</code> - Neue Features</li> <li><code>bugfix/*</code> - Bugfixes</li> <li><code>docs/*</code> - Dokumentation</li> </ul> <p>Commit-Messages:</p> <p>Verwenden Sie konventionelle Commits: <pre><code>feat: Neue Funktion hinzugef\u00fcgt\nfix: Bug in get_factor behoben\ndocs: Dokumentation erweitert\nrefactor: Code umstrukturiert\ntest: Tests hinzugef\u00fcgt\n</code></pre></p> <p>Beispiel: <pre><code>git checkout -b feature/neue-funktion\n# Code \u00e4ndern\ngit add .\ngit commit -m \"feat: Neue Funktion f\u00fcr X hinzugef\u00fcgt\"\ngit push origin feature/neue-funktion\n# Pull Request erstellen\n</code></pre></p>"},{"location":"technical/DEVELOPMENT/#code-review","title":"Code-Review","text":"<p>Vor dem Merge: 1. Code kompiliert ohne Warnungen 2. Tests bestehen (falls vorhanden) 3. Dokumentation aktualisiert 4. Code-Standards eingehalten</p> <p>Weitere Informationen: - Code-Standards - Wie codet man? - Architektur - Code-Struktur verstehen - Contributing - Wie beitragen?</p>"},{"location":"user/anleitung/","title":"WorldQual - Detaillierte Anleitung","text":"<p>Navigation: \u00dcbersicht | Schnellreferenz | Index | Struktur</p> <p>Diese Dokumentation erkl\u00e4rt genau, wie Sie WorldQual Schritt f\u00fcr Schritt nutzen.</p>"},{"location":"user/anleitung/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ol> <li>Erste Schritte - Kompletter Workflow</li> <li>Vorbereitung: Was brauchen Sie?</li> <li>Schritt-f\u00fcr-Schritt: Ihre erste Simulation</li> <li>Module im Detail</li> <li>fill_worldqual_load - Eintr\u00e4ge berechnen</li> <li>worldqual - Hauptsimulation</li> <li>wq_stat_stations - Statistische Analyse</li> <li>water_temperature - Wassertemperatur</li> <li>Konfiguration verstehen</li> <li>OPTIONS.DAT - Die wichtigste Datei</li> <li>Wichtige Optionen erkl\u00e4rt</li> <li>Datenbank verstehen</li> <li>\u00dcbersicht \u00fcber die Datenbanken</li> <li>wq_general - Konfigurationsdatenbank</li> <li>Datenbankstruktur komplett anlegen</li> <li>Voraussetzungen</li> <li>Schritt 1: Basis-Datenbank erstellen</li> <li>Schritt 2: wq_general Tabellen erstellen</li> <li>Schritt 3-7: Weitere Tabellen</li> <li>WaterGAP-Daten genau beschaffen</li> <li>Was sind WaterGAP-Daten?</li> <li>Welche Daten werden ben\u00f6tigt?</li> <li>Wo bekommt man WaterGAP-Daten?</li> <li>Datenformat verstehen</li> <li>Ben\u00f6tigte Dateien - Komplette Liste</li> <li>Alle Module kompilieren - Komplette Liste</li> <li>Kompilierungsreihenfolge (wichtig!)</li> <li>Automatisiertes Build-Skript</li> <li>Modul-\u00dcbersicht</li> <li>H\u00e4ufige Kompilierungsfehler</li> <li>Fehlermeldungen verstehen - Kompletter Guide</li> <li>Datenbank-Fehler</li> <li>Datei-Fehler</li> <li>Kompilierungsfehler</li> <li>Laufzeit-Fehler</li> <li>Fehlerbehebungs-Workflow</li> <li>Praktische Beispiele</li> <li>Beispiel 1: Einfache Simulation</li> <li>Beispiel 2: Mehrere Jahre</li> <li>Beispiel 3: Szenarienvergleich</li> <li>Fehlerbehebung<ul> <li>Problem 1: Datenbankverbindung schl\u00e4gt fehl</li> <li>Problem 2: Datei nicht gefunden</li> <li>Problem 3: Falsche Parameter-ID</li> <li>Problem 4: Speicherprobleme</li> <li>Problem 5: Falsche IDrun</li> </ul> </li> <li>Tipps und Tricks</li> </ol>"},{"location":"user/anleitung/#erste-schritte---kompletter-workflow","title":"Erste Schritte - Kompletter Workflow","text":""},{"location":"user/anleitung/#vorbereitung-was-brauchen-sie","title":"Vorbereitung: Was brauchen Sie?","text":"<p>Bevor Sie starten, brauchen Sie:</p> <ol> <li>\u2705 MySQL-Datenbank l\u00e4uft und ist eingerichtet</li> <li>\u2705 Module kompiliert (siehe Installation)</li> <li>\u2705 Input-Daten vorhanden (WaterGAP-Daten, etc.)</li> <li>\u2705 Projekt in Datenbank angelegt</li> <li>\u2705 Szenario in Datenbank angelegt</li> </ol>"},{"location":"user/anleitung/#schritt-f\u00fcr-schritt-ihre-erste-simulation","title":"Schritt-f\u00fcr-Schritt: Ihre erste Simulation","text":""},{"location":"user/anleitung/#schritt-1-projekt-und-szenario-pr\u00fcfen","title":"Schritt 1: Projekt und Szenario pr\u00fcfen","text":"<p>Was ist das? Jede Simulation geh\u00f6rt zu einem Projekt (z.B. \"WWQA\") und einem Szenario (z.B. \"Baseline 2010\").</p> <p>Wie pr\u00fcfen Sie das?</p> <pre><code>-- In MySQL einloggen\nmysql -u username -p\n\n-- Projekte anzeigen\nUSE wq_general;\nSELECT * FROM _project;\n-- Merken Sie sich die project_id (z.B. 2 f\u00fcr WWQA)\n\n-- Szenarien anzeigen\nSELECT * FROM _szenario;\n-- Merken Sie sich die IDScen (z.B. 91)\n</code></pre> <p>Was tun wenn Projekt oder Szenario fehlen?</p> <p>Falls die Abfrage keine Ergebnisse liefert, m\u00fcssen Sie Projekt/Szenario anlegen:</p> <p>Projekt anlegen: <pre><code>USE wq_general;\nINSERT INTO _project (project_id, Project_Name, description) \nVALUES (2, 'WWQA', 'World Water Quality Assessment');\n-- Pr\u00fcfen\nSELECT * FROM _project WHERE project_id=2;\n</code></pre></p> <p>Szenario anlegen: <pre><code>USE wq_general;\nINSERT INTO _szenario (IDScen, ScenName, description, project_id) \nVALUES (91, 'Baseline 2010', 'Baseline-Szenario f\u00fcr 2010', 2);\n-- Pr\u00fcfen\nSELECT * FROM _szenario WHERE IDScen=91;\n</code></pre></p> <p>Wichtig: Die genauen Spaltennamen k\u00f6nnen variieren. Pr\u00fcfen Sie zuerst die Tabellenstruktur: <pre><code>DESCRIBE _project;\nDESCRIBE _szenario;\n</code></pre></p>"},{"location":"user/anleitung/#schritt-2-parameter-w\u00e4hlen","title":"Schritt 2: Parameter w\u00e4hlen","text":"<p>Was ist das? Welchen Schadstoff wollen Sie simulieren?</p> <p>Parameter-IDs: - 0 = BOD (Biochemischer Sauerstoffbedarf) - 1 = Salz (TDS) - 2 = FC (F\u00e4kalcoliforme Bakterien) - 3 = TN (Gesamtstickstoff) - 4 = TP (Gesamtphosphor)</p> <p>Beispiel: Sie wollen F\u00e4kalcoliforme simulieren \u2192 Parameter-ID = 2</p>"},{"location":"user/anleitung/#schritt-3-eintr\u00e4ge-berechnen","title":"Schritt 3: Eintr\u00e4ge berechnen","text":"<p>Was passiert hier? Das Programm berechnet, wie viele Schadstoffe in die Fl\u00fcsse gelangen.</p> <p>Konkret:</p> <pre><code># 1. In das Modul-Verzeichnis wechseln\ncd fill_worldqual_load\n\n# 2. OPTIONS.DAT \u00f6ffnen und anpassen\n\n**Wie \u00f6ffnet man die Datei?**\n\n**Option A: Mit Texteditor (empfohlen f\u00fcr Anf\u00e4nger)**\n```bash\n# Mit nano (einfacher Editor)\nnano OPTIONS.DAT\n\n# Navigation:\n# - Pfeiltasten: Bewegen\n# - Strg+O: Speichern (dann Enter)\n# - Strg+X: Beenden\n</code></pre> <p>Option B: Mit vim (f\u00fcr Erfahrene) <pre><code>vim OPTIONS.DAT\n# Dr\u00fccken Sie 'i' zum Einf\u00fcgen\n# \u00c4ndern Sie die Werte\n# Dr\u00fccken Sie ESC, dann ':wq' zum Speichern und Beenden\n</code></pre></p> <p>Option C: Mit grafischem Editor <pre><code># macOS\nopen -a TextEdit OPTIONS.DAT\n\n# Linux (GNOME)\ngedit OPTIONS.DAT\n\n# Oder jeder andere Texteditor\n</code></pre></p> <p>Was genau \u00e4ndern?</p> <p>Die OPTIONS.DAT sieht etwa so aus: <pre><code>Runtime options fill_worldqual_load\n\n1. project_id, Tabelle wq_general._project\n  1: CESR\n  2: WWQA\n  3: CESR Sensitivity Analysis\n  4: test\nValue: 2\n\n2. IDScen, wq_general._szenario\nValue: 91\n\n3. IDVersion\n  2: WaterGAP2\n  3: WaterGAP3\nValue: 3\n\n4. IDReg\n  1 WaterGAP3 eu\n  2 WaterGAP3 af\n  ...\nValue: 2\n\n5. MyHost\nValue: localhost\n\n6. MyUser\nValue: worldqual\n\n7. MyPassword\nValue: ihr_passwort_hier\n\n8. InputType\n  0: Daten aus der Datenbank einlesen\n  1: Daten aus UNF-Dateien einlesen\nValue: 1\n\n9. input_dir\nValue: /pfad/zu/ihren/daten\n</code></pre></p> <p>\u00c4ndern Sie die Werte nach \"Value:\":</p> <ul> <li><code>Value: 2</code> \u2192 Ihre Projekt-ID (z.B. 2 f\u00fcr WWQA)</li> <li><code>Value: 91</code> \u2192 Ihre Szenario-ID (z.B. 91)</li> <li><code>Value: 3</code> \u2192 WaterGAP Version (2 oder 3)</li> <li><code>Value: 2</code> \u2192 Region (1=EU, 2=AF, 3=AS, 4=AU, 5=NA, 6=SA)</li> <li><code>Value: localhost</code> \u2192 MySQL-Server (localhost oder IP-Adresse)</li> <li><code>Value: worldqual</code> \u2192 Ihr MySQL-Benutzername</li> <li><code>Value: ihr_passwort_hier</code> \u2192 Ihr MySQL-Passwort</li> <li><code>Value: 1</code> \u2192 InputType (0=Datenbank, 1=UNF-Dateien)</li> <li><code>Value: /pfad/zu/ihren/daten</code> \u2192 Vollst\u00e4ndiger Pfad zu WaterGAP-Daten</li> </ul> <p>Wichtig:  - \u00c4ndern Sie NUR die Werte nach \"Value:\" - Lassen Sie den Rest der Datei unver\u00e4ndert - Speichern Sie die Datei nach den \u00c4nderungen</p>"},{"location":"user/anleitung/#3-programm-starten","title":"3. Programm starten","text":"<p>./fill_worldqual_load 2010 2010</p>"},{"location":"user/anleitung/#berechnet-eintr\u00e4ge-f\u00fcr-jahr-2010","title":"Berechnet Eintr\u00e4ge f\u00fcr Jahr 2010","text":"<p><pre><code>**Was sehen Sie?**\n</code></pre> Program fill_worldqual_load started at: 2026-02-02 10:00:00</p> <p>project_id = 2 (WWQA) Database: wwqa_wq_load_af connection ok...</p> <p>Berechne Eintr\u00e4ge f\u00fcr Parameter 2 (FC)... Jahr 2010...   Monat 1... 2... 3... ... 12 Fertig!</p> <p>Program fill_worldqual_load ended at: 2026-02-02 10:15:00 <pre><code>**Wie lange dauert das?**\n- Ein Jahr, kleine Region: 5-15 Minuten\n- Mehrere Jahre, gro\u00dfe Region: Stunden\n\n**Was ist passiert?**\n- Das Programm hat f\u00fcr jede Grid-Zelle (ca. 0.5\u00b0 x 0.5\u00b0) berechnet:\n  - Wie viele Menschen leben dort? \u2192 Abwassermengen\n  - Wie viel Abwasser wird behandelt? \u2192 Reduktion\n  - Landnutzung? \u2192 Diffuse Eintr\u00e4ge\n  - Geologie? \u2192 Nat\u00fcrliche Quellen\n- Ergebnisse wurden in Datenbank gespeichert: `wwqa_wq_load_af.calc_cell_month_load_*`\n\n#### Schritt 4: Wassertemperatur berechnen (optional)\n\n**Wann brauchen Sie das?** Wenn Temperatur f\u00fcr Abbauprozesse wichtig ist (z.B. bei Bakterien).\n\n**Konkret:**\n\n```bash\ncd ../water_temperature\n\n# OPTIONS.DAT anpassen (\u00e4hnlich wie Schritt 3)\n# Zus\u00e4tzlich: IDTemp = 100 (aus Datenbank holen)\n\n./water_temperature 2010 2010\n</code></pre></p> <p>Was passiert? Das Programm berechnet aus Lufttemperatur die Wassertemperatur (mit nichtlinearer Kurvenanpassung).</p>"},{"location":"user/anleitung/#schritt-5-hauptsimulation","title":"Schritt 5: Hauptsimulation","text":"<p>Was passiert hier? Das Programm simuliert, wie sich die Schadstoffe im Fluss verhalten.</p> <p>Konkret:</p> <pre><code>cd ../worldqual\n\n# 1. IDrun aus Datenbank holen\n\n**Was ist eine IDrun?**\nDie IDrun ist eine eindeutige Nummer f\u00fcr eine Simulation. Sie identifiziert:\n- Welchen Parameter (z.B. FC = 2)\n- Welches Szenario (z.B. 91)\n- Weitere Konfigurationen (Temperatur, etc.)\n\n**Wie finden Sie die IDrun?**\n\n```sql\n# In MySQL einloggen\nmysql -u worldqual -p\n# Passwort eingeben\n\n# Datenbank w\u00e4hlen\nUSE wq_general;\n\n# IDrun suchen\nSELECT IDrun, runName, parameter_id, IDScen FROM _runlist \nWHERE parameter_id=2 AND IDScen=91;\n\n# Sollte Ergebnis zeigen, z.B.:\n# +-----------+------------------+-------------+--------+\n# | IDrun     | runName          | parameter_id| IDScen |\n# +-----------+------------------+-------------+--------+\n# | 403100091 | FC Baseline 2010 |           2 |     91 |\n# +-----------+------------------+-------------+--------+\n</code></pre> <p>Was wenn keine IDrun existiert?</p> <p>Falls die Abfrage keine Ergebnisse liefert, m\u00fcssen Sie eine IDrun anlegen. Dies ist komplexer und erfordert mehrere Schritte:</p> <p>Schritt 1: Pr\u00fcfen welche Spalten die Tabelle hat <pre><code>DESCRIBE _runlist;\n-- Zeigt alle Spalten und deren Typen\n</code></pre></p> <p>Schritt 2: IDrun anlegen (Beispiel) <pre><code>INSERT INTO _runlist (\n    IDrun, \n    runName, \n    parameter_id, \n    IDScen, \n    IDTemp,\n    project_id,\n    -- weitere ben\u00f6tigte Spalten je nach Schema\n) VALUES (\n    403100091,\n    'FC Baseline 2010',\n    2,      -- Parameter-ID f\u00fcr FC\n    91,     -- Szenario-ID\n    -9999,  -- IDTemp (oder konkrete Nummer)\n    2       -- project_id\n);\n</code></pre></p> <p>Wichtig: Die genaue Struktur h\u00e4ngt von Ihrer Datenbank-Version ab. Fragen Sie einen Kollegen oder pr\u00fcfen Sie die Tabellenstruktur genau!</p> <p>Alternative: Nutzen Sie <code>create_scenarios</code> Modul, um Runs automatisch zu erstellen (siehe Modul-Dokumentation).</p>"},{"location":"user/anleitung/#2-optionsdat-anpassen-wie-schritt-3","title":"2. OPTIONS.DAT anpassen (wie Schritt 3)","text":""},{"location":"user/anleitung/#3-simulation-starten","title":"3. Simulation starten","text":"<p>./worldqual 403100091 2010 2010 <pre><code>**Was sehen Sie?**\n</code></pre> Program worldqual started at: 2026-02-02 10:30:00</p> <p>project_id = 2 (WWQA) IDrun = 403100091 Parameter: FC (F\u00e4kalcoliforme) Region: Afrika Database: wwqa_worldqual_af connection ok...</p> <p>Lese Eintr\u00e4ge... Lese hydrologische Daten... Simuliere Jahr 2010...   Monat 1... 2... 3... ... 12 Fertig!</p> <p>Program worldqual ended at: 2026-02-02 14:30:00 <pre><code>**Wie lange dauert das?**\n- Ein Jahr, kleine Region: 1-4 Stunden\n- Mehrere Jahre, gro\u00dfe Region: Tage\n\n**Was ist passiert?**\n- F\u00fcr jede Grid-Zelle, jeden Monat:\n  1. Eintr\u00e4ge wurden gelesen (aus Schritt 3)\n  2. Transport simuliert (Schadstoffe flie\u00dfen flussabw\u00e4rts)\n  3. Verd\u00fcnnung berechnet (durch Zufl\u00fcsse)\n  4. Abbau simuliert (Bakterien sterben ab)\n  5. Ergebnis: Konzentration wurde berechnet\n- Ergebnisse wurden gespeichert: `wwqa_worldqual_af.concentration`\n\n#### Schritt 6: Ergebnisse pr\u00fcfen\n\n**Wie sehen Sie die Ergebnisse?**\n\n```sql\n-- In MySQL\nUSE wwqa_worldqual_af;\n\n-- Konzentrationen f\u00fcr ein Jahr anzeigen\nSELECT cell, month, concentration \nFROM concentration \nWHERE IDrun=403100091 AND year=2010 \nLIMIT 10;\n\n-- Durchschnittliche Konzentration pro Monat\nSELECT month, AVG(concentration) as avg_conc\nFROM concentration \nWHERE IDrun=403100091 AND year=2010\nGROUP BY month;\n</code></pre></p>"},{"location":"user/anleitung/#schritt-7-statistik-vergleich-mit-messungen","title":"Schritt 7: Statistik (Vergleich mit Messungen)","text":"<p>Was passiert hier? Sie vergleichen Ihre Simulation mit realen Messungen.</p> <p>Konkret:</p> <pre><code>cd ../wq_stat_stations\n\n# STAT.DAT anpassen falls n\u00f6tig\n\n./wq_stat_stations 403100091 2010 2010\n</code></pre> <p>Ergebnis: Textdateien mit statistischen Kennzahlen (R\u00b2, RMSE, etc.)</p>"},{"location":"user/anleitung/#schritt-8-visualisierung","title":"Schritt 8: Visualisierung","text":"<p>Wie erstellen Sie Diagramme?</p> <p>Voraussetzung: R installieren</p> <p>R installieren:</p> <p>Linux (Ubuntu/Debian): <pre><code>sudo apt-get update\nsudo apt-get install r-base\n</code></pre></p> <p>macOS: <pre><code>brew install r\n</code></pre></p> <p>Windows: - Download von https://cran.r-project.org/ - Installer ausf\u00fchren</p> <p>R-Pakete installieren: <pre><code># R \u00f6ffnen (im Terminal: R)\ninstall.packages(\"ggplot2\")\ninstall.packages(\"gridExtra\")\n# Falls nach CRAN-Mirror gefragt wird, w\u00e4hlen Sie einen aus (z.B. Deutschland)\n</code></pre></p> <p>R-Skripte nutzen:</p> <p>Schritt 1: R \u00f6ffnen <pre><code># Im Terminal\ncd /pfad/zu/WorldQual\nR\n# R startet, Sie sehen jetzt \"&gt;\"\n</code></pre></p> <p>Schritt 2: In das richtige Verzeichnis wechseln <pre><code># In R\nsetwd(\"R-scripte\")\n# Pr\u00fcfen ob es funktioniert hat:\ngetwd()\n# Sollte zeigen: .../WorldQual/R-scripte\n</code></pre></p> <p>Schritt 3: start.R anpassen</p> <p>Option A: In R \u00f6ffnen und \u00e4ndern <pre><code># Datei \u00f6ffnen\nfile.edit(\"start.R\")\n# Editor \u00f6ffnet sich, \u00e4ndern Sie die Variablen\n</code></pre></p> <p>Option B: Mit Texteditor \u00f6ffnen <pre><code># In neuem Terminal (R l\u00e4uft weiter)\nnano R-scripte/start.R\n# Oder\nvim R-scripte/start.R\n</code></pre></p> <p>Wichtige Variablen in start.R anpassen:</p> <pre><code># Verzeichnis mit R-Skripten\nr_script_dir &lt;- \"/vollst\u00e4ndiger/pfad/zu/WorldQual/R-scripte\"\n\n# Verzeichnis f\u00fcr Ausgabe (Grafiken)\ncurrent_dir &lt;- \"/pfad/wo/grafiken/gespeichert/werden\"\n\n# Pfad zu Statistik-Dateien (Output von wq_stat_stations)\ninput.path &lt;- \"/pfad/zu/statistik/dateien\"\ninput.filename &lt;- \"\"  # leer = alle Dateien, oder spezifischer Dateiname\n\n# Einheit f\u00fcr Konzentration\nunit &lt;- \"cfu/100ml\"   # F\u00fcr FC, andere: \"mg/l\", \"mg/m\u00b3\", etc.\n\n# Logarithmische Skalierung\nlog_scale &lt;- \"y\"      # \"y\" = y-Achse logarithmisch, \"\" = linear\n\n# Weitere Optionen je nach Skript\n</code></pre> <p>Schritt 4: Skripte ausf\u00fchren <pre><code># In R (nachdem start.R angepasst wurde)\nsource(\"start.R\")\n# L\u00e4dt die Konfiguration\n\n# Dann spezifische Skripte ausf\u00fchren:\nsource(\"station.R\")              # Diagramme f\u00fcr einzelne Stationen\nsource(\"stations_scatterplot.R\") # Streudiagramme (Simulation vs. Messung)\nsource(\"RiverSection.R\")        # Flussabschnitte\n</code></pre></p> <p>Wo werden die Grafiken gespeichert? - In dem Verzeichnis, das Sie in <code>current_dir</code> angegeben haben - Normalerweise als PNG-Dateien (z.B. <code>station_plot.png</code>)</p> <p>R beenden: <pre><code># In R\nq()\n# Wird gefragt: \"Save workspace image?\" \u2192 'n' f\u00fcr Nein\n</code></pre></p>"},{"location":"user/anleitung/#module-im-detail","title":"Module im Detail","text":""},{"location":"user/anleitung/#fill_worldqual_load---eintr\u00e4ge-berechnen","title":"fill_worldqual_load - Eintr\u00e4ge berechnen","text":"<p>Was macht es genau?</p> <p>Dieses Modul berechnet die Eintr\u00e4ge von Schadstoffen in die Fl\u00fcsse. Es ber\u00fccksichtigt:</p> <ol> <li>Punktuelle Quellen (Abwasserbehandlungsanlagen)</li> <li>Bev\u00f6lkerungsdichte \u2192 Wie viele Menschen?</li> <li>Abwasserbehandlung \u2192 Wie viel wird gereinigt?</li> <li> <p>Effizienz \u2192 Wie gut ist die Reinigung?</p> </li> <li> <p>Diffuse Quellen (Landwirtschaft, st\u00e4dtische Gebiete)</p> </li> <li>Landnutzung \u2192 Ackerland, Weiden, St\u00e4dte</li> <li>D\u00fcnger \u2192 Stickstoff, Phosphor</li> <li> <p>Erosion \u2192 Sedimente</p> </li> <li> <p>Geogene Quellen (nat\u00fcrlich)</p> </li> <li> <p>Geologie \u2192 Nat\u00fcrliche Salze, etc.</p> </li> <li> <p>Atmosph\u00e4rische Deposition</p> </li> <li>Regen \u2192 N\u00e4hrstoffe aus der Luft</li> </ol> <p>Input-Daten die ben\u00f6tigt werden:</p> <ul> <li>Bev\u00f6lkerungsdichte (Grid-Daten)</li> <li>Abwasserbehandlungsraten (L\u00e4nderdaten)</li> <li>Landnutzung (Grid-Daten)</li> <li>D\u00fcngeranwendung (L\u00e4nderdaten)</li> <li>Geologische Karten</li> </ul> <p>Output:</p> <ul> <li>Datenbanktabellen: <code>calc_cell_month_load_*</code></li> <li>Eine Tabelle pro Eintragsquelle</li> <li>Monatliche Werte pro Grid-Zelle</li> </ul> <p>Wichtige Parameter in OPTIONS.DAT:</p> <pre><code>project_id = 2          # Ihr Projekt\nIDScen = 91            # Ihr Szenario\nIDReg = 2              # Region (1=EU, 2=AF, etc.)\nInputType = 1          # 1 = UNF-Dateien\ninput_dir = /pfad/zu/daten\n</code></pre> <p>Tipp: Detaillierte Erkl\u00e4rung aller Optionen finden Sie weiter unten in Konfiguration verstehen</p>"},{"location":"user/anleitung/#worldqual---hauptsimulation","title":"worldqual - Hauptsimulation","text":"<p>Was macht es genau?</p> <p>Dieses Modul simuliert die Wasserqualit\u00e4t im Fluss. Es berechnet:</p> <ol> <li>Transport</li> <li>Schadstoffe werden flussabw\u00e4rts transportiert</li> <li> <p>Routing-Informationen aus WaterGAP werden genutzt</p> </li> <li> <p>Verd\u00fcnnung</p> </li> <li>Durch Zufl\u00fcsse wird Wasser verd\u00fcnnt</li> <li> <p>Abfluss (Q_out) bestimmt Verd\u00fcnnung</p> </li> <li> <p>Abbau</p> </li> <li>Bakterien (FC): Sterben ab (abh\u00e4ngig von Temperatur, Zeit)</li> <li>N\u00e4hrstoffe (TN, TP): Werden abgebaut (abh\u00e4ngig von Temperatur)</li> <li> <p>Konservative Stoffe (Salz): Werden NICHT abgebaut</p> </li> <li> <p>Temperatur-Einfluss</p> </li> <li>H\u00f6here Temperatur \u2192 Schnellerer Abbau</li> <li>Wassertemperatur wird verwendet (aus water_temperature Modul)</li> </ol> <p>Input-Daten:</p> <ul> <li>Eintr\u00e4ge (aus fill_worldqual_load)</li> <li>Abfluss (Q_out) - monatlich</li> <li>Runoff - monatlich</li> <li>Wassertemperatur (optional) - monatlich</li> <li>Flie\u00dfgeschwindigkeit (optional)</li> <li>Abbau-Raten (aus Datenbank)</li> </ul> <p>Output:</p> <ul> <li>Konzentrationen pro Grid-Zelle, pro Monat</li> <li>Gespeichert in: <code>concentration</code> Tabelle</li> </ul> <p>Wichtige Parameter in OPTIONS.DAT:</p> <pre><code>project_id = 2\nIDScen = 91\nIDrun = 403100091      # Aus Datenbank holen!\nIDReg = 2\nInputType = 1\ninput_dir = /pfad/zu/daten\n</code></pre> <p>Wie finde ich die IDrun?</p> <p>Schnellreferenz: Siehe auch QUICK_REFERENCE.md - IDrun finden</p> <p>Die IDrun ist eine eindeutige Nummer f\u00fcr eine Simulation. Sie setzt sich zusammen aus: - Parameter-ID (z.B. 2 f\u00fcr FC) - Szenario-ID (z.B. 91) - Weitere Konfigurationen</p> <pre><code>SELECT IDrun, runName, parameter_id, IDScen \nFROM wq_general._runlist \nWHERE parameter_id=2 AND IDScen=91;\n</code></pre>"},{"location":"user/anleitung/#wq_stat_stations---statistische-analyse","title":"wq_stat_stations - Statistische Analyse","text":"<p>Was macht es genau?</p> <p>Dieses Modul vergleicht Ihre simulierten Werte mit gemessenen Werten an Stationen.</p> <p>Wie funktioniert es?</p> <ol> <li>Findet Messstationen in der Datenbank</li> <li>Liest gemessene Werte f\u00fcr diese Stationen</li> <li>Liest simulierte Werte f\u00fcr die gleichen Orte</li> <li>Berechnet statistische Kennzahlen:</li> <li>R\u00b2 (Bestimmtheitsma\u00df): Wie gut passt die Simulation? (0-1, h\u00f6her = besser)</li> <li>RMSE (Root Mean Square Error): Durchschnittlicher Fehler</li> <li>Bias: Systematischer Fehler (zu hoch/zu niedrig?)</li> <li>Nash-Sutcliffe: Weitere G\u00fcte-Ma\u00dfzahl</li> </ol> <p>Input:</p> <ul> <li>IDrun (aus Simulation)</li> <li>Start- und Endjahr</li> <li>Messstationen in Datenbank</li> </ul> <p>Output:</p> <ul> <li>Textdateien mit statistischen Kennzahlen</li> <li>Vergleichsdaten f\u00fcr Visualisierung</li> </ul> <p>Konfiguration:</p> <p>Die Datei <code>STAT.DAT</code> enth\u00e4lt zus\u00e4tzliche Einstellungen (optional).</p>"},{"location":"user/anleitung/#water_temperature---wassertemperatur","title":"water_temperature - Wassertemperatur","text":"<p>Was macht es genau?</p> <p>Berechnet die Wassertemperatur aus der Lufttemperatur mit einer nichtlinearen Funktion.</p> <p>Warum wichtig?</p> <ul> <li>Temperatur beeinflusst Abbauprozesse</li> <li>Bakterien sterben schneller bei h\u00f6herer Temperatur</li> <li>N\u00e4hrstoffe werden schneller abgebaut</li> </ul> <p>Wie funktioniert es?</p> <p>Verwendet eine logistische Kurve: <pre><code>Wassertemperatur = C0 / (1 + exp(C1 * Lufttemperatur + C2))\n</code></pre></p> <p>Die Konstanten (C0, C1, C2) werden in der Datenbank gespeichert (Tabelle <code>_water_temperature_list</code>).</p> <p>Input:</p> <ul> <li>Lufttemperatur (UNF-Dateien oder Datenbank)</li> <li>IDTemp (welche Temperatur-Kurve verwenden?)</li> </ul> <p>Output:</p> <ul> <li>Wassertemperatur pro Grid-Zelle, pro Monat</li> <li>Gespeichert in Datenbank oder UNF-Dateien</li> </ul>"},{"location":"user/anleitung/#konfiguration-verstehen","title":"Konfiguration verstehen","text":""},{"location":"user/anleitung/#optionsdat---die-wichtigste-datei","title":"OPTIONS.DAT - Die wichtigste Datei","text":"<p>Schnellreferenz: Siehe auch QUICK_REFERENCE.md - OPTIONS.DAT</p> <p>Jedes Modul hat eine <code>OPTIONS.DAT</code> Datei. Diese Datei enth\u00e4lt alle Einstellungen f\u00fcr die Simulation.</p>"},{"location":"user/anleitung/#format-der-datei","title":"Format der Datei","text":"<pre><code>Runtime options [modulname]\n\n1. [Option Name]\n   [Beschreibung der Option]\n   [M\u00f6gliche Werte]\nValue: [Aktueller Wert]\n\n2. [N\u00e4chste Option]\n...\n</code></pre>"},{"location":"user/anleitung/#wichtige-optionen-erkl\u00e4rt","title":"Wichtige Optionen erkl\u00e4rt","text":""},{"location":"user/anleitung/#project_id","title":"project_id","text":"<p>Was ist das? Die Nummer Ihres Projekts.</p> <p>Wo finde ich sie? <pre><code>SELECT project_id, Project_Name FROM wq_general._project;\n</code></pre></p> <p>Beispiele: - 1 = CESR - 2 = WWQA - 3 = CESR Sensitivity Analysis - 4 = test</p>"},{"location":"user/anleitung/#idscen","title":"IDScen","text":"<p>Was ist das? Die Nummer Ihres Szenarios.</p> <p>Wo finde ich sie? <pre><code>SELECT IDScen, ScenName FROM wq_general._szenario;\n</code></pre></p> <p>Beispiele: - 91 = Baseline 2010 - 92 = Szenario A - 93 = Szenario B</p>"},{"location":"user/anleitung/#idversion","title":"IDVersion","text":"<p>Was ist das? Welche WaterGAP-Version verwenden Sie?</p> <ul> <li>2 = WaterGAP2</li> <li>3 = WaterGAP3 (empfohlen)</li> </ul>"},{"location":"user/anleitung/#idreg","title":"IDReg","text":"<p>Was ist das? Welche Region simulieren Sie?</p> <ul> <li>1 = Europa (eu)</li> <li>2 = Afrika (af)</li> <li>3 = Asien (as)</li> <li>4 = Australien (au)</li> <li>5 = Nordamerika (na)</li> <li>6 = S\u00fcdamerika (sa)</li> </ul> <p>Wichtig: Die Region bestimmt, welche Datenbank verwendet wird: - <code>wwqa_worldqual_eu</code> f\u00fcr Europa - <code>wwqa_worldqual_af</code> f\u00fcr Afrika - etc.</p>"},{"location":"user/anleitung/#myhost-myuser-mypassword","title":"MyHost, MyUser, MyPassword","text":"<p>Was ist das? Verbindungsdaten f\u00fcr MySQL.</p> <p>Beispiele: <pre><code>MyHost = localhost        # Lokaler Server\nMyHost = REMOVED_HOST    # Remote-Server\nMyUser = worldqual\nMyPassword = mein_passwort\n</code></pre></p>"},{"location":"user/anleitung/#inputtype","title":"InputType","text":"<p>Was ist das? Woher kommen die Input-Daten?</p> <ul> <li>0 = Aus der Datenbank lesen</li> <li>1 = Aus UNF-Dateien lesen (empfohlen)</li> </ul> <p>Wann welche Option? - 0 (Datenbank): Wenn Daten bereits in Datenbank sind - 1 (UNF-Dateien): Wenn Sie WaterGAP-Dateien haben</p>"},{"location":"user/anleitung/#input_dir","title":"input_dir","text":"<p>Was ist das? Pfad zu den UNF-Dateien (nur bei InputType=1).</p> <p>Beispiel: <pre><code>input_dir = /home/user/watergap_data/africa\n</code></pre></p> <p>Wichtig: Der Pfad muss existieren und lesbar sein!</p>"},{"location":"user/anleitung/#beispiel-komplette-optionsdat","title":"Beispiel: Komplette OPTIONS.DAT","text":"<pre><code>Runtime options worldqual\n\n1. project_id, Tabelle wq_general._project\n  1: CESR\n  2: WWQA\n  3: CESR Sensitivity Analysis\n  4: test\nValue: 2\n\n2. IDScen, wq_general._szenario\nValue: 91\n\n3. IDVersion\n  2: WaterGAP2\n  3: WaterGAP3\nValue: 3\n\n4. IDReg\n  1 WaterGAP3 eu\n  2 WaterGAP3 af\n  3 WaterGAP3 as\n  4 WaterGAP3 au\n  5 WaterGAP3 na\n  6 WaterGAP3 sa\nValue: 2\n\n5. MyHost\nValue: localhost\n\n6. MyUser\nValue: worldqual\n\n7. MyPassword\nValue: mein_passwort\n\n8. InputType\n  0: Daten aus der Datenbank einlesen\n  1: Daten aus UNF-Dateien einlesen\nValue: 1\n\n9. input_dir\nValue: /home/user/watergap_data/africa\n</code></pre>"},{"location":"user/anleitung/#datenbank-verstehen","title":"Datenbank verstehen","text":""},{"location":"user/anleitung/#\u00fcbersicht-\u00fcber-die-datenbanken","title":"\u00dcbersicht \u00fcber die Datenbanken","text":"<p>Schnellreferenz: Siehe auch QUICK_REFERENCE.md - Datenbank-Abfragen</p> <p>WorldQual verwendet mehrere Datenbanken:</p> <ol> <li>wq_general: Allgemeine Konfiguration (Projekte, Szenarien, etc.)</li> <li>wwqa_worldqual_[region]: Simulationsergebnisse (Konzentrationen)</li> <li>wwqa_wq_load_[region]: Eintragsdaten</li> </ol>"},{"location":"user/anleitung/#wq_general---konfigurationsdatenbank","title":"wq_general - Konfigurationsdatenbank","text":"<p>Wichtige Tabellen:</p>"},{"location":"user/anleitung/#_project","title":"_project","text":"<p>Enth\u00e4lt alle Projekte.</p> <pre><code>SELECT * FROM wq_general._project;\n</code></pre> <p>Spalten: - <code>project_id</code>: Eindeutige Nummer - <code>Project_Name</code>: Name (z.B. \"WWQA\") - <code>description</code>: Beschreibung</p>"},{"location":"user/anleitung/#_szenario","title":"_szenario","text":"<p>Enth\u00e4lt alle Szenarien.</p> <pre><code>SELECT * FROM wq_general._szenario;\n</code></pre> <p>Spalten: - <code>IDScen</code>: Eindeutige Nummer - <code>ScenName</code>: Name (z.B. \"Baseline 2010\") - <code>description</code>: Beschreibung</p>"},{"location":"user/anleitung/#_parameter","title":"_parameter","text":"<p>Enth\u00e4lt alle Wasserqualit\u00e4tsparameter.</p> <pre><code>SELECT * FROM wq_general._parameter;\n</code></pre> <p>Spalten: - <code>parameter_id</code>: 0=BOD, 1=Salz, 2=FC, 3=TN, 4=TP - <code>ParameterName</code>: Name (z.B. \"FC\")</p>"},{"location":"user/anleitung/#_runlist","title":"_runlist","text":"<p>Enth\u00e4lt alle Run-Konfigurationen.</p> <pre><code>SELECT * FROM wq_general._runlist \nWHERE parameter_id=2 AND IDScen=91;\n</code></pre> <p>Spalten: - <code>IDrun</code>: Eindeutige Nummer (wichtig!) - <code>runName</code>: Name - <code>parameter_id</code>: Parameter - <code>IDScen</code>: Szenario - <code>IDTemp</code>: Wassertemperatur-Konfiguration - Weitere Einstellungen</p>"},{"location":"user/anleitung/#wwqa_worldqual_region---ergebnisse","title":"wwqa_worldqual_[region] - Ergebnisse","text":"<p>Wichtige Tabellen:</p>"},{"location":"user/anleitung/#concentration","title":"concentration","text":"<p>Enth\u00e4lt die simulierten Konzentrationen.</p> <pre><code>SELECT * FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010 \nLIMIT 10;\n</code></pre> <p>Spalten: - <code>IDrun</code>: Run-Nummer - <code>cell</code>: Grid-Zelle - <code>year</code>: Jahr - <code>month</code>: Monat (1-12) - <code>concentration</code>: Konzentration</p>"},{"location":"user/anleitung/#wwqa_wq_load_region---eintragsdaten","title":"wwqa_wq_load_[region] - Eintragsdaten","text":"<p>Wichtige Tabellen:</p>"},{"location":"user/anleitung/#calc_cell_month_load_","title":"calc_cell_month_load_*","text":"<p>Enth\u00e4lt die berechneten Eintr\u00e4ge (eine Tabelle pro Quelle).</p> <pre><code>SELECT * FROM wwqa_wq_load_af.calc_cell_month_load_man_ww \nWHERE year=2010 \nLIMIT 10;\n</code></pre> <p>Spalten: - <code>cell</code>: Grid-Zelle - <code>year</code>: Jahr - <code>month</code>: Monat (1-12) - <code>load</code>: Eintrag</p>"},{"location":"user/anleitung/#datenbankstruktur-komplett-anlegen","title":"Datenbankstruktur komplett anlegen","text":"<p>Falls Sie ein komplett neues System aufsetzen m\u00fcssen und keine bestehende Datenbank haben, m\u00fcssen Sie die Datenbankstruktur von Grund auf erstellen.</p>"},{"location":"user/anleitung/#voraussetzungen","title":"Voraussetzungen","text":"<ul> <li>MySQL Server l\u00e4uft</li> <li>MySQL-Benutzer mit Berechtigungen erstellt</li> <li>Root-Zugriff auf MySQL (f\u00fcr Schema-Erstellung)</li> </ul>"},{"location":"user/anleitung/#schritt-1-basis-datenbank-erstellen","title":"Schritt 1: Basis-Datenbank erstellen","text":"<pre><code>-- Als root einloggen\nmysql -u root -p\n\n-- Datenbanken erstellen\nCREATE DATABASE wq_general;\nCREATE DATABASE wwqa_worldqual_af;\nCREATE DATABASE wwqa_worldqual_eu;\nCREATE DATABASE wwqa_worldqual_as;\nCREATE DATABASE wwqa_worldqual_au;\nCREATE DATABASE wwqa_worldqual_na;\nCREATE DATABASE wwqa_worldqual_sa;\n\nCREATE DATABASE wwqa_wq_load_af;\nCREATE DATABASE wwqa_wq_load_eu;\nCREATE DATABASE wwqa_wq_load_as;\nCREATE DATABASE wwqa_wq_load_au;\nCREATE DATABASE wwqa_wq_load_na;\nCREATE DATABASE wwqa_wq_load_sa;\n\n-- Berechtigungen geben\nGRANT ALL PRIVILEGES ON wq_general.* TO 'worldqual'@'localhost';\nGRANT ALL PRIVILEGES ON wwqa_worldqual_*.* TO 'worldqual'@'localhost';\nGRANT ALL PRIVILEGES ON wwqa_wq_load_*.* TO 'worldqual'@'localhost';\nFLUSH PRIVILEGES;\n</code></pre>"},{"location":"user/anleitung/#schritt-2-wq_general-tabellen-erstellen","title":"Schritt 2: wq_general Tabellen erstellen","text":"<p>Wichtig: Die genauen Tabellendefinitionen k\u00f6nnen variieren. Diese sind Beispiele basierend auf dem Code.</p>"},{"location":"user/anleitung/#_project-tabelle","title":"_project Tabelle","text":"<pre><code>USE wq_general;\n\nCREATE TABLE _project (\n    project_id INT PRIMARY KEY,\n    Project_Name VARCHAR(255) NOT NULL,\n    database_name VARCHAR(255) DEFAULT NULL,\n    description TEXT\n);\n\n-- Standard-Projekte einf\u00fcgen\nINSERT INTO _project (project_id, Project_Name, description) VALUES\n(1, 'CESR', 'Climate and Environment System Research'),\n(2, 'WWQA', 'World Water Quality Assessment'),\n(3, 'CESR Sensitivity Analysis', 'Sensitivity Analysis'),\n(4, 'test', 'Test-Projekt f\u00fcr Entwickler');\n</code></pre>"},{"location":"user/anleitung/#_parameter-tabelle","title":"_parameter Tabelle","text":"<pre><code>CREATE TABLE _parameter (\n    parameter_id INT PRIMARY KEY,\n    ParameterName VARCHAR(255) NOT NULL,\n    description TEXT,\n    unit VARCHAR(50)\n);\n\n-- Standard-Parameter einf\u00fcgen\nINSERT INTO _parameter (parameter_id, ParameterName, unit) VALUES\n(0, 'BOD', 'mg/l'),\n(1, 'TDS', 'mg/l'),\n(2, 'FC', 'cfu/100ml'),\n(3, 'TN', 'mg/l'),\n(4, 'TP', 'mg/l');\n</code></pre>"},{"location":"user/anleitung/#_szenario-tabelle","title":"_szenario Tabelle","text":"<pre><code>CREATE TABLE _szenario (\n    IDScen INT PRIMARY KEY,\n    ScenName VARCHAR(255) NOT NULL,\n    description TEXT,\n    project_id INT,\n    FOREIGN KEY (project_id) REFERENCES _project(project_id)\n);\n\n-- Beispiel-Szenario\nINSERT INTO _szenario (IDScen, ScenName, description, project_id) VALUES\n(91, 'Baseline 2010', 'Baseline-Szenario f\u00fcr 2010', 2);\n</code></pre>"},{"location":"user/anleitung/#_runlist-tabelle","title":"_runlist Tabelle","text":"<pre><code>CREATE TABLE _runlist (\n    IDrun INT PRIMARY KEY,\n    runName VARCHAR(255),\n    parameter_id INT,\n    parameter_id_input INT,\n    parameter_id_load INT,\n    IDScen INT,\n    IDScen_wq_load INT,\n    project_id INT,\n    IDTemp INT DEFAULT -9999,\n    Q_low_limit DOUBLE DEFAULT NULL,\n    Q_low_limit_type INT DEFAULT NULL,\n    conservative INT DEFAULT 0,\n    lake INT DEFAULT 0,\n    UseWaterTemp INT DEFAULT 0,\n    svn_version_id INT DEFAULT NULL,\n    comment TEXT,\n    FOREIGN KEY (parameter_id) REFERENCES _parameter(parameter_id),\n    FOREIGN KEY (IDScen) REFERENCES _szenario(IDScen),\n    FOREIGN KEY (project_id) REFERENCES _project(project_id)\n);\n</code></pre>"},{"location":"user/anleitung/#_water_temperature_list-tabelle","title":"_water_temperature_list Tabelle","text":"<pre><code>CREATE TABLE _water_temperature_list (\n    IDTemp INT PRIMARY KEY,\n    Name VARCHAR(255),\n    climate VARCHAR(255),\n    comment TEXT,\n    C0 DOUBLE,\n    C1 DOUBLE,\n    C2 DOUBLE\n);\n\n-- Beispiel-Temperatur-Konfiguration\nINSERT INTO _water_temperature_list (IDTemp, Name, climate, C0, C1, C2) VALUES\n(100, 'Standard', 'air_temp', 20.0, -0.1, 5.0);\n</code></pre>"},{"location":"user/anleitung/#watergap_region-tabelle","title":"watergap_region Tabelle","text":"<pre><code>CREATE TABLE watergap_region (\n    IDVersion INT,\n    IDRegion INT,\n    hydro_input VARCHAR(255),\n    PRIMARY KEY (IDVersion, IDRegion)\n);\n\n-- Beispiel-Regionen\nINSERT INTO watergap_region (IDVersion, IDRegion, hydro_input) VALUES\n(3, 1, '/path/to/watergap/eu'),\n(3, 2, '/path/to/watergap/af'),\n(3, 3, '/path/to/watergap/as'),\n(3, 4, '/path/to/watergap/au'),\n(3, 5, '/path/to/watergap/na'),\n(3, 6, '/path/to/watergap/sa');\n</code></pre>"},{"location":"user/anleitung/#schritt-3-regionsspezifische-datenbanken---concentration-tabelle","title":"Schritt 3: Regionsspezifische Datenbanken - concentration Tabelle","text":"<p>F\u00fcr jede Region (af, eu, as, au, na, sa):</p> <pre><code>USE wwqa_worldqual_af;\n\nCREATE TABLE concentration (\n    IDrun INT NOT NULL,\n    cell INT NOT NULL,\n    year INT NOT NULL,\n    month INT NOT NULL,\n    concentration DOUBLE,\n    PRIMARY KEY (IDrun, cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year),\n    INDEX idx_idrun (IDrun),\n    INDEX idx_idrun_year (IDrun, year)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n</code></pre>"},{"location":"user/anleitung/#schritt-4-regionsspezifische-datenbanken---eintragstabellen","title":"Schritt 4: Regionsspezifische Datenbanken - Eintragstabellen","text":"<p>F\u00fcr jede Region:</p> <pre><code>USE wwqa_wq_load_af;\n\n-- Industrieabwasser\nCREATE TABLE calc_cell_month_load_man_ww (\n    cell INT NOT NULL,\n    year INT NOT NULL,\n    month INT NOT NULL,\n    load DOUBLE,\n    PRIMARY KEY (cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- Haushaltsabwasser\nCREATE TABLE calc_cell_month_load_dom_ww (\n    cell INT NOT NULL,\n    year INT NOT NULL,\n    month INT NOT NULL,\n    load DOUBLE,\n    PRIMARY KEY (cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- Bew\u00e4sserungs-R\u00fcckfluss\nCREATE TABLE calc_cell_month_load_rtf_irr (\n    cell INT NOT NULL,\n    year INT NOT NULL,\n    month INT NOT NULL,\n    load DOUBLE,\n    PRIMARY KEY (cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- Viehhaltung\nCREATE TABLE calc_cell_month_load_ls (\n    cell INT NOT NULL,\n    year INT NOT NULL,\n    month INT NOT NULL,\n    load DOUBLE,\n    PRIMARY KEY (cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- Landwirtschaft\nCREATE TABLE calc_cell_month_load_crop (\n    cell INT NOT NULL,\n    year INT NOT NULL,\n    month INT NOT NULL,\n    load DOUBLE,\n    PRIMARY KEY (cell, year, month),\n    INDEX idx_cell (cell),\n    INDEX idx_year (year)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- Weitere Tabellen je nach Parameter...\n</code></pre>"},{"location":"user/anleitung/#schritt-5-weitere-ben\u00f6tigte-tabellen","title":"Schritt 5: Weitere ben\u00f6tigte Tabellen","text":"<p>cell_input Tabelle:</p> <pre><code>USE wwqa_wq_load_af;\n\nCREATE TABLE cell_input (\n    cell INT NOT NULL,\n    IDScen INT NOT NULL,\n    year INT NOT NULL,\n    -- Weitere Spalten je nach Parameter\n    PRIMARY KEY (cell, IDScen, year)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n</code></pre> <p>country_parameter_input Tabelle:</p> <pre><code>CREATE TABLE country_parameter_input (\n    country_id INT NOT NULL,\n    IDScen INT NOT NULL,\n    year INT NOT NULL,\n    parameter_id INT NOT NULL,\n    -- Weitere Spalten je nach Parameter\n    PRIMARY KEY (country_id, IDScen, year, parameter_id)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n</code></pre>"},{"location":"user/anleitung/#schritt-6-routing-tabellen-wichtig","title":"Schritt 6: Routing-Tabellen (wichtig!)","text":"<p>WorldQual ben\u00f6tigt Routing-Informationen aus WaterGAP. Diese m\u00fcssen importiert werden:</p> <p>Typische Tabellen: - <code>outflow_cell</code> - Abflusszellen - <code>inflow</code> - Zufl\u00fcsse - <code>river_length</code> - Flussl\u00e4ngen - <code>routing_order</code> - Routing-Reihenfolge</p> <p>Wichtig: Diese Tabellen m\u00fcssen aus WaterGAP-Daten importiert werden oder von einem bestehenden System kopiert werden.</p>"},{"location":"user/anleitung/#schritt-7-schema-exportieren-und-dokumentieren","title":"Schritt 7: Schema exportieren und dokumentieren","text":"<p>Nach erfolgreicher Erstellung:</p> <pre><code># Schema exportieren\nmysqldump -u root -p --no-data wq_general &gt; schema_wq_general.sql\nmysqldump -u root -p --no-data wwqa_worldqual_af &gt; schema_worldqual_af.sql\nmysqldump -u root -p --no-data wwqa_wq_load_af &gt; schema_wq_load_af.sql\n\n# F\u00fcr alle Regionen wiederholen\n</code></pre> <p>Dokumentieren Sie: - Welche Tabellen erstellt wurden - Welche Indizes gesetzt wurden - Welche Daten importiert wurden</p>"},{"location":"user/anleitung/#wichtiger-hinweis","title":"Wichtiger Hinweis","text":"<p>Die vollst\u00e4ndige Datenbankstruktur ist komplex!</p> <ul> <li>Viele Tabellen haben parameter-spezifische Spalten</li> <li>Routing-Tabellen m\u00fcssen aus WaterGAP importiert werden</li> <li>Einige Tabellen werden dynamisch erstellt</li> </ul> <p>Empfehlung: - Nutzen Sie ein bestehendes System als Vorlage - Exportieren Sie das Schema: <code>mysqldump --no-data</code> - Importieren Sie auf neuem System: <code>mysql &lt; schema.sql</code></p> <p>Falls Sie komplett neu starten m\u00fcssen: - Kontaktieren Sie das Entwicklungsteam - Pr\u00fcfen Sie ob Schema-Dateien vorhanden sind - Siehe auch docs/technical/DATABASE_SCHEMA.md f\u00fcr Details</p>"},{"location":"user/anleitung/#watergap-daten-genau-beschaffen","title":"WaterGAP-Daten genau beschaffen","text":""},{"location":"user/anleitung/#was-sind-watergap-daten","title":"Was sind WaterGAP-Daten?","text":"<p>WaterGAP (Water Global Assessment and Prognosis) ist ein globales hydrologisches Modell. WorldQual ben\u00f6tigt dessen Output-Daten als Input.</p>"},{"location":"user/anleitung/#welche-daten-werden-ben\u00f6tigt","title":"Welche Daten werden ben\u00f6tigt?","text":""},{"location":"user/anleitung/#f\u00fcr-worldqual-hauptsimulation","title":"F\u00fcr worldqual (Hauptsimulation):","text":"<p>Erforderlich: - <code>G_Q_out_m3_[year].12.UNF0</code> - Monatlicher Abfluss [m\u00b3/month] - <code>G_RUNOFF_TOTAL_mm_[year].12.UNF0</code> - Monatlicher Gesamtabfluss [mm/month]</p> <p>Optional aber empfohlen: - <code>G_FLOW_VELOCITY_m_s_[year].12.UNF0</code> - Flie\u00dfgeschwindigkeit [m/s] - <code>G_WATER_TEMP_C_[year].12.UNF0</code> - Wassertemperatur [\u00b0C] (falls nicht berechnet)</p>"},{"location":"user/anleitung/#f\u00fcr-fill_worldqual_load-eintragsberechnung","title":"F\u00fcr fill_worldqual_load (Eintragsberechnung):","text":"<p>Erforderlich: - Bev\u00f6lkerungsdaten (Grid-Daten) - Landnutzungsdaten (Grid-Daten) - Abwasserbehandlungsraten (L\u00e4nderdaten)</p> <p>Diese k\u00f6nnen aus verschiedenen Quellen kommen: - UNF-Dateien - Datenbank-Tabellen - CSV-Dateien (m\u00fcssen importiert werden)</p>"},{"location":"user/anleitung/#f\u00fcr-water_temperature","title":"F\u00fcr water_temperature:","text":"<p>Erforderlich: - <code>G_AIR_TEMP_C_[year].12.UNF0</code> - Monatliche Lufttemperatur [\u00b0C]</p>"},{"location":"user/anleitung/#wo-bekommt-man-watergap-daten","title":"Wo bekommt man WaterGAP-Daten?","text":""},{"location":"user/anleitung/#option-1-von-watergap-projektgruppe","title":"Option 1: Von WaterGAP-Projektgruppe","text":"<p>Kontakt: - WaterGAP-Projektwebsite besuchen - Projektgruppe kontaktieren - Datenanfrage stellen</p> <p>Typischerweise erhalten Sie: - Zugriff auf Daten-Server - Download-Links - Dokumentation zum Datenformat</p>"},{"location":"user/anleitung/#option-2-von-bestehendem-projekt","title":"Option 2: Von bestehendem Projekt","text":"<p>Falls Sie Teil eines bestehenden Projekts sind: - Fragen Sie Projektleiter/Kollegen - Daten sind oft auf Projekt-Servern - M\u00f6glicherweise bereits in Datenbank importiert</p>"},{"location":"user/anleitung/#option-3-\u00f6ffentlich-verf\u00fcgbare-daten","title":"Option 3: \u00d6ffentlich verf\u00fcgbare Daten","text":"<p>Falls verf\u00fcgbar: - WaterGAP kann \u00f6ffentliche Datens\u00e4tze bereitstellen - Pr\u00fcfen Sie WaterGAP-Ver\u00f6ffentlichungen - Kontaktieren Sie die Autoren</p>"},{"location":"user/anleitung/#datenformat-verstehen","title":"Datenformat verstehen","text":""},{"location":"user/anleitung/#unf-dateien-unformatted","title":"UNF-Dateien (Unformatted)","text":"<p>Format: Bin\u00e4res Format (nicht lesbar als Text)</p> <p>Struktur: - Grid-basiert (0.5\u00b0 x 0.5\u00b0 Aufl\u00f6sung) - Zeitreihen: Monatlich (12 Werte) oder j\u00e4hrlich (1 Wert) - Byte-Order: Kann systemabh\u00e4ngig sein (Byte-Swapping erforderlich)</p> <p>Dateinamen-Konventionen:</p> <pre><code>G_[PARAMETER]_[UNIT]_[YEAR].[MONTHS].UNF0\n\nBeispiele:\nG_Q_out_m3_2010.12.UNF0          # Monatlicher Abfluss 2010\nG_RUNOFF_TOTAL_mm_2010.12.UNF0   # Monatlicher Runoff 2010\nG_AIR_TEMP_C_2010.12.UNF0        # Monatliche Lufttemperatur 2010\n</code></pre> <p>Dateinamen-Bestandteile: - <code>G_</code> - Grid-Daten - <code>Q_out</code> - Parameter (Abfluss) - <code>m3</code> - Einheit - <code>2010</code> - Jahr - <code>.12</code> - 12 Monate (monatlich) - <code>.UNF0</code> - Dateiformat</p>"},{"location":"user/anleitung/#dateigr\u00f6\u00dfe-absch\u00e4tzen","title":"Dateigr\u00f6\u00dfe absch\u00e4tzen","text":"<p>F\u00fcr eine Region (z.B. Afrika): - Anzahl Zellen: ~50.000-100.000 (abh\u00e4ngig von Region) - Datentyp: float (4 Bytes) oder double (8 Bytes) - Monatlich: 12 Werte pro Jahr</p> <p>Beispiel-Berechnung: <pre><code>Afrika: ~70.000 Zellen\nFloat: 4 Bytes\nMonatlich: 12 Werte\nJahr: 1 Jahr\n\nGr\u00f6\u00dfe = 70.000 * 4 * 12 = 3.360.000 Bytes \u2248 3.2 MB pro Jahr\n</code></pre></p> <p>F\u00fcr mehrere Jahre: - 20 Jahre = ~64 MB pro Parameter - Mehrere Parameter = mehrere hundert MB bis GB</p>"},{"location":"user/anleitung/#daten-pr\u00fcfen","title":"Daten pr\u00fcfen","text":"<p>Schritt 1: Dateien auflisten</p> <pre><code>cd /pfad/zu/watergap/daten\nls -lh G_*.UNF0\n\n# Sollten Sie sehen:\n# - Dateien f\u00fcr verschiedene Jahre\n# - Verschiedene Parameter\n# - Korrekte Dateinamen\n</code></pre> <p>Schritt 2: Dateigr\u00f6\u00dfe pr\u00fcfen</p> <pre><code># Erwartete Gr\u00f6\u00dfe berechnen\n# Anzahl_Zellen * Datentyp_Gr\u00f6\u00dfe * Werte_pro_Zelle\n\n# Beispiel f\u00fcr Afrika, monatlich, float:\n# 70.000 * 4 * 12 = 3.360.000 Bytes \u2248 3.2 MB\n\nls -lh G_Q_out_m3_2010.12.UNF0\n# Sollte etwa 3-4 MB sein (abh\u00e4ngig von Region)\n</code></pre> <p>Schritt 3: Dateien lesbar?</p> <pre><code># Pr\u00fcfen ob Dateien existieren und lesbar sind\ntest -r G_Q_out_m3_2010.12.UNF0 &amp;&amp; echo \"Datei ist lesbar\" || echo \"FEHLER: Datei nicht lesbar\"\n\n# Rechte pr\u00fcfen\nls -l G_Q_out_m3_2010.12.UNF0\n# Sollte zeigen: -r--r--r-- oder \u00e4hnlich\n</code></pre> <p>Schritt 4: Mit WorldQual testen</p> <pre><code># Test-Lesen mit einem Modul\ncd src/worldqual\n# OPTIONS.DAT anpassen: input_dir = /pfad/zu/daten\n# Programm starten (wird Fehler geben wenn Daten fehlen, aber zeigt ob Dateien gefunden werden)\n./worldqual 403100091 2010 2010\n</code></pre>"},{"location":"user/anleitung/#ben\u00f6tigte-dateien---komplette-liste","title":"Ben\u00f6tigte Dateien - Komplette Liste","text":""},{"location":"user/anleitung/#f\u00fcr-eine-komplette-simulation-ben\u00f6tigen-sie","title":"F\u00fcr eine komplette Simulation ben\u00f6tigen Sie:","text":"<p>Hydrologische Daten (f\u00fcr worldqual): <pre><code>G_Q_out_m3_[year].12.UNF0              # Abfluss [m\u00b3/month]\nG_RUNOFF_TOTAL_mm_[year].12.UNF0       # Runoff [mm/month]\nG_FLOW_VELOCITY_m_s_[year].12.UNF0     # Flie\u00dfgeschwindigkeit [m/s] (optional)\n</code></pre></p> <p>Klimadaten (f\u00fcr water_temperature): <pre><code>G_AIR_TEMP_C_[year].12.UNF0            # Lufttemperatur [\u00b0C]\n</code></pre></p> <p>Routing-Daten (aus Datenbank oder Dateien): - Abflusszellen (outflow_cell) - Zufl\u00fcsse (inflow) - Flussl\u00e4ngen (river_length) - Routing-Reihenfolge (routing_order)</p> <p>Eintragsdaten (f\u00fcr fill_worldqual_load): - Bev\u00f6lkerungsdichte (Grid oder L\u00e4nderdaten) - Abwasserbehandlungsraten (L\u00e4nderdaten) - Landnutzung (Grid-Daten) - D\u00fcngeranwendung (L\u00e4nderdaten) - Geologische Karten</p> <p>Wichtig: Nicht alle Daten m\u00fcssen als UNF-Dateien vorliegen - viele k\u00f6nnen auch aus der Datenbank kommen!</p>"},{"location":"user/anleitung/#daten-importieren-falls-n\u00f6tig","title":"Daten importieren (falls n\u00f6tig)","text":"<p>Falls Daten als CSV/Text vorliegen:</p> <pre><code>-- Beispiel: CSV importieren\nLOAD DATA LOCAL INFILE '/path/to/data.csv'\nINTO TABLE cell_input\nFIELDS TERMINATED BY ','\nENCLOSED BY '\"'\nLINES TERMINATED BY '\\n'\nIGNORE 1 ROWS;\n</code></pre> <p>Falls Daten aus anderem Format:</p> <ul> <li>Kontaktieren Sie das Entwicklungsteam</li> <li>M\u00f6glicherweise gibt es Import-Skripte</li> <li>Siehe auch docs/technical/DATABASE_SCHEMA.md</li> </ul>"},{"location":"user/anleitung/#alle-module-kompilieren---komplette-liste","title":"Alle Module kompilieren - Komplette Liste","text":"<p>Diese Liste zeigt alle Module und die exakte Kompilierungsreihenfolge.</p>"},{"location":"user/anleitung/#kompilierungsreihenfolge-wichtig","title":"Kompilierungsreihenfolge (wichtig!)","text":"<p>Phase 1: Gemeinsame Bibliotheken (MUSS zuerst)</p> <pre><code># 1. general_function (keine Abh\u00e4ngigkeiten)\ncd src/general_function\nmake clean\nmake all\n# Pr\u00fcfen: ls -la general_functions.o timestring.o country.o\n\n# 2. options (abh\u00e4ngig von general_function)\ncd ../options\nmake clean\nmake all\n# Pr\u00fcfen: ls -la options.o options_scen.o\n</code></pre> <p>Phase 2: Utility-Module</p> <pre><code># 3. newton (wird von water_temperature ben\u00f6tigt)\ncd ../newton\nmake clean\nmake all\n# Pr\u00fcfen: ls -la Newton.o countryinfo.o\n</code></pre> <p>Phase 3: Input-Module (k\u00f6nnen parallel kompiliert werden)</p> <pre><code># 4. fill_worldqual_load\ncd ../fill_worldqual_load\nmake clean\nmake all\n# Pr\u00fcfen: ls -la fill_worldqual_load\n\n# 5. water_temperature (nutzt newton)\ncd ../water_temperature\nmake clean\nmake all\n# Pr\u00fcfen: ls -la water_temperature\n\n# 6. rtf_input\ncd ../rtf_input\nmake clean\nmake all\n# Pr\u00fcfen: ls -la rtf_input\n\n# 7. rtf_input_corr_factor\ncd ../rtf_input_corr_factor\nmake clean\nmake all\n# Pr\u00fcfen: ls -la rtf_input_corr_factor\n\n# 8. pop_dens_input\ncd ../pop_dens_input\nmake clean\nmake all\n# Pr\u00fcfen: ls -la pop_dens_input\n</code></pre> <p>Phase 4: Core-Module</p> <pre><code># 9. wq_load (wird von fill_worldqual_load ben\u00f6tigt)\ncd ../wq_load\nmake clean\nmake all\n# Pr\u00fcfen: ls -la wq_load\n\n# 10. worldqual (Hauptprogramm)\ncd ../worldqual\nmake clean\nmake all\n# Pr\u00fcfen: ls -la worldqual\n</code></pre> <p>Phase 5: Analyse-Module</p> <pre><code># 11. wq_stat\ncd ../wq_stat\nmake clean\nmake all\n# Pr\u00fcfen: ls -la wq_stat\n\n# 12. wq_stat_stations\ncd ../wq_stat_stations\nmake clean\nmake all\n# Pr\u00fcfen: ls -la wq_stat_stations\n\n# 13. wq_stat_scen\ncd ../wq_stat_scen\nmake clean\nmake all\n# Pr\u00fcfen: ls -la wq_stat_scen\n\n# 14. wq_stat_riverdef\ncd ../wq_stat_riverdef\nmake clean\nmake all\n# Pr\u00fcfen: ls -la river_start_end (oder \u00e4hnlich)\n</code></pre> <p>Phase 6: Utility-Module</p> <pre><code># 15. MapRiverQuality\ncd ../MapRiverQuality\nmake clean\nmake all\n# Pr\u00fcfen: ls -la mapRiverQuality\n\n# 16. find_river_cells\ncd ../find_river_cells\nmake clean\nmake all\n# Pr\u00fcfen: ls -la find_river_cells\n\n# 17. wq_instream_daily\ncd ../wq_instream_daily\nmake clean\nmake all\n# Pr\u00fcfen: ls -la wq_instream_daily\n\n# 18. create_scenarios\ncd ../create_scenarios\nmake clean\nmake all\n# Pr\u00fcfen: ls -la create_scenarios\n\n# 19. copy_run\ncd ../copy_run\nmake clean\nmake all\n# Pr\u00fcfen: ls -la copy_run\n\n# 20. copy_scen\ncd ../copy_scen\nmake clean\nmake all\n# Pr\u00fcfen: ls -la copy_scen\n</code></pre>"},{"location":"user/anleitung/#automatisiertes-build-skript","title":"Automatisiertes Build-Skript","text":"<p>Erstellen Sie <code>build_all.sh</code>:</p> <pre><code>#!/bin/bash\n# Build-Skript f\u00fcr alle WorldQual-Module\n\nset -e  # Bei Fehler abbrechen\n\necho \"Building WorldQual modules...\"\necho \"================================\"\n\n# Funktion zum Kompilieren\nbuild_module() {\n    local module=$1\n    echo \"\"\n    echo \"Building $module...\"\n    cd \"src/$module\"\n    if [ -f makefile ]; then\n        make clean\n        make all\n        if [ $? -eq 0 ]; then\n            echo \"\u2713 $module built successfully\"\n        else\n            echo \"\u2717 ERROR: $module failed to build\"\n            exit 1\n        fi\n        cd ../..\n    else\n        echo \"\u26a0 WARNING: No makefile in $module\"\n    fi\n}\n\n# Phase 1: Gemeinsame Bibliotheken\nbuild_module \"general_function\"\nbuild_module \"options\"\n\n# Phase 2: Utility\nbuild_module \"newton\"\n\n# Phase 3: Input-Module\nbuild_module \"fill_worldqual_load\"\nbuild_module \"water_temperature\"\nbuild_module \"rtf_input\"\nbuild_module \"rtf_input_corr_factor\"\nbuild_module \"pop_dens_input\"\n\n# Phase 4: Core\nbuild_module \"wq_load\"\nbuild_module \"worldqual\"\n\n# Phase 5: Analyse\nbuild_module \"wq_stat\"\nbuild_module \"wq_stat_stations\"\nbuild_module \"wq_stat_scen\"\nbuild_module \"wq_stat_riverdef\"\n\n# Phase 6: Utility\nbuild_module \"MapRiverQuality\"\nbuild_module \"find_river_cells\"\nbuild_module \"wq_instream_daily\"\nbuild_module \"create_scenarios\"\nbuild_module \"copy_run\"\nbuild_module \"copy_scen\"\n\necho \"\"\necho \"================================\"\necho \"All modules built successfully!\"\n</code></pre> <p>Verwendung: <pre><code>chmod +x build_all.sh\n./build_all.sh\n</code></pre></p>"},{"location":"user/anleitung/#modul-\u00fcbersicht","title":"Modul-\u00dcbersicht","text":"Modul Zweck Abh\u00e4ngigkeiten Priorit\u00e4t general_function Gemeinsame Funktionen keine H\u00f6chste options Konfiguration general_function H\u00f6chste newton Numerische Kurvenanpassung keine Hoch fill_worldqual_load Eintr\u00e4ge berechnen general_function, options Hoch water_temperature Wassertemperatur general_function, options, newton Hoch wq_load Load-Berechnung general_function, options Hoch worldqual Hauptsimulation general_function, options, wq_load Kritisch wq_stat* Statistik general_function, options Mittel MapRiverQuality Kartierung general_function, options Niedrig create_scenarios Szenarien general_function, options Niedrig copy_* Verwaltung general_function, options Niedrig"},{"location":"user/anleitung/#h\u00e4ufige-kompilierungsfehler","title":"H\u00e4ufige Kompilierungsfehler","text":"<p>Fehler: \"No rule to make target '../general_function/general_functions.o'\"</p> <p>L\u00f6sung: general_function muss zuerst kompiliert werden! <pre><code>cd src/general_function &amp;&amp; make all\ncd ../options &amp;&amp; make all\n# Dann andere Module\n</code></pre></p> <p>Fehler: \"undefined reference to mysqlpp::...\"</p> <p>L\u00f6sung: Bibliothek nicht gelinkt oder falscher Pfad <pre><code># In Makefile pr\u00fcfen:\nLNKLIB = -lmysqlpp -lmysqlclient\n# Reihenfolge kann wichtig sein!\n</code></pre></p> <p>Fehler: Verschiedene Module kompilieren nicht</p> <p>L\u00f6sung: Pr\u00fcfen Sie Abh\u00e4ngigkeiten - Module die <code>general_function</code> nutzen: m\u00fcssen nach general_function kompiliert werden - Module die <code>options</code> nutzen: m\u00fcssen nach options kompiliert werden - Module die <code>newton</code> nutzen: m\u00fcssen nach newton kompiliert werden</p>"},{"location":"user/anleitung/#pr\u00fcfen-ob-kompilierung-erfolgreich","title":"Pr\u00fcfen ob Kompilierung erfolgreich","text":"<p>Nach jedem Modul:</p> <pre><code># Ausf\u00fchrbare Datei existiert?\nls -la modulname\n\n# Sollte zeigen:\n# -rwxr-xr-x 1 user user ... modulname\n# Das 'x' bedeutet ausf\u00fchrbar\n\n# Test-Ausf\u00fchrung (sollte Hilfe anzeigen oder Fehler wegen Parameter)\n./modulname\n</code></pre> <p>Alle Module auf einmal pr\u00fcfen:</p> <pre><code># Im Root-Verzeichnis\nfor dir in src/*/; do\n    if [ -f \"${dir}makefile\" ]; then\n        module=$(basename \"$dir\")\n        if [ -f \"${dir}${module}\" ] || [ -f \"${dir}worldqual\" ] || [ -f \"${dir}wq_load\" ]; then\n            echo \"\u2713 $module: OK\"\n        else\n            echo \"\u2717 $module: FEHLT\"\n        fi\n    fi\ndone\n</code></pre>"},{"location":"user/anleitung/#fehlermeldungen-verstehen---kompletter-guide","title":"Fehlermeldungen verstehen - Kompletter Guide","text":"<p>Diese Sektion erkl\u00e4rt alle m\u00f6glichen Fehlermeldungen die auftreten k\u00f6nnen und wie man sie behebt.</p>"},{"location":"user/anleitung/#datenbank-fehler","title":"Datenbank-Fehler","text":""},{"location":"user/anleitung/#database-connection-failed","title":"\"database connection failed...\"","text":"<p>Was bedeutet das? MySQL-Verbindung konnte nicht hergestellt werden.</p> <p>M\u00f6gliche Ursachen: 1. MySQL-Server l\u00e4uft nicht 2. Falsche Verbindungsdaten 3. Firewall blockiert Verbindung 4. Benutzer hat keine Berechtigung</p> <p>L\u00f6sung: <pre><code># 1. MySQL l\u00e4uft?\nsystemctl status mysql\n# oder\nbrew services list | grep mysql\n\n# 2. Verbindung testen\nmysql -u worldqual -p -h localhost\n# Falls Fehler: Passwort oder Benutzer falsch\n\n# 3. OPTIONS.DAT pr\u00fcfen\n# MyHost, MyUser, MyPassword korrekt?\n\n# 4. Berechtigungen pr\u00fcfen\nmysql -u root -p\nSHOW GRANTS FOR 'worldqual'@'localhost';\n</code></pre></p>"},{"location":"user/anleitung/#error-wrong-parameter-project_id","title":"\"ERROR: Wrong parameter: project_id\"","text":"<p>Was bedeutet das? Projekt-ID existiert nicht in der Datenbank.</p> <p>L\u00f6sung: <pre><code># Projekte anzeigen\nSELECT * FROM wq_general._project;\n\n# Falls leer: Projekt anlegen (siehe Datenbankstruktur anlegen)\n</code></pre></p>"},{"location":"user/anleitung/#error-wrong-parameter-idscen","title":"\"ERROR: Wrong parameter: IDScen\"","text":"<p>Was bedeutet das? Szenario-ID existiert nicht.</p> <p>L\u00f6sung: <pre><code># Szenarien anzeigen\nSELECT * FROM wq_general._szenario;\n\n# Falls leer: Szenario anlegen\nINSERT INTO _szenario (IDScen, ScenName, project_id) \nVALUES (91, 'Baseline 2010', 2);\n</code></pre></p>"},{"location":"user/anleitung/#error-wrong-parameter-idrun","title":"\"ERROR: Wrong parameter: IDrun\"","text":"<p>Was bedeutet das? Run-ID existiert nicht oder ist nicht vollst\u00e4ndig konfiguriert.</p> <p>L\u00f6sung: <pre><code># Run pr\u00fcfen\nSELECT * FROM wq_general._runlist WHERE IDrun=403100091;\n\n# Falls leer: Run anlegen (komplex, siehe IDrun anlegen)\n# Oder: Pr\u00fcfen ob alle ben\u00f6tigten Spalten gef\u00fcllt sind\n</code></pre></p>"},{"location":"user/anleitung/#error-wrong-parameter-parameter_id","title":"\"ERROR: Wrong parameter: parameter_id\"","text":"<p>Was bedeutet das? Parameter-ID existiert nicht.</p> <p>L\u00f6sung: <pre><code># Parameter anzeigen\nSELECT * FROM wq_general._parameter;\n\n# Falls leer: Parameter anlegen\nINSERT INTO _parameter (parameter_id, ParameterName) VALUES\n(0, 'BOD'), (1, 'TDS'), (2, 'FC'), (3, 'TN'), (4, 'TP');\n</code></pre></p>"},{"location":"user/anleitung/#query-error-","title":"\"Query error: ...\"","text":"<p>Was bedeutet das? SQL-Query-Fehler (MySQL++ Exception).</p> <p>M\u00f6gliche Ursachen: - Tabelle existiert nicht - Spalte existiert nicht - Syntax-Fehler in Query - Datenbank nicht gew\u00e4hlt</p> <p>L\u00f6sung: <pre><code># Tabelle existiert?\nSHOW TABLES LIKE 'tabellenname';\n\n# Struktur pr\u00fcfen\nDESCRIBE tabellenname;\n\n# Datenbank gew\u00e4hlt?\nSELECT DATABASE();\nUSE wq_general;  # Falls n\u00f6tig\n</code></pre></p>"},{"location":"user/anleitung/#conversion-error-","title":"\"Conversion error: ...\"","text":"<p>Was bedeutet das? Datenkonvertierungs-Fehler (z.B. String zu INT).</p> <p>L\u00f6sung: - Pr\u00fcfen Sie Datentypen in Datenbank - Pr\u00fcfen Sie ob NULL-Werte vorhanden sind - Pr\u00fcfen Sie Datenformat</p>"},{"location":"user/anleitung/#datei-fehler","title":"Datei-Fehler","text":""},{"location":"user/anleitung/#cant-open-input-file-pathtofileunf0","title":"\"Can't open input file /path/to/file.UNF0\"","text":"<p>Was bedeutet das? Datei konnte nicht ge\u00f6ffnet werden.</p> <p>M\u00f6gliche Ursachen: 1. Datei existiert nicht 2. Falscher Pfad 3. Keine Leseberechtigung 4. Datei ist leer</p> <p>L\u00f6sung: <pre><code># 1. Datei existiert?\nls -l /path/to/file.UNF0\n\n# 2. Pfad richtig?\n# In OPTIONS.DAT pr\u00fcfen: input_dir = /pfad/zu/daten\n# Vollst\u00e4ndiger Pfad: /pfad/zu/daten/G_Q_out_m3_2010.12.UNF0\n\n# 3. Rechte pr\u00fcfen\nls -l /path/to/file.UNF0\n# Sollte zeigen: -r--r--r-- oder -rw-r--r--\nchmod 644 /path/to/file.UNF0  # Falls n\u00f6tig\n\n# 4. Datei nicht leer?\nls -lh /path/to/file.UNF0\n# Sollte Gr\u00f6\u00dfe &gt; 0 zeigen\n</code></pre></p>"},{"location":"user/anleitung/#input-file-size-mismatch","title":"\"Input file size mismatch\"","text":"<p>Was bedeutet das? Dateigr\u00f6\u00dfe stimmt nicht mit erwarteter Gr\u00f6\u00dfe \u00fcberein.</p> <p>M\u00f6gliche Ursachen: - Falsche Anzahl Zellen - Falsches Format - Datei besch\u00e4digt - Falsche Werte pro Zelle (12 vs. 1)</p> <p>L\u00f6sung: <pre><code># Erwartete Gr\u00f6\u00dfe berechnen\n# Anzahl_Zellen * Datentyp_Gr\u00f6\u00dfe * Werte_pro_Zelle\n\n# Beispiel: 70.000 Zellen, float (4 Bytes), 12 Monate\n# Erwartet: 70.000 * 4 * 12 = 3.360.000 Bytes\n\n# Tats\u00e4chliche Gr\u00f6\u00dfe pr\u00fcfen\nls -l G_Q_out_m3_2010.12.UNF0\n\n# Falls unterschiedlich:\n# - Pr\u00fcfen Sie Anzahl Zellen (continent.ng)\n# - Pr\u00fcfen Sie ob Datei monatlich (12) oder j\u00e4hrlich (1) ist\n</code></pre></p>"},{"location":"user/anleitung/#file--bytesread--number_of_cellsvaluespercelltype_size","title":"\"file ... bytesRead ... number_of_cellsvaluesPerCelltype_size\"","text":"<p>Was bedeutet das? Datei wurde gelesen, aber Gr\u00f6\u00dfe stimmt nicht.</p> <p>L\u00f6sung: - Pr\u00fcfen Sie ob Datei vollst\u00e4ndig ist - Pr\u00fcfen Sie ob Dateiformat korrekt ist - Pr\u00fcfen Sie Byte-Order (Big-Endian vs. Little-Endian)</p>"},{"location":"user/anleitung/#kompilierungsfehler","title":"Kompilierungsfehler","text":""},{"location":"user/anleitung/#mysqlh-no-such-file-or-directory","title":"\"mysql++.h: No such file or directory\"","text":"<p>Was bedeutet das? MySQL++ Header-Datei nicht gefunden.</p> <p>L\u00f6sung: <pre><code># MySQL++ installiert?\nfind /usr /usr/local -name \"mysql++.h\"\n\n# Pfad in Makefile anpassen:\n# -I/usr/local/include/mysql++  # Anpassen!\n</code></pre></p>"},{"location":"user/anleitung/#cannot-find--lmysqlpp","title":"\"cannot find -lmysqlpp\"","text":"<p>Was bedeutet das? MySQL++ Bibliothek nicht gefunden.</p> <p>L\u00f6sung: <pre><code># Bibliothek finden\nfind /usr /usr/local -name \"libmysqlpp.so*\"\n\n# Pfad in Makefile anpassen:\n# -L/usr/local/lib  # Anpassen!\n</code></pre></p>"},{"location":"user/anleitung/#undefined-reference-to-mysqlpp","title":"\"undefined reference to mysqlpp::...\"","text":"<p>Was bedeutet das? Bibliothek wird nicht gelinkt.</p> <p>L\u00f6sung: <pre><code># In Makefile pr\u00fcfen:\nLNKLIB = -lmysqlpp -lmysqlclient\n# Muss NACH Objektdateien stehen:\n$(CC) $(OBJECTS) $(LNKLIB) -o $(APPNAME)\n</code></pre></p>"},{"location":"user/anleitung/#multiple-definition-of-","title":"\"multiple definition of ...\"","text":"<p>Was bedeutet das? Funktion mehrfach definiert.</p> <p>L\u00f6sung: - Funktionen in <code>.cpp</code> definieren, nicht in <code>.h</code> - <code>inline</code> f\u00fcr Template-Funktionen verwenden - Header-Guards pr\u00fcfen (<code>#ifndef</code>)</p>"},{"location":"user/anleitung/#laufzeit-fehler","title":"Laufzeit-Fehler","text":""},{"location":"user/anleitung/#not-enough-memory","title":"\"not enough memory\"","text":"<p>Was bedeutet das? Nicht genug RAM verf\u00fcgbar.</p> <p>L\u00f6sung: <pre><code># RAM pr\u00fcfen\nfree -h\n\n# Swap aktivieren (falls nicht aktiv)\nsudo swapon --show\n# Falls leer: Swap-Datei erstellen\n\n# Alternative: Kleinere Region/Zeitraum testen\n</code></pre></p>"},{"location":"user/anleitung/#segmentation-fault-oder-segfault","title":"\"Segmentation fault\" oder \"Segfault\"","text":"<p>Was bedeutet das? Zugriff auf ung\u00fcltigen Speicher.</p> <p>L\u00f6sung: <pre><code># Mit Debugger\ngdb ./worldqual\n(gdb) run 403100091 2010 2010\n# Programm crasht\n(gdb) backtrace\n# Zeigt wo Fehler auftrat\n\n# H\u00e4ufige Ursachen:\n# - NULL-Pointer\n# - Array-\u00dcberlauf\n# - Nicht initialisierte Pointer\n</code></pre></p>"},{"location":"user/anleitung/#floating-point-exception","title":"\"Floating point exception\"","text":"<p>Was bedeutet das? Division durch Null oder ung\u00fcltige Flie\u00dfkomma-Operation.</p> <p>L\u00f6sung: - Pr\u00fcfen Sie Divisionen (z.B. durch Q_out) - Pr\u00fcfen Sie ob Werte NULL oder NaN sind - Pr\u00fcfen Sie mathematische Funktionen (log, sqrt von negativen Werten)</p>"},{"location":"user/anleitung/#logik-fehler","title":"Logik-Fehler","text":""},{"location":"user/anleitung/#start-year--end-year","title":"\"start year &gt; end year\"","text":"<p>Was bedeutet das? Startjahr ist gr\u00f6\u00dfer als Endjahr.</p> <p>L\u00f6sung: <pre><code># Parameter pr\u00fcfen\n./worldqual 403100091 2010 2000  # FALSCH!\n./worldqual 403100091 2000 2010  # RICHTIG!\n</code></pre></p>"},{"location":"user/anleitung/#error-wrong-parameter","title":"\"ERROR: Wrong parameter\"","text":"<p>Was bedeutet das? Parameter ist keine Zahl oder ung\u00fcltig.</p> <p>L\u00f6sung: - Pr\u00fcfen Sie ob alle Parameter Zahlen sind - Pr\u00fcfen Sie ob Parameter im erlaubten Bereich sind - Pr\u00fcfen Sie Help-Ausgabe: <code>./programm</code> (ohne Parameter)</p>"},{"location":"user/anleitung/#daten-fehler","title":"Daten-Fehler","text":""},{"location":"user/anleitung/#value--nodata-oder-value--nan","title":"\"value = NODATA\" oder \"value = NaN\"","text":"<p>Was bedeutet das? Ung\u00fcltiger Wert (NoData oder Not-a-Number).</p> <p>L\u00f6sung: - Pr\u00fcfen Sie Input-Daten - Pr\u00fcfen Sie ob Berechnungen g\u00fcltig sind - Pr\u00fcfen Sie Divisionen durch Null</p>"},{"location":"user/anleitung/#rout_area--minroutarea-in-r-skripten","title":"\"rout_area &lt; min.rout.area\" (in R-Skripten)","text":"<p>Was bedeutet das? Einzugsgebietsfl\u00e4che zu klein.</p> <p>L\u00f6sung: - Normal (Filter in R-Skripten) - K\u00f6nnen Sie in R-Skript ignorieren oder anpassen</p>"},{"location":"user/anleitung/#performance-probleme","title":"Performance-Probleme","text":""},{"location":"user/anleitung/#programm-l\u00e4uft-sehr-langsam","title":"Programm l\u00e4uft sehr langsam","text":"<p>M\u00f6gliche Ursachen: - Zu gro\u00dfe Region - Zu langer Zeitraum - Zu wenig RAM (Swapping) - Datenbank langsam</p> <p>L\u00f6sung: <pre><code># 1. Mit kleiner Region testen\n# 2. Mit einem Jahr testen\n# 3. RAM pr\u00fcfen\nfree -h\n\n# 4. Datenbank-Performance pr\u00fcfen\n# Indizes vorhanden?\nSHOW INDEX FROM concentration;\n\n# 5. Parallele Prozesse vermeiden\n# Nur eine Simulation gleichzeitig!\n</code></pre></p>"},{"location":"user/anleitung/#fehlerbehebungs-workflow","title":"Fehlerbehebungs-Workflow","text":"<p>Systematisches Vorgehen:</p> <ol> <li>Fehlermeldung genau lesen</li> <li>Was sagt die Meldung?</li> <li>Welches Modul?</li> <li> <p>Welche Zeile (falls vorhanden)?</p> </li> <li> <p>Kontext pr\u00fcfen</p> </li> <li>Was wurde gerade gemacht?</li> <li>Welche Parameter wurden verwendet?</li> <li> <p>Was wurde vorher ausgef\u00fchrt?</p> </li> <li> <p>H\u00e4ufige Ursachen pr\u00fcfen</p> </li> <li>Datenbankverbindung?</li> <li>Dateien vorhanden?</li> <li> <p>Parameter korrekt?</p> </li> <li> <p>Logging aktivieren <pre><code>./programm parameter &gt; log.txt 2&gt;&amp;1\n# Dann log.txt analysieren\n</code></pre></p> </li> <li> <p>Debug-Modus aktivieren <pre><code>#define DEBUG\n#define DEBUG_queries\n</code></pre></p> </li> <li> <p>Mit Debugger <pre><code>gdb ./programm\n</code></pre></p> </li> </ol>"},{"location":"user/anleitung/#praktische-beispiele","title":"Praktische Beispiele","text":""},{"location":"user/anleitung/#beispiel-1-einfache-simulation-ein-jahr-ein-parameter","title":"Beispiel 1: Einfache Simulation (ein Jahr, ein Parameter)","text":"<p>Ziel: Simulieren Sie FC f\u00fcr Afrika, Jahr 2010.</p> <p>Schritte:</p> <ol> <li> <p>Eintr\u00e4ge berechnen: <pre><code>cd fill_worldqual_load\n# OPTIONS.DAT: project_id=2, IDScen=91, IDReg=2\n./fill_worldqual_load 2010 2010\n</code></pre></p> </li> <li> <p>Wassertemperatur: <pre><code>cd ../water_temperature\n# OPTIONS.DAT: IDTemp=100\n./water_temperature 2010 2010\n</code></pre></p> </li> <li> <p>Hauptsimulation: <pre><code>cd ../worldqual\n# OPTIONS.DAT: IDrun aus Datenbank holen\n./worldqual 403100091 2010 2010\n</code></pre></p> </li> <li> <p>Ergebnisse pr\u00fcfen: <pre><code>SELECT AVG(concentration) FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010;\n</code></pre></p> </li> </ol>"},{"location":"user/anleitung/#beispiel-2-mehrere-jahre","title":"Beispiel 2: Mehrere Jahre","text":"<p>Ziel: Simulieren Sie 1990-2010.</p> <p>Unterschied: Geben Sie Start- und Endjahr an:</p> <pre><code>./fill_worldqual_load 1990 2010\n./water_temperature 1990 2010\n./worldqual 403100091 1990 2010\n</code></pre> <p>Wichtig: Dauert viel l\u00e4nger! Testen Sie zuerst mit einem Jahr.</p>"},{"location":"user/anleitung/#beispiel-3-szenarienvergleich","title":"Beispiel 3: Szenarienvergleich","text":"<p>Ziel: Vergleichen Sie Baseline mit zwei Szenarien.</p> <p>Schritte:</p> <ol> <li>Baseline simulieren (wie Beispiel 1)</li> <li>Szenario 1 simulieren (andere IDScen)</li> <li>Szenario 2 simulieren</li> <li>Vergleich: <pre><code>cd wq_stat_scen\n# OPTIONS.DAT: Baseline-IDrun, Szenario-IDruns\n./wq_stat_scen 403100091 2010 2010\n</code></pre></li> </ol>"},{"location":"user/anleitung/#fehlerbehebung","title":"Fehlerbehebung","text":""},{"location":"user/anleitung/#problem-1-datenbankverbindung-schl\u00e4gt-fehl","title":"Problem 1: Datenbankverbindung schl\u00e4gt fehl","text":"<p>Fehlermeldung: <pre><code>database connection failed...\n</code></pre></p> <p>L\u00f6sung:</p> <ol> <li> <p>MySQL l\u00e4uft? <pre><code>systemctl status mysql\n# oder\nsudo systemctl start mysql\n</code></pre></p> </li> <li> <p>Verbindungsdaten richtig? <pre><code># In OPTIONS.DAT pr\u00fcfen:\nMyHost = localhost  # oder IP-Adresse\nMyUser = worldqual\nMyPassword = passwort\n</code></pre></p> </li> <li> <p>Test-Verbindung: <pre><code>mysql -u worldqual -p -h localhost\n</code></pre></p> </li> <li> <p>Berechtigungen pr\u00fcfen: <pre><code>SHOW GRANTS FOR 'worldqual'@'localhost';\n</code></pre></p> </li> </ol>"},{"location":"user/anleitung/#problem-2-datei-nicht-gefunden","title":"Problem 2: Datei nicht gefunden","text":"<p>Fehlermeldung: <pre><code>Can't open input file /pfad/zu/datei.UNF0\n</code></pre></p> <p>L\u00f6sung:</p> <ol> <li> <p>Pfad pr\u00fcfen: <pre><code>ls /pfad/zu/datei.UNF0\n</code></pre></p> </li> <li> <p>OPTIONS.DAT pr\u00fcfen: <pre><code>input_dir = /pfad/zu/daten  # Muss existieren!\n</code></pre></p> </li> <li> <p>Rechte pr\u00fcfen: <pre><code>ls -l /pfad/zu/datei.UNF0\nchmod 644 /pfad/zu/datei.UNF0  # Falls n\u00f6tig\n</code></pre></p> </li> </ol>"},{"location":"user/anleitung/#problem-3-falsche-parameter-id","title":"Problem 3: Falsche Parameter-ID","text":"<p>Fehlermeldung: <pre><code>ERROR: Wrong parameter: parameter_id\n</code></pre></p> <p>L\u00f6sung:</p> <ol> <li> <p>Parameter existiert? <pre><code>SELECT * FROM wq_general._parameter;\n</code></pre></p> </li> <li> <p>Parameter f\u00fcr Projekt konfiguriert? <pre><code>SELECT * FROM wq_general._runlist \nWHERE parameter_id=2;\n</code></pre></p> </li> </ol>"},{"location":"user/anleitung/#problem-4-speicherprobleme","title":"Problem 4: Speicherprobleme","text":"<p>Fehlermeldung: <pre><code>not enough memory\n</code></pre></p> <p>L\u00f6sung:</p> <ol> <li> <p>RAM pr\u00fcfen: <pre><code>free -h\n</code></pre></p> </li> <li> <p>Kleinere Region testen</p> </li> <li>K\u00fcrzeren Zeitraum testen (ein Jahr statt mehrere)</li> <li>Swap aktivieren: <pre><code>sudo swapon --show\n</code></pre></li> </ol>"},{"location":"user/anleitung/#problem-5-falsche-idrun","title":"Problem 5: Falsche IDrun","text":"<p>Fehlermeldung: <pre><code>ERROR: Wrong parameter: IDrun\n</code></pre></p> <p>L\u00f6sung:</p> <ol> <li> <p>IDrun existiert? <pre><code>SELECT * FROM wq_general._runlist \nWHERE IDrun=403100091;\n</code></pre></p> </li> <li> <p>Run vollst\u00e4ndig konfiguriert? <pre><code>SELECT IDrun, parameter_id, IDScen, IDTemp \nFROM wq_general._runlist \nWHERE IDrun=403100091;\n</code></pre></p> </li> <li> <p>Run anlegen falls n\u00f6tig (siehe Datenbank-Dokumentation)</p> </li> </ol>"},{"location":"user/anleitung/#tipps-und-tricks","title":"Tipps und Tricks","text":""},{"location":"user/anleitung/#tipp-1-immer-zuerst-testen","title":"Tipp 1: Immer zuerst testen","text":"<p>Testen Sie immer mit: - Einem Jahr (statt mehreren) - Kleiner Region (falls m\u00f6glich) - Einem Parameter</p> <p>Dann erweitern Sie schrittweise.</p>"},{"location":"user/anleitung/#tipp-2-logging-aktivieren","title":"Tipp 2: Logging aktivieren","text":"<p>Umleiten Sie Ausgaben: <pre><code>./worldqual 403100091 2010 2010 &gt; log.txt 2&gt;&amp;1\n</code></pre></p> <p>Dann k\u00f6nnen Sie sp\u00e4ter pr\u00fcfen: <pre><code>tail -f log.txt  # W\u00e4hrend der Ausf\u00fchrung\ncat log.txt      # Nach der Ausf\u00fchrung\n</code></pre></p>"},{"location":"user/anleitung/#tipp-3-datenbank-backup","title":"Tipp 3: Datenbank-Backup","text":"<p>Vor gro\u00dfen Simulationen: <pre><code>mysqldump -u username -p wwqa_worldqual_af &gt; backup_$(date +%Y%m%d).sql\n</code></pre></p>"},{"location":"user/anleitung/#tipp-4-fortschritt-pr\u00fcfen","title":"Tipp 4: Fortschritt pr\u00fcfen","text":"<p>W\u00e4hrend der Simulation k\u00f6nnen Sie pr\u00fcfen: <pre><code>-- Wie viele Jahre sind fertig?\nSELECT DISTINCT year FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 \nORDER BY year;\n</code></pre></p>"},{"location":"user/anleitung/#tipp-5-ergebnisse-exportieren","title":"Tipp 5: Ergebnisse exportieren","text":"<p>Als CSV exportieren: <pre><code>SELECT * FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010\nINTO OUTFILE '/tmp/ergebnisse.csv'\nFIELDS TERMINATED BY ',' \nENCLOSED BY '\"'\nLINES TERMINATED BY '\\n';\n</code></pre></p> <p>Weitere Hilfe: - README.md - \u00dcbersicht und Einf\u00fchrung - QUICK_REFERENCE.md - Schnellreferenz - STRUCTURE.md - Projektstruktur - INDEX.md - Dokumentations-\u00dcbersicht</p>"},{"location":"user/projektstruktur/","title":"WorldQual - Projektstruktur","text":"<p>Navigation: \u00dcbersicht | Schnellreferenz | Detaillierte Anleitung | Index</p> <p>\u00dcbersicht \u00fcber die Verzeichnisstruktur und wichtige Dateien.</p>"},{"location":"user/projektstruktur/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>Verzeichnisstruktur</li> <li>Wichtige Dateitypen</li> <li>Abh\u00e4ngigkeiten zwischen Modulen</li> <li>Kompilierungsreihenfolge</li> <li>Konfigurationsdateien-Struktur</li> <li>Datenbankstruktur (\u00dcbersicht)</li> <li>Input-Dateien (UNF-Format)</li> <li>Output-Dateien</li> <li>R-Skripte Struktur</li> <li>Entwicklungshinweise</li> </ul>"},{"location":"user/projektstruktur/#verzeichnisstruktur","title":"Verzeichnisstruktur","text":"<pre><code>WorldQual-1.0/\n\u2502\n\u251c\u2500\u2500 README.md                    # Hauptdokumentation\n\u251c\u2500\u2500 DOCUMENTATION.md             # Detaillierte Dokumentation\n\u251c\u2500\u2500 STRUCTURE.md                # Diese Datei\n\u2502\n\u251c\u2500\u2500 _corr_factor/               # R-Skript f\u00fcr Korrekturfaktoren\n\u2502   \u2514\u2500\u2500 corr_factor.R\n\u2502\n\u251c\u2500\u2500 create_scenarios/            # Szenarienerstellung\n\u2502   \u251c\u2500\u2500 create_scenarios.cpp\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u2514\u2500\u2500 OPTIONS.DAT (Beispiel)\n\u2502\n\u251c\u2500\u2500 fill_worldqual_load/        # Eintragsdaten-Berechnung\n\u2502   \u251c\u2500\u2500 fill_worldqual_load.cpp\n\u2502   \u251c\u2500\u2500 options_fill_wq_load.cpp\n\u2502   \u251c\u2500\u2500 options_fill_wq_load.h\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u2514\u2500\u2500 OPTIONS.DAT\n\u2502\n\u251c\u2500\u2500 find_river_cells/            # Flusszellen-Identifikation\n\u2502   \u251c\u2500\u2500 find_river_cells.cpp\n\u2502   \u251c\u2500\u2500 optionsfindRiverCells.cpp\n\u2502   \u251c\u2500\u2500 optionsfindRiverCells.h\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u251c\u2500\u2500 OPTIONS.DAT\n\u2502   \u2514\u2500\u2500 FC_AF_SENS_ANLYS.DAT\n\u2502\n\u251c\u2500\u2500 general_function/            # Gemeinsame Funktionen\n\u2502   \u251c\u2500\u2500 general_functions.cpp\n\u2502   \u251c\u2500\u2500 general_functions.h\n\u2502   \u251c\u2500\u2500 country.cpp\n\u2502   \u251c\u2500\u2500 country.h\n\u2502   \u251c\u2500\u2500 timestring.cpp\n\u2502   \u251c\u2500\u2500 timestring.h\n\u2502   \u2514\u2500\u2500 makefile\n\u2502\n\u251c\u2500\u2500 MapRiverQuality/             # Kartierung der Wasserqualit\u00e4t\n\u2502   \u251c\u2500\u2500 mapRiverQuality.cpp\n\u2502   \u251c\u2500\u2500 options_mapRiverQuality.cpp\n\u2502   \u251c\u2500\u2500 options_mapRiverQuality.h\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u2514\u2500\u2500 OPTIONS.DAT\n\u2502\n\u251c\u2500\u2500 newton/                      # Numerische Kurvenanpassung\n\u2502   \u251c\u2500\u2500 Newton.cpp\n\u2502   \u251c\u2500\u2500 Newton.h\n\u2502   \u251c\u2500\u2500 countryinfo.cpp\n\u2502   \u251c\u2500\u2500 countryinfo.h\n\u2502   \u251c\u2500\u2500 DATA.DIR\n\u2502   \u2514\u2500\u2500 Readme_Newton.txt\n\u2502\n\u251c\u2500\u2500 options/                     # Konfigurationsverwaltung\n\u2502   \u251c\u2500\u2500 options.cpp\n\u2502   \u251c\u2500\u2500 options.h\n\u2502   \u251c\u2500\u2500 options_scen.cpp\n\u2502   \u251c\u2500\u2500 options_scen.h\n\u2502   \u2514\u2500\u2500 OPTIONS.DAT\n\u2502\n\u251c\u2500\u2500 pop_dens_input/              # Bev\u00f6lkerungsdichte-Input\n\u2502   \u251c\u2500\u2500 pop_dens_input.cpp\n\u2502   \u251c\u2500\u2500 pop_dens_input.h\n\u2502   \u2514\u2500\u2500 makefile\n\u2502\n\u251c\u2500\u2500 R-scripte/                   # R-Skripte f\u00fcr Visualisierung\n\u2502   \u251c\u2500\u2500 start.R                 # Hauptkonfigurationsskript\n\u2502   \u251c\u2500\u2500 station.R               # Stationen-Analyse\n\u2502   \u251c\u2500\u2500 station_years.R          # Zeitreihen-Analyse\n\u2502   \u251c\u2500\u2500 stations_scatterplot.R   # Streudiagramme\n\u2502   \u251c\u2500\u2500 RiverSection.R           # Flussabschnitt-Analyse\n\u2502   \u251c\u2500\u2500 RiverSection_scen.R     # Szenarien-Vergleich\n\u2502   \u251c\u2500\u2500 RiverSectionComparison.R\n\u2502   \u251c\u2500\u2500 start_single_stations_rout_gr_3000.R\n\u2502   \u251c\u2500\u2500 diagramm_functions.R     # Diagrammfunktionen\n\u2502   \u251c\u2500\u2500 ld_for_charts/          # Lastverteilungs-Diagramme\n\u2502   \u2502   \u251c\u2500\u2500 ld_for_charts_ellen.R\n\u2502   \u2502   \u251c\u2500\u2500 load_pie_chart.R\n\u2502   \u2502   \u2514\u2500\u2500 grid_arrange_shared_legend.R\n\u2502   \u2514\u2500\u2500 ld_for_charts_var2/     # Variante 2\n\u2502       \u251c\u2500\u2500 ld_for_charts_ellen.R\n\u2502       \u251c\u2500\u2500 ld_for_charts_ellen_1990_2010.R\n\u2502       \u251c\u2500\u2500 load_pie_chart2.R\n\u2502       \u2514\u2500\u2500 ReadMe.txt\n\u2502\n\u251c\u2500\u2500 rtf_input/                   # Return-to-Flow Input\n\u2502   \u251c\u2500\u2500 rtf_input.cpp\n\u2502   \u2514\u2500\u2500 makefile\n\u2502\n\u251c\u2500\u2500 rtf_input_corr_factor/       # RTF mit Korrekturfaktoren\n\u2502   \u251c\u2500\u2500 rtf_input_corr_factor.cpp\n\u2502   \u251c\u2500\u2500 options_rtf_input.cpp\n\u2502   \u251c\u2500\u2500 options_rtf_input.h\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u2514\u2500\u2500 OPTIONS.DAT\n\u2502\n\u251c\u2500\u2500 water_temperature/           # Wassertemperatur-Berechnung\n\u2502   \u251c\u2500\u2500 water_temperature.cpp\n\u2502   \u251c\u2500\u2500 options_waterTemp.cpp\n\u2502   \u251c\u2500\u2500 options_waterTemp.h\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u2514\u2500\u2500 OPTIONS.DAT\n\u2502\n\u251c\u2500\u2500 wq_instream_daily/           # T\u00e4gliche In-Stream Berechnung\n\u2502   \u251c\u2500\u2500 wq_instream_daily.cpp\n\u2502   \u2514\u2500\u2500 makefile\n\u2502\n\u251c\u2500\u2500 wq_stat_riverdef/            # Flussabschnitt-Definition\n\u2502   \u251c\u2500\u2500 river_start_end.cpp\n\u2502   \u251c\u2500\u2500 river_start_end.h\n\u2502   \u2514\u2500\u2500 makefile\n\u2502\n\u251c\u2500\u2500 wq_stat_scen/                # Szenarien-Statistik\n\u2502   \u251c\u2500\u2500 wq_stat_scen.cpp\n\u2502   \u251c\u2500\u2500 options_wqstat_scen.cpp\n\u2502   \u251c\u2500\u2500 options_wqstat_scen.h\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u251c\u2500\u2500 OPTIONS.DAT\n\u2502   \u2514\u2500\u2500 STAT.DAT\n\u2502\n\u251c\u2500\u2500 wq_stat_stations/            # Stations-Statistik\n\u2502   \u251c\u2500\u2500 wq_stat_stations.cpp\n\u2502   \u251c\u2500\u2500 statistic_stations.h\n\u2502   \u251c\u2500\u2500 makefile\n\u2502   \u2514\u2500\u2500 STAT.DAT\n\u2502\n\u2514\u2500\u2500 .gitignore                   # Git-Ignore-Regeln\n</code></pre>"},{"location":"user/projektstruktur/#wichtige-dateitypen","title":"Wichtige Dateitypen","text":""},{"location":"user/projektstruktur/#c-quellcode","title":"C++ Quellcode","text":"<ul> <li><code>*.cpp</code>: C++ Implementierungsdateien</li> <li><code>*.h</code>: C++ Header-Dateien</li> </ul>"},{"location":"user/projektstruktur/#konfiguration","title":"Konfiguration","text":"<ul> <li><code>OPTIONS.DAT</code>: Hauptkonfigurationsdatei f\u00fcr jedes Modul</li> <li><code>STAT.DAT</code>: Statistik-Konfiguration</li> <li><code>*.DAT</code>: Weitere Konfigurationsdateien</li> </ul>"},{"location":"user/projektstruktur/#build-dateien","title":"Build-Dateien","text":"<ul> <li><code>makefile</code>: Makefile f\u00fcr Kompilierung (jedes Modul hat sein eigenes)</li> </ul>"},{"location":"user/projektstruktur/#r-skripte","title":"R-Skripte","text":"<ul> <li><code>*.R</code>: R-Skripte f\u00fcr Analyse und Visualisierung</li> </ul>"},{"location":"user/projektstruktur/#dokumentation","title":"Dokumentation","text":"<ul> <li><code>README.md</code>: Hauptdokumentation</li> <li><code>DOCUMENTATION.md</code>: Detaillierte Dokumentation</li> <li><code>STRUCTURE.md</code>: Diese Datei</li> <li><code>Readme_*.txt</code>: Modulspezifische READMEs</li> </ul>"},{"location":"user/projektstruktur/#abh\u00e4ngigkeiten-zwischen-modulen","title":"Abh\u00e4ngigkeiten zwischen Modulen","text":"<pre><code>general_function/  \u2500\u2500\u2510\n                     \u251c\u2500\u2500&gt; Alle Module nutzen gemeinsame Funktionen\noptions/          \u2500\u2500\u2518\n\nnewton/            \u2500\u2500&gt; Wird von water_temperature verwendet\n\nfill_worldqual_load \u2500\u2500&gt; Muss vor worldqual ausgef\u00fchrt werden\nwater_temperature  \u2500\u2500&gt; Optional, wird von worldqual verwendet\nworldqual          \u2500\u2500&gt; Hauptsimulation\nwq_stat_*         \u2500\u2500&gt; Analysieren Ergebnisse von worldqual\n\nR-scripte/         \u2500\u2500&gt; Analysieren Output von wq_stat_*\n</code></pre>"},{"location":"user/projektstruktur/#kompilierungsreihenfolge","title":"Kompilierungsreihenfolge","text":"<ol> <li> <p>Zuerst gemeinsame Module: <pre><code>cd general_function\nmake all\n\ncd ../options\nmake all\n</code></pre></p> </li> <li> <p>Dann Utility-Module: <pre><code>cd ../newton\nmake all\n</code></pre></p> </li> <li> <p>Dann spezifische Module (in beliebiger Reihenfolge):    <pre><code>cd ../water_temperature\nmake all\n\ncd ../fill_worldqual_load\nmake all\n\n# etc.\n</code></pre></p> </li> </ol>"},{"location":"user/projektstruktur/#konfigurationsdateien-struktur","title":"Konfigurationsdateien-Struktur","text":""},{"location":"user/projektstruktur/#optionsdat-format","title":"OPTIONS.DAT Format","text":"<p>Jede <code>OPTIONS.DAT</code> Datei folgt einem \u00e4hnlichen Format:</p> <pre><code>Runtime options [modulname]\n\n1. [Option 1 Name]\n   [Optionen-Beschreibung]\nValue: [Wert]\n\n2. [Option 2 Name]\n   [Optionen-Beschreibung]\nValue: [Wert]\n\n...\n</code></pre>"},{"location":"user/projektstruktur/#gemeinsame-optionen","title":"Gemeinsame Optionen","text":"<p>Die meisten Module teilen diese Optionen: - <code>project_id</code>: Projekt-ID - <code>IDScen</code>: Szenario-ID - <code>IDVersion</code>: WaterGAP Version - <code>IDReg</code>: Region - <code>MyHost</code>, <code>MyUser</code>, <code>MyPassword</code>: MySQL-Verbindung - <code>InputType</code>: 0=Datenbank, 1=UNF-Dateien - <code>input_dir</code>: Pfad zu Input-Dateien</p>"},{"location":"user/projektstruktur/#datenbankstruktur-\u00fcbersicht","title":"Datenbankstruktur (\u00dcbersicht)","text":""},{"location":"user/projektstruktur/#hauptdatenbanken","title":"Hauptdatenbanken","text":"<pre><code>wq_general/                    # Allgemeine Konfiguration\n\u251c\u2500\u2500 _project                  # Projekte\n\u251c\u2500\u2500 _szenario                # Szenarien\n\u251c\u2500\u2500 _runlist                 # Run-Konfigurationen\n\u251c\u2500\u2500 _parameter               # Parameter-Definitionen\n\u251c\u2500\u2500 _water_temperature_list  # Wassertemperatur-Konfigurationen\n\u2514\u2500\u2500 watergap_region         # Region-Konfigurationen\n\nwwqa_worldqual_[region]/     # Simulationsergebnisse\n\u251c\u2500\u2500 concentration           # Konzentrationen\n\u251c\u2500\u2500 cell_input             # Zell-Inputs\n\u2514\u2500\u2500 ...\n\nwwqa_wq_load_[region]/      # Eintragsdaten\n\u251c\u2500\u2500 calc_cell_month_load_*  # Berechnete Eintr\u00e4ge\n\u251c\u2500\u2500 cell_input             # Zell-Inputs\n\u2514\u2500\u2500 country_parameter_input  # L\u00e4nder-Parameter\n</code></pre>"},{"location":"user/projektstruktur/#input-dateien-unf-format","title":"Input-Dateien (UNF-Format)","text":""},{"location":"user/projektstruktur/#typische-dateinamen-konventionen","title":"Typische Dateinamen-Konventionen","text":"<pre><code>G_[PARAMETER]_[year].UNF0           # J\u00e4hrliche Daten\nG_[PARAMETER]_[year].12.UNF0        # Monatliche Daten (12 Monate)\n\nBeispiele:\nG_Q_out_m3_[year].12.UNF0           # Monatlicher Abfluss\nG_RUNOFF_TOTAL_mm_[year].12.UNF0    # Monatlicher Runoff\nG_MAN_WW_m3_[year].UNF0             # J\u00e4hrliches Abwasservolumen\nG_IRRIG_RTF_SW_m3_[year].12.UNF0    # RTF Bew\u00e4sserung\nG_CORR_FACT_RTF_[year].12.UNF0     # RTF Korrekturfaktoren\n</code></pre>"},{"location":"user/projektstruktur/#output-dateien","title":"Output-Dateien","text":""},{"location":"user/projektstruktur/#datenbank-output","title":"Datenbank-Output","text":"<ul> <li>Ergebnisse werden in regionsspezifische Datenbanken geschrieben</li> <li>Tabellen: <code>concentration</code>, <code>cell_input</code>, etc.</li> </ul>"},{"location":"user/projektstruktur/#unf-output","title":"UNF-Output","text":"<ul> <li><code>.12.UNF0</code> Dateien f\u00fcr monatliche Grids</li> <li><code>.UNF0</code> Dateien f\u00fcr j\u00e4hrliche Grids</li> </ul>"},{"location":"user/projektstruktur/#statistik-output","title":"Statistik-Output","text":"<ul> <li>Textdateien mit statistischen Kennzahlen</li> <li>Werden von R-Skripten weiterverarbeitet</li> </ul>"},{"location":"user/projektstruktur/#r-skripte-struktur","title":"R-Skripte Struktur","text":""},{"location":"user/projektstruktur/#hauptskripte","title":"Hauptskripte","text":"<ul> <li><code>start.R</code>: Konfiguration und Startpunkt</li> <li><code>station.R</code>: Einzelne Stationen</li> <li><code>RiverSection.R</code>: Flussabschnitte</li> <li><code>stations_scatterplot.R</code>: Validierungs-Diagramme</li> </ul>"},{"location":"user/projektstruktur/#hilfsskripte","title":"Hilfsskripte","text":"<ul> <li><code>diagramm_functions.R</code>: Allgemeine Diagrammfunktionen</li> <li><code>ld_for_charts/*.R</code>: Lastverteilungs-Diagramme</li> </ul>"},{"location":"user/projektstruktur/#konfiguration-in-startr","title":"Konfiguration in start.R","text":"<p>Wichtige Variablen: - <code>r_script_dir</code>: Verzeichnis mit R-Skripten - <code>current_dir</code>: Ausgabe-Verzeichnis f\u00fcr Grafiken - <code>input.path</code>: Pfad zu Input-Dateien - <code>input.filename</code>: Dateiname (oder leer f\u00fcr alle) - <code>log_scale</code>: Logarithmische Skalierung - <code>unit</code>: Einheit f\u00fcr Konzentration</p>"},{"location":"user/projektstruktur/#entwicklungshinweise","title":"Entwicklungshinweise","text":""},{"location":"user/projektstruktur/#neue-module-hinzuf\u00fcgen","title":"Neue Module hinzuf\u00fcgen","text":"<ol> <li>Verzeichnis erstellen</li> <li><code>makefile</code> erstellen (basierend auf bestehenden)</li> <li><code>OPTIONS.DAT</code> erstellen</li> <li>Abh\u00e4ngigkeiten zu <code>general_function</code> und <code>options</code> einrichten</li> <li>In Dokumentation aufnehmen</li> </ol>"},{"location":"user/projektstruktur/#code-standards","title":"Code-Standards","text":"<ul> <li>C++11 Standard</li> <li>MySQL++ f\u00fcr Datenbankzugriff</li> <li>Konsistente Fehlerbehandlung</li> <li>Status-Ausgaben auf <code>stdout</code></li> <li>Fehler auf <code>stderr</code></li> </ul>"},{"location":"user/projektstruktur/#debugging","title":"Debugging","text":"<ul> <li><code>#define DEBUG</code> f\u00fcr allgemeine Debug-Ausgaben</li> <li><code>#define DEBUG_queries</code> f\u00fcr SQL-Query-Ausgaben</li> <li>Logging \u00fcber <code>stdout</code>/<code>stderr</code> umleiten</li> </ul> <p>Weitere Hilfe: - README.md - \u00dcbersicht und Einf\u00fchrung - DOCUMENTATION.md - Detaillierte Anleitung - QUICK_REFERENCE.md - Schnellreferenz - INDEX.md - Dokumentations-\u00dcbersicht</p> <p>Hinweis: Diese Struktur\u00fcbersicht dient als Referenz. F\u00fcr detaillierte Informationen siehe DOCUMENTATION.md.</p>"},{"location":"user/schnellreferenz/","title":"WorldQual - Schnellreferenz","text":"<p>Navigation: \u00dcbersicht | Detaillierte Anleitung | Index | Struktur</p> <p>Kurze \u00dcbersicht f\u00fcr die t\u00e4gliche Nutzung.</p>"},{"location":"user/schnellreferenz/#inhaltsverzeichnis","title":"Inhaltsverzeichnis","text":"<ul> <li>Schnellstart</li> <li>Wichtige Nummern</li> <li>Datenbank-Abfragen</li> <li>OPTIONS.DAT - Wichtige Einstellungen</li> <li>H\u00e4ufige Befehle</li> <li>Datenbank-Backup</li> <li>Ergebnisse exportieren</li> <li>R-Visualisierung</li> <li>Fehlerbehebung - Schnell</li> <li>Modul-Verzeichnisse</li> <li>Workflow-Checkliste</li> <li>Dauer-Sch\u00e4tzungen</li> </ul>"},{"location":"user/schnellreferenz/#schnellstart","title":"Schnellstart","text":"<pre><code># 1. Eintr\u00e4ge berechnen\ncd fill_worldqual_load\n./fill_worldqual_load START_JAHR END_JAHR\n\n# 2. Wassertemperatur (optional)\ncd ../water_temperature\n./water_temperature START_JAHR END_JAHR\n\n# 3. Hauptsimulation\ncd ../worldqual\n./worldqual IDRUN START_JAHR END_JAHR\n\n# 4. Statistik\ncd ../wq_stat_stations\n./wq_stat_stations IDRUN START_JAHR END_JAHR\n</code></pre>"},{"location":"user/schnellreferenz/#wichtige-nummern","title":"Wichtige Nummern","text":""},{"location":"user/schnellreferenz/#parameter-ids","title":"Parameter-IDs","text":"<ul> <li>0 = BOD (Biochemischer Sauerstoffbedarf)</li> <li>1 = Salz (TDS)</li> <li>2 = FC (F\u00e4kalcoliforme Bakterien)</li> <li>3 = TN (Gesamtstickstoff)</li> <li>4 = TP (Gesamtphosphor)</li> </ul>"},{"location":"user/schnellreferenz/#region-ids","title":"Region-IDs","text":"<ul> <li>1 = Europa (eu)</li> <li>2 = Afrika (af)</li> <li>3 = Asien (as)</li> <li>4 = Australien (au)</li> <li>5 = Nordamerika (na)</li> <li>6 = S\u00fcdamerika (sa)</li> </ul>"},{"location":"user/schnellreferenz/#watergap-versionen","title":"WaterGAP Versionen","text":"<ul> <li>2 = WaterGAP2</li> <li>3 = WaterGAP3 (empfohlen)</li> </ul>"},{"location":"user/schnellreferenz/#datenbank-abfragen","title":"Datenbank-Abfragen","text":""},{"location":"user/schnellreferenz/#projekt-id-finden","title":"Projekt-ID finden","text":"<pre><code>SELECT project_id, Project_Name FROM wq_general._project;\n</code></pre>"},{"location":"user/schnellreferenz/#szenario-id-finden","title":"Szenario-ID finden","text":"<pre><code>SELECT IDScen, ScenName FROM wq_general._szenario;\n</code></pre>"},{"location":"user/schnellreferenz/#idrun-finden","title":"IDrun finden","text":"<pre><code>SELECT IDrun, runName FROM wq_general._runlist \nWHERE parameter_id=2 AND IDScen=91;\n</code></pre>"},{"location":"user/schnellreferenz/#parameter-liste","title":"Parameter-Liste","text":"<pre><code>SELECT parameter_id, ParameterName FROM wq_general._parameter;\n</code></pre>"},{"location":"user/schnellreferenz/#ergebnisse-anzeigen","title":"Ergebnisse anzeigen","text":"<pre><code>SELECT * FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010 \nLIMIT 10;\n</code></pre>"},{"location":"user/schnellreferenz/#durchschnittliche-konzentration","title":"Durchschnittliche Konzentration","text":"<pre><code>SELECT month, AVG(concentration) as avg_conc\nFROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010\nGROUP BY month;\n</code></pre>"},{"location":"user/schnellreferenz/#optionsdat---wichtige-einstellungen","title":"OPTIONS.DAT - Wichtige Einstellungen","text":"<pre><code>project_id = 2          # Projekt-ID (aus Datenbank)\nIDScen = 91            # Szenario-ID (aus Datenbank)\nIDVersion = 3           # WaterGAP Version (2 oder 3)\nIDReg = 2              # Region (1-6)\nMyHost = localhost      # MySQL-Server\nMyUser = worldqual      # MySQL-User\nMyPassword = passwort   # MySQL-Passwort\nInputType = 1          # 0=Datenbank, 1=UNF-Dateien\ninput_dir = /pfad/zu/daten  # Pfad zu UNF-Dateien\n</code></pre>"},{"location":"user/schnellreferenz/#h\u00e4ufige-befehle","title":"H\u00e4ufige Befehle","text":""},{"location":"user/schnellreferenz/#mysql-verbindung-testen","title":"MySQL-Verbindung testen","text":"<pre><code>mysql -u worldqual -p -h localhost\n</code></pre>"},{"location":"user/schnellreferenz/#mysql-status-pr\u00fcfen","title":"MySQL-Status pr\u00fcfen","text":"<pre><code>systemctl status mysql\n</code></pre>"},{"location":"user/schnellreferenz/#dateien-pr\u00fcfen","title":"Dateien pr\u00fcfen","text":"<pre><code>ls -lh /pfad/zu/daten/*.UNF0\n</code></pre>"},{"location":"user/schnellreferenz/#ram-pr\u00fcfen","title":"RAM pr\u00fcfen","text":"<pre><code>free -h\n</code></pre>"},{"location":"user/schnellreferenz/#logging-aktivieren","title":"Logging aktivieren","text":"<pre><code>./worldqual 403100091 2010 2010 &gt; log.txt 2&gt;&amp;1\n</code></pre>"},{"location":"user/schnellreferenz/#fortschritt-pr\u00fcfen-w\u00e4hrend-simulation","title":"Fortschritt pr\u00fcfen (w\u00e4hrend Simulation)","text":"<pre><code>SELECT DISTINCT year FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 \nORDER BY year;\n</code></pre>"},{"location":"user/schnellreferenz/#datenbank-backup","title":"Datenbank-Backup","text":"<pre><code># Backup erstellen\nmysqldump -u username -p wwqa_worldqual_af &gt; backup_$(date +%Y%m%d).sql\n\n# Backup wiederherstellen\nmysql -u username -p wwqa_worldqual_af &lt; backup_20260202.sql\n</code></pre>"},{"location":"user/schnellreferenz/#ergebnisse-exportieren","title":"Ergebnisse exportieren","text":""},{"location":"user/schnellreferenz/#als-csv","title":"Als CSV","text":"<pre><code>SELECT * FROM wwqa_worldqual_af.concentration \nWHERE IDrun=403100091 AND year=2010\nINTO OUTFILE '/tmp/ergebnisse.csv'\nFIELDS TERMINATED BY ',' \nENCLOSED BY '\"'\nLINES TERMINATED BY '\\n';\n</code></pre>"},{"location":"user/schnellreferenz/#r-visualisierung","title":"R-Visualisierung","text":"<pre><code># In R\nsetwd(\"R-scripte\")\n\n# start.R anpassen:\ninput.path &lt;- \"/pfad/zu/statistik\"\ninput.filename &lt;- \"\"\nunit &lt;- \"cfu/100ml\"\nlog_scale &lt;- \"y\"\n\nsource(\"start.R\")\nsource(\"station.R\")\n</code></pre>"},{"location":"user/schnellreferenz/#fehlerbehebung---schnell","title":"Fehlerbehebung - Schnell","text":"Problem L\u00f6sung Datenbankverbindung fehlgeschlagen MySQL l\u00e4uft? <code>systemctl status mysql</code> Datei nicht gefunden Pfad pr\u00fcfen: <code>ls /pfad/zu/datei</code> Falsche Parameter-ID <code>SELECT * FROM wq_general._parameter;</code> Falsche IDrun <code>SELECT * FROM wq_general._runlist WHERE IDrun=...;</code> Speicherprobleme Kleinere Region/Zeitraum testen"},{"location":"user/schnellreferenz/#modul-verzeichnisse","title":"Modul-Verzeichnisse","text":"<pre><code>fill_worldqual_load/     # Eintr\u00e4ge berechnen\nwater_temperature/        # Wassertemperatur\nworldqual/               # Hauptsimulation\nwq_stat_stations/        # Statistik\nwq_stat_scen/           # Szenarienvergleich\nMapRiverQuality/         # Kartierung\ncreate_scenarios/        # Szenarien erstellen\nR-scripte/              # Visualisierung\n</code></pre>"},{"location":"user/schnellreferenz/#workflow-checkliste","title":"Workflow-Checkliste","text":"<ul> <li>[ ] Projekt und Szenario in Datenbank vorhanden?</li> <li>[ ] OPTIONS.DAT angepasst?</li> <li>[ ] Input-Daten vorhanden?</li> <li>[ ] Module kompiliert?</li> <li>[ ] MySQL l\u00e4uft?</li> <li>[ ] IDrun bekannt?</li> </ul>"},{"location":"user/schnellreferenz/#dauer-sch\u00e4tzungen","title":"Dauer-Sch\u00e4tzungen","text":"Aufgabe Dauer (ca.) Eintr\u00e4ge (1 Jahr, kleine Region) 5-15 Min Eintr\u00e4ge (mehrere Jahre) Stunden Hauptsimulation (1 Jahr, kleine Region) 1-4 Std Hauptsimulation (mehrere Jahre) Tage Statistik Minuten bis Stunden"},{"location":"user/schnellreferenz/#wichtige-dateien","title":"Wichtige Dateien","text":"<ul> <li><code>OPTIONS.DAT</code> - Konfiguration (in jedem Modul)</li> <li><code>STAT.DAT</code> - Statistik-Konfiguration</li> <li><code>makefile</code> - Kompilierung</li> <li><code>start.R</code> - R-Konfiguration</li> </ul>"},{"location":"user/schnellreferenz/#weitere-hilfe","title":"Weitere Hilfe","text":"<ul> <li>README.md - \u00dcbersicht und Einf\u00fchrung</li> <li>DOCUMENTATION.md - Detaillierte Anleitung</li> <li>STRUCTURE.md - Projektstruktur</li> <li>INDEX.md - Dokumentations-\u00dcbersicht</li> </ul> <p>Tipp: Lesezeichen setzen f\u00fcr schnellen Zugriff! Auf GitHub k\u00f6nnen Sie alle Links durch Klick nutzen.</p>"}]}